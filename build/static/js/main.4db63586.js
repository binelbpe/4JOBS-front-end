(()=>{var e,s,t,r={5060:(e,s,t)=>{"use strict";var r=t(5043),a=t(4391),l=t(5475),n=t(3216),i=t(3003),o=t(4730),c=t(3923),d=t(4809),u=t(7973),m=t(8901),p=t(6111),x=t(2099),h=t(6213);const g="http://localhost:5000";console.log("API_BASE_URL",g,"  process.env.REACT_APP_API_BASE_URL ","http://localhost:5000");const f=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=localStorage.getItem("token"),l={"Content-Type":"application/json"};a&&(l.Authorization=`Bearer ${a}`);const n={...l,...r};try{return(await(0,h.A)({method:e,url:`${g}${s}`,data:t,headers:n})).data}catch(e){if(h.A.isAxiosError(e)&&e.response){if(401===e.response.status)throw sr.dispatch(U()),new Error("Authentication failed. Please log in again.");throw console.error("API Error:",e.response.data),new Error(e.response.data.error||"Server Error")}if(h.A.isAxiosError(e)&&e.request)throw console.error("No response received:",e.request),new Error("No response from the server");throw console.error("Unexpected error:",e),new Error("An unknown error occurred")}},j=async(e,s,t)=>{const r=localStorage.getItem("token"),a={};r&&(a.Authorization=`Bearer ${r}`);try{return(await(0,h.A)({method:e,url:`${g}${s}`,data:t,headers:a})).data}catch(e){if(h.A.isAxiosError(e)){if(e.response)throw console.error("API Error:",e.response.data),new Error(e.response.data.error||"Server Error");if(e.request)throw console.error("No response received:",e.request),new Error("No response from the server")}throw console.error("Unexpected error:",e),new Error("An unknown error occurred")}},b={user:null,isAuthenticated:!1,loading:!1,error:null,otpStep:!1,jobPosts:{posts:[],loading:!1,error:null,totalPages:0,totalCount:0,currentPage:1,updatedAt:(new Date).toISOString()},selectedPost:null},y=(0,d.zD)("auth/fetchUserProfile",(async(e,s)=>{try{const t=localStorage.getItem("token");if(!t)return s.rejectWithValue("No token found");const r=await(async(e,s)=>f("GET",`/profile/${e}`,{},{Authorization:`Bearer ${s}`}))(e,t);return r}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"Failed to fetch user profile")}})),v=(0,d.zD)("auth/login",(async(e,s)=>{try{const s=await(async e=>f("POST","/login",e))(e);return console.log("userdarta",s),s}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),N=(0,d.zD)("auth/google-login",(async(e,s)=>{try{const s=await(async e=>f("POST","/auth/google/callback",{googleToken:e}))(e);return s}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),w=(0,d.zD)("auth/signup",(async(e,s)=>{try{const s=await(async e=>f("POST","/signup",e))(e);return s}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),C=(0,d.zD)("auth/verifyOtp",(async(e,s)=>{try{return await(async e=>f("POST","/verify-otp",e))(e)}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),k=(0,d.zD)("auth/updateUserProfile",(async(e,s)=>{let{userId:t,formData:r}=e;try{const e=await(async(e,s)=>f("PUT",`/edit-profile/${e}`,s,{"Content-Type":"multipart/form-data"}))(t,r);return e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),S=(0,d.zD)("auth/updateUserProjects",(async(e,s)=>{let{userId:t,projects:r}=e;try{const e=await(async(e,s)=>f("PUT",`/edit-projects/${e}`,{projects:s}))(t,r);return e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),A=(0,d.zD)("auth/updateUserCertificates",(async(e,s)=>{let{userId:t,certificates:r}=e;try{const e=await(async(e,s)=>{const t=new FormData;return t.append("certificateDetails",JSON.stringify(s.map((e=>e.details)))),s.forEach(((e,s)=>{e.file&&t.append("certificateImage",e.file,e.file.name)})),f("PUT",`/edit-certificates/${e}`,t,{"Content-Type":"multipart/form-data"})})(t,r);return console.log("updatedCertificatesData",e),e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),P=(0,d.zD)("auth/updateUserExperiences",(async(e,s)=>{let{userId:t,experiences:r}=e;try{const e=await(async(e,s)=>f("PUT",`/edit-experiences/${e}`,{experiences:s}))(t,r);return console.log("exp",e),e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),I=(0,d.zD)("auth/updateUserResume",(async(e,s)=>{let{userId:t,resume:r}=e;try{const e=await(async(e,s)=>{const t=new FormData;return t.append("resume",s),f("PUT",`/edit-resume/${e}`,t,{"Content-Type":"multipart/form-data"})})(t,r);return e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),R=(0,d.zD)("auth/fetchJobPosts",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:s}=arguments.length>1?arguments[1]:void 0;try{console.log("params",e);const s=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:s=1,limit:t=10,sortBy:r="createdAt",sortOrder:a="desc",filter:l={}}=e,n=new URLSearchParams({page:s.toString(),limit:t.toString(),sortBy:r,sortOrder:a,filter:JSON.stringify(l)});return f("GET",`/jobs?${n.toString()}`)}(e);return console.log("apply",s),s}catch(e){return s(e instanceof Error?e.message:"Failed to fetch job posts")}})),E=(0,d.zD)("auth/applyForJob",(async(e,s)=>{let{userId:t,jobId:r}=e,{dispatch:a,rejectWithValue:l}=s;try{return await(async(e,s)=>f("POST",`/jobs/${s}/apply`,{userId:e}))(t,r),await a(R({})),r}catch(e){return h.A.isAxiosError(e)&&e.response?l(e.response.data.error||"Failed to apply for job"):l("Failed to apply for job")}})),D=(0,d.zD)("auth/fetchJobPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/jobs/${e}`))(e);return console.log(s),s}catch(e){return t(e instanceof Error?e.message:"Failed to fetch job post")}})),z=(0,d.zD)("auth/reportJob",(async(e,s)=>{let{userId:t,jobId:r,reason:a}=e,{rejectWithValue:l}=s;try{return await(async(e,s,t)=>f("POST",`/jobs/${s}/report`,{userId:e,reason:t}))(t,r,a),r}catch(e){return h.A.isAxiosError(e)&&e.response?l(e.response.data.error||"Failed to report job"):l("Failed to report job")}})),O=(0,d.zD)("auth/sendForgotPasswordOtp",(async(e,s)=>{try{const s=await(async e=>f("POST","/forgot-password",{email:e}))(e);return s}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),T=(0,d.zD)("auth/verifyForgotPasswordOtp",(async(e,s)=>{let{email:t,otp:r}=e;try{const e=await(async(e,s)=>f("POST","/verify-forgot-password-otp",{email:e,otp:s}))(t,r);return e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),$=(0,d.zD)("auth/resetPassword",(async(e,s)=>{let{email:t,newPassword:r,otp:a}=e;try{const e=await(async(e,s,t)=>f("POST","/reset-password",{email:e,newPassword:s,otp:t}))(t,r,a);return e}catch(e){return s.rejectWithValue(e instanceof Error?e.message:"An unknown error occurred")}})),F=(0,d.zD)("auth/refreshToken",(async(e,s)=>{let{rejectWithValue:t}=s;try{const e=await(async()=>{const e=localStorage.getItem("refreshToken");if(!e)throw new Error("No refresh token available");return(await h.A.post(`${g}/refresh-token`,{refreshToken:e})).data.token})();return e}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),M=(0,d.Z0)({name:"auth",initialState:b,reducers:{logout:e=>{e.user=null,e.isAuthenticated=!1,localStorage.removeItem("token")},setOtpStep:(e,s)=>{e.otpStep=s.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(v.pending,(e=>{e.loading=!0,e.error=null})).addCase(v.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticated=!0,e.user={id:s.payload.user.id,email:s.payload.user.email,name:s.payload.user.name,role:s.payload.user.role,profileImage:s.payload.user.profileImage,appliedJobs:s.payload.user.appliedJobs,bio:s.payload.user.bio},localStorage.setItem("token",s.payload.token)})).addCase(v.rejected,((e,s)=>{e.loading=!1,console.log(s.payload),e.error=s.payload})).addCase(N.pending,(e=>{e.loading=!0,e.error=null})).addCase(N.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticated=!0,e.user={id:s.payload.user.id,email:s.payload.user.email,name:s.payload.user.name,role:s.payload.user.role,profileImage:s.payload.user.profileImage,appliedJobs:s.payload.user.appliedJobs},localStorage.setItem("token",s.payload.token)})).addCase(N.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(w.pending,(e=>{e.loading=!0,e.error=null,e.otpStep=!0})).addCase(w.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticated=!1,e.user=s.payload})).addCase(w.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(C.pending,(e=>{e.loading=!0,e.error=null})).addCase(C.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticated=!0,localStorage.setItem("token",s.payload.token),e.user={id:s.payload.user.id,email:s.payload.user.email,name:s.payload.user.name,role:s.payload.user.role,profileImage:s.payload.user.profileImage,appliedJobs:s.payload.user.appliedJobs}})).addCase(C.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(y.pending,(e=>{e.loading=!0,e.error=null})).addCase(y.fulfilled,((e,s)=>{e.loading=!1,e.user=s.payload})).addCase(y.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(k.fulfilled,((e,s)=>{e.loading=!1,e.user={...e.user,...s.payload}})).addCase(k.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(S.fulfilled,((e,s)=>{e.user&&(e.user.projects=s.payload)})).addCase(S.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(A.fulfilled,((e,s)=>{e.loading=!1,e.user&&(e.user.certificates=s.payload)})).addCase(A.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(P.fulfilled,((e,s)=>{e.loading=!1,e.user&&(e.user=s.payload)})).addCase(P.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(I.fulfilled,((e,s)=>{e.loading=!1,e.user&&(e.user.resume=s.payload)})).addCase(I.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(R.pending,(e=>{e.jobPosts.loading=!0,e.jobPosts.error=null})).addCase(R.fulfilled,((e,s)=>{e.jobPosts.loading=!1,e.jobPosts.posts=s.payload.jobPosts,e.jobPosts.currentPage=s.payload.currentPage,e.jobPosts.totalPages=s.payload.totalPages,e.jobPosts.totalCount=s.payload.totalCount})).addCase(R.rejected,((e,s)=>{e.jobPosts.loading=!1,e.jobPosts.error=s.payload})).addCase(E.pending,(e=>{e.loading=!0,e.error=null})).addCase(E.fulfilled,((e,s)=>{e.loading=!1,e.user&&(e.user.appliedJobs=[...e.user.appliedJobs||[],s.payload])})).addCase(E.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(D.pending,(e=>{e.loading=!0,e.error=null})).addCase(D.fulfilled,((e,s)=>{e.loading=!1})).addCase(D.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(z.pending,(e=>{e.loading=!0,e.error=null})).addCase(z.fulfilled,((e,s)=>{e.loading=!1})).addCase(z.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(O.pending,(e=>{e.loading=!0,e.error=null})).addCase(O.fulfilled,(e=>{e.loading=!1})).addCase(O.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(T.pending,(e=>{e.loading=!0,e.error=null})).addCase(T.fulfilled,(e=>{e.loading=!1})).addCase(T.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase($.pending,(e=>{e.loading=!0,e.error=null})).addCase($.fulfilled,(e=>{e.loading=!1})).addCase($.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(F.fulfilled,((e,s)=>{e.isAuthenticated=!0,e.user=s.payload.user,localStorage.setItem("token",s.payload.token)}))}}),{logout:U,setOtpStep:q,clearError:L}=M.actions,_=M.reducer,V=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=localStorage.getItem("adminToken"),a={"Content-Type":"application/json"};r&&(a.Authorization=`Bearer ${r}`),r||console.error("no token");try{return(await(0,h.A)({method:e,url:`http://localhost:5000/admin${s}`,data:t,headers:a})).data}catch(e){if(!h.A.isAxiosError(e))throw console.error("Unknown error:",e),new Error("An unknown error occurred");if(e.response){if(401===e.response.status)throw sr.dispatch(te()),new Error("Authentication failed. Please log in again.");throw console.error("API Error:",e.response.data.error||"Unknown error from API"),new Error(e.response.data.error||"Server Error")}if(e.request)throw console.error("No response received from API:",e.request),new Error("No response from the server")}},W={isAuthenticatedAdmin:!1,loading:!1,error:null,dashboardData:null,recruiters:[],users:[],token:localStorage.getItem("adminToken"),email:"",name:"",role:""},B=(0,d.zD)("admin/login",(async(e,s)=>{let{email:t,password:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>V("POST","/login",{email:e,password:s}))(t,r);return localStorage.setItem("adminToken",e.token),e}catch(e){return a(e.message||"Login failed")}})),J=(0,d.zD)("admin/logout",(async(e,s)=>{let{dispatch:t}=s;localStorage.removeItem("adminToken")})),Z=(0,d.zD)("admin/fetchRecruiters",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async()=>V("GET","/recruiters"))()}catch(e){return t(e.message||"Failed to fetch recruiters")}})),G=(0,d.zD)("admin/approveRecruiter",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>V("PATCH",`/recruiters/${e}/approve`))(e);return s}catch(e){return t(e.message||"Failed to approve recruiter")}})),H=(0,d.zD)("admin/fetchUsers",(async(e,s)=>{let{rejectWithValue:t}=s;try{const e=await(async()=>V("GET","/users"))();return console.log("fetchusers",e),e}catch(e){return t(e.message||"Failed to fetch users")}})),Y=(0,d.zD)("admin/blockUser",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>V("PATCH",`/users/${e}/block`))(e);return console.log(s),s.id}catch(e){return t(e.message||"Failed to block user")}})),K=(0,d.zD)("admin/unblockUser",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>V("PATCH",`/users/${e}/unblock`))(e),e}catch(e){return t(e.message||"Failed to unblock user")}})),X=(0,d.zD)("admin/fetchDashboardData",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async()=>V("GET","/dashboard"))()}catch(e){return t(e.message||"Failed to fetch dashboard data")}})),Q=((0,d.zD)("admin/initializeState",(async(e,s)=>{let{dispatch:t}=s;const r=localStorage.getItem("adminToken");r&&t(B.fulfilled({token:r},"",{email:"",password:""}))})),(0,d.zD)("admin/refreshAdminToken",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async()=>V("POST","/refresh-token"))()}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}}))),ee=(0,d.Z0)({name:"admin",initialState:W,reducers:{clearError:e=>{e.error=null},setLogoutAdmin:e=>{e.isAuthenticatedAdmin=!1,e.token=null,e.dashboardData=null}},extraReducers:e=>{e.addCase(B.pending,(e=>{e.loading=!0})).addCase(B.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticatedAdmin=!0,e.token=s.payload.token,e.name=s.payload.user.name,e.email=s.payload.user.email,e.role=s.payload.user.role,e.error=null})).addCase(B.rejected,((e,s)=>{e.loading=!1,e.isAuthenticatedAdmin=!1,e.error=s.payload||"Login failed"})).addCase(J.fulfilled,(e=>{e.isAuthenticatedAdmin=!1,e.token=null,e.dashboardData=null})).addCase(Z.pending,(e=>{e.loading=!0})).addCase(Z.fulfilled,((e,s)=>{e.loading=!1,e.recruiters=s.payload,e.error=null})).addCase(Z.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch recruiters"})).addCase(H.pending,(e=>{e.loading=!0})).addCase(H.fulfilled,((e,s)=>{e.loading=!1,e.users=s.payload,e.error=null})).addCase(H.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch users"})).addCase(Y.fulfilled,((e,s)=>{const t=e.users.find((e=>e.id===s.payload));t&&(console.log(" in block",t),t.isBlocked=!0)})).addCase(K.fulfilled,((e,s)=>{const t=e.users.find((e=>e.id===s.payload));t&&(t.isBlocked=!1)})).addCase(G.pending,(e=>{e.loading=!0})).addCase(G.fulfilled,((e,s)=>{e.loading=!1,e.error=null})).addCase(G.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to approve recruiter"})).addCase(X.pending,(e=>{e.loading=!0})).addCase(X.fulfilled,((e,s)=>{e.loading=!1,e.dashboardData=s.payload,e.error=null})).addCase(X.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch dashboard data"})).addCase(Q.fulfilled,((e,s)=>{e.isAuthenticatedAdmin=!0,e.token=s.payload.token}))}}),{clearError:se,setLogoutAdmin:te}=ee.actions,re=ee.reducer,ae=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=localStorage.getItem("token"),a={};r&&(a.Authorization=`Bearer ${r}`);try{return(await(0,h.A)({method:e,url:`http://localhost:5000/recruiter${s}`,data:t,headers:a})).data}catch(e){if(h.A.isAxiosError(e)){if(e.response){if(401===e.response.status)throw sr.dispatch(ge()),new Error("Authentication failed. Please log in again.");throw console.error("API Error:",e.response.data),new Error(e.response.data.error||"Server Error")}if(e.request)throw console.error("No response received:",e.request),new Error("No response from the server")}throw console.error("Unexpected error:",e),new Error("An unknown error occurred")}},le=async e=>ae("POST","/send-otp",{email:e}),ne={recruiter:null,isAuthenticatedRecruiter:!1,isApproved:!1,loading:!1,error:null,otpStep:!1,profile:null,subscribed:!1,planDuration:null,expiryDate:null},ie=(0,d.zD)("recruiter/register",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>ae("POST","/register",e))(e)}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),oe=(0,d.zD)("recruiter/login",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>ae("POST","/login",e))(e);return s}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),ce=(0,d.zD)("recruiter/verifyOtp",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>ae("POST","/verify-otp",e))(e)}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),de=(0,d.zD)("recruiter/sendOtp",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await le(e)}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),ue=(0,d.zD)("recruiter/fetchProfile",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>ae("GET",`/profile/${e}`))(e)}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),me=(0,d.zD)("recruiter/updateProfile",(async(e,s)=>{let{recruiterId:t,profileData:r}=e,{rejectWithValue:a}=s;try{return await(async(e,s)=>ae("PUT",`/update-profile/${e}`,s))(t,r)}catch(e){return a(e instanceof Error?e.message:"An unknown error occurred")}})),pe=(0,d.zD)("recruiter/updateSubscription",(async(e,s)=>{let{rejectWithValue:t}=s;try{return e}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),xe=(0,d.zD)("recruiter/refreshRecruiterToken",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async()=>ae("POST","/refresh-token"))()}catch(e){return t(e instanceof Error?e.message:"An unknown error occurred")}})),he=(0,d.Z0)({name:"recruiter",initialState:ne,reducers:{logout:e=>{Object.assign(e,ne),localStorage.removeItem("recruiterToken"),localStorage.removeItem("recruiterState")},setOtpStep:(e,s)=>{e.otpStep=s.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(u.r2,((e,s)=>s.payload&&"recruiter"===s.key?{...e,...s.payload,isAuthenticatedRecruiter:!!localStorage.getItem("recruiterToken")}:e)).addCase(ie.pending,(e=>{e.loading=!0,e.error=null})).addCase(ie.fulfilled,((e,s)=>{e.loading=!1,e.recruiter=s.payload,e.otpStep=!0})).addCase(ie.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(oe.pending,(e=>{e.loading=!0,e.error=null})).addCase(oe.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticatedRecruiter=!0,e.recruiter=s.payload.recruiter,e.isApproved=s.payload.recruiter.isApproved})).addCase(oe.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(ce.pending,(e=>{e.loading=!0,e.error=null})).addCase(ce.fulfilled,((e,s)=>{e.loading=!1,e.isAuthenticatedRecruiter=!0,e.isApproved=s.payload.isApproved,localStorage.setItem("recruiterToken",s.payload.token)})).addCase(ce.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(de.pending,(e=>{e.loading=!0,e.error=null})).addCase(de.fulfilled,(e=>{e.loading=!1})).addCase(de.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(ue.pending,(e=>{e.loading=!0,e.error=null})).addCase(ue.fulfilled,((e,s)=>{e.loading=!1,e.profile=s.payload})).addCase(ue.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(me.pending,(e=>{e.loading=!0,e.error=null})).addCase(me.fulfilled,((e,s)=>{e.loading=!1,e.profile=s.payload})).addCase(me.rejected,((e,s)=>{e.loading=!1,e.error=s.payload})).addCase(pe.fulfilled,((e,s)=>{e.subscribed=s.payload.subscribed,e.planDuration=s.payload.planDuration,e.expiryDate=s.payload.expiryDate,e.recruiter&&(e.recruiter={...e.recruiter,subscribed:s.payload.subscribed,planDuration:s.payload.planDuration,expiryDate:s.payload.expiryDate})})).addCase(xe.fulfilled,((e,s)=>{e.isAuthenticatedRecruiter=!0,e.recruiter=s.payload.recruiter,localStorage.setItem("recruiterToken",s.payload.token)}))}}),{logout:ge,setOtpStep:fe,clearError:je}=he.actions,be=he.reducer,ye=e=>e.recruiter,ve=(0,d.zD)("jobPosts/fetchJobPosts",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>{if(!e)throw new Error("Recruiter ID is required to fetch job posts");try{return await ae("GET",`/recruiters/${e}/job-posts`)}catch(e){throw console.error("Error fetching job posts:",e),e}})(e);return s}catch(e){return t(e instanceof Error?e.message:"Failed to fetch job posts")}})),Ne=(0,d.zD)("jobPosts/createJobPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>{const{recruiterId:s,postData:t}=e;return ae("POST",`/create-jobpost/${s}`,t)})(e);return s}catch(e){return t(e instanceof Error?e.message:"Failed to create job post")}})),we=(0,d.zD)("jobPosts/updateJobPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>{if(!e.id)throw new Error("Job post ID is required to update the job post");try{return await ae("PUT",`/update-jobpost/${e.id}`,e.postData)}catch(e){throw console.error("Error updating job post:",e),e}})(e);return s}catch(e){return console.error("Error in updateJobPost thunk:",e),t(e instanceof Error?e:"Failed to update job post")}})),Ce=(0,d.zD)("jobPosts/deleteJobPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>{if(!e)throw new Error("Job post ID is required to delete the job post");return ae("DELETE",`/jobpost-delete/${e}`)})(e),e}catch(e){return t(e instanceof Error?e:"Failed to delete job post")}})),ke=(0,d.zD)("jobPosts/fetchJobDetails",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>ae("GET",`/job-details/${e}`))(e);return s}catch(e){return t(e instanceof Error?e.message:"Failed to fetch job details")}})),Se=(0,d.zD)("jobPosts/fetchAllJobPosts",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async()=>{try{return await ae("GET","/all-job-posts")}catch(e){throw console.error("Error fetching all job posts:",e),e}})()}catch(e){return t(e instanceof Error?e.message:"Failed to fetch all job posts")}})),Ae=(0,d.Z0)({name:"jobPosts",initialState:{posts:[],loading:!1,error:null,totalPages:0,totalCount:0,currentPage:1,selectedPost:null},reducers:{},extraReducers:e=>{e.addCase(ve.pending,(e=>{e.loading=!0,e.error=null})).addCase(ve.fulfilled,((e,s)=>{e.loading=!1,e.posts=s.payload})).addCase(ve.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch job posts"})).addCase(Ne.pending,(e=>{e.error=null})).addCase(Ne.fulfilled,((e,s)=>{e.posts.push(s.payload)})).addCase(Ne.rejected,((e,s)=>{e.error=s.payload||"Failed to create job post"})).addCase(we.pending,(e=>{e.error=null})).addCase(we.fulfilled,((e,s)=>{const t=e.posts.findIndex((e=>e._id===s.payload._id));-1!==t&&(e.posts[t]=s.payload)})).addCase(we.rejected,((e,s)=>{console.error("Update rejected:",s.payload),e.error=s.payload||"Failed to update job post"})).addCase(Ce.pending,(e=>{e.error=null})).addCase(Ce.fulfilled,((e,s)=>{e.posts=e.posts.filter((e=>e._id!==s.payload))})).addCase(Ce.rejected,((e,s)=>{e.error=s.payload||"Failed to delete job post"})).addCase(ke.pending,(e=>{e.loading=!0,e.error=null})).addCase(ke.fulfilled,((e,s)=>{e.loading=!1,e.selectedPost=s.payload})).addCase(ke.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch job details"})).addCase(Se.pending,(e=>{e.loading=!0,e.error=null})).addCase(Se.fulfilled,((e,s)=>{e.loading=!1,e.posts=s.payload})).addCase(Se.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch all job posts"}))}}).reducer,Pe=(0,d.zD)("contestants/fetchForJob",(async(e,s)=>{let{jobId:t,page:r=1}=e,{rejectWithValue:a}=s;try{const e=await async function(e){return ae("GET",`/job-applicants/${e}?page=${arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}`)}(t,r);return console.log(e),e}catch(e){return a({message:e.message||"Failed to fetch applicants"})}})),Ie=(0,d.zD)("contestants/fetchDetails",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>ae("GET",`/applicants/${e}`))(e);return console.log(s),s}catch(e){return t({message:e.message||"Failed to fetch user details"})}})),Re=(0,d.zD)("contestants/fetchFilteredContestantsForJob",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>await ae("GET",`/filtered-applicants/${e}`))(e);console.log("Filtered Response:",s);const t={applicants:Array.isArray(s)?s.map((e=>({...e,matchPercentage:e.matchPercentage||0}))):[{...s,matchPercentage:s.matchPercentage||0}],totalPages:s.totalPages||1,currentPage:s.currentPage||1};return console.log("Processed Filtered Response:",t),t}catch(e){return t({message:e instanceof Error?e.message:"Failed to fetch filtered contestants"})}})),Ee=(0,d.Z0)({name:"contestants",initialState:{contestants:[],filteredContestants:[],selectedContestant:null,loading:!1,error:null,totalPages:0,currentPage:1},reducers:{clearSelectedContestant:e=>{e.selectedContestant=null},clearContestants:e=>{e.contestants=[],e.totalPages=0,e.currentPage=1}},extraReducers:e=>{e.addCase(Pe.pending,(e=>{e.loading=!0,e.error=null})).addCase(Pe.fulfilled,((e,s)=>{e.loading=!1,e.contestants=s.payload.applicants,e.totalPages=s.payload.totalPages,e.currentPage=s.payload.currentPage})).addCase(Pe.rejected,((e,s)=>{var t;e.loading=!1,e.error=(null===(t=s.payload)||void 0===t?void 0:t.message)||"An error occurred"})).addCase(Ie.pending,(e=>{e.loading=!0,e.error=null})).addCase(Ie.fulfilled,((e,s)=>{e.loading=!1,e.selectedContestant=s.payload.user})).addCase(Ie.rejected,((e,s)=>{var t;e.loading=!1,e.error=(null===(t=s.payload)||void 0===t?void 0:t.message)||"An error occurred"})).addCase(Re.fulfilled,((e,s)=>{e.filteredContestants=s.payload.applicants,e.totalPages=s.payload.totalPages||1,e.currentPage=s.payload.currentPage||1,e.loading=!1}))}}),{clearSelectedContestant:De,clearContestants:ze}=Ee.actions,Oe=Ee.reducer,Te=(0,d.zD)("posts/fetchPosts",(async(e,s)=>{let{getState:t}=s;const{posts:r}=t(),a=await async function(e){return f("GET",`/posts?page=${e}&limit=${arguments.length>1&&void 0!==arguments[1]?arguments[1]:10}`)}(r.page);return Array.isArray(a)?a:a.posts})),$e=(0,d.zD)("posts/fetchPostsByUserId",(async e=>{let{userId:s,page:t,limit:r}=e;const a=await(async(e,s,t)=>{const r=await f("GET",`/posts/user/${e}?page=${s}&limit=${t}`);return{posts:Array.isArray(r.posts)?r.posts:[],totalPages:r.totalPages||1,currentPage:r.currentPage||s}})(s,t,r);return a})),Fe=(0,d.zD)("posts/createPost",(async e=>{let{postData:s,userId:t}=e;const r=await(async(e,s)=>{const t=new FormData;return e.content&&t.append("content",e.content),e.image instanceof File&&t.append("image",e.image,e.image.name),e.video instanceof File&&t.append("video",e.video,e.video.name),j("POST",`/posts/${s}`,t)})(s,t);return r})),Me=(0,d.zD)("posts/likePost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>await f("POST",`/posts/${e.postId}/like`,{userId:e.userId}))(e);return s}catch(e){return console.error("Error in likePost:",e),e instanceof Error?t(e.message):t("An unknown error occurred")}})),Ue=(0,d.zD)("posts/commentOnPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>await f("POST",`/posts/${e.postId}/comment`,{userId:e.userId,content:e.content,userName:e.userName,userProfileImage:e.userProfileImage}))(e);return s}catch(e){return e instanceof Error?t(e.message):t("An unknown error occurred")}})),qe=(0,d.zD)("posts/deletePost",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>f("DELETE",`/posts/delete/${e}`))(e),e}catch(e){return e instanceof Error?t(e.message):t("An unknown error occurred")}})),Le=(0,d.zD)("posts/editPost",(async e=>{let{postId:s,userId:t,postData:r}=e;const a=await(async(e,s,t)=>{const r=new FormData;return t.content&&r.append("content",t.content),t.image instanceof File&&r.append("image",t.image,t.image.name),t.video instanceof File&&r.append("video",t.video,t.video.name),j("PUT",`/posts/edit/${e}/${s}`,r)})(s,t,r);return a})),_e=(0,d.zD)("posts/dislikePost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>await f("POST",`/posts/${e.postId}/dislike`,{userId:e.userId}))(e);return s}catch(e){return e instanceof Error?t(e.message):t("An unknown error occurred")}})),Ve=(0,d.zD)("posts/deleteComment",(async(e,s)=>{let{postId:t,commentId:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>f("DELETE",`/posts/${e}/comments/${s}`))(t,r);return e}catch(e){return e instanceof Error?a(e.message):a("An unknown error occurred")}})),We=(0,d.Z0)({name:"posts",initialState:{list:[],userPosts:[],status:"idle",error:null,hasMore:!0,page:1,totalPages:1,currentPage:1},reducers:{resetPosts:e=>{e.list=[],e.page=1,e.hasMore=!0,e.status="idle",e.error=null}},extraReducers:e=>{e.addCase(Te.pending,(e=>{e.status="loading"})).addCase(Te.fulfilled,((e,s)=>{e.status="succeeded",e.list=Array.isArray(e.list)?[...e.list,...s.payload]:s.payload,e.hasMore=s.payload.length>0,e.page+=1})).addCase(Te.rejected,((e,s)=>{e.status="failed",e.error=s.error.message||null})).addCase($e.fulfilled,((e,s)=>{e.userPosts=Array.isArray(s.payload.posts)?s.payload.posts:[],e.totalPages=s.payload.totalPages,e.currentPage=s.payload.currentPage,e.status="succeeded",e.error=null})).addCase($e.rejected,((e,s)=>{e.status="failed",e.error=s.error.message||"Failed to fetch user posts"})).addCase(Fe.fulfilled,((e,s)=>{e.list=Array.isArray(e.list)?[s.payload,...e.list]:[s.payload],e.userPosts=Array.isArray(e.userPosts)?[s.payload,...e.userPosts]:[s.payload]})).addCase(Me.fulfilled,((e,s)=>{const t=s.payload,r=e.list.findIndex((e=>e._id===t._id));-1!==r&&(e.list[r]=t);const a=e.userPosts.findIndex((e=>e._id===t._id));-1!==a&&(e.userPosts[a]=t)})).addCase(Ue.fulfilled,((e,s)=>{const t=s.payload,r=e.list.findIndex((e=>e._id===t._id));-1!==r&&(e.list[r]=t);const a=e.userPosts.findIndex((e=>e._id===t._id));-1!==a&&(e.userPosts[a]=t)})).addCase(qe.fulfilled,((e,s)=>{e.list=e.list.filter((e=>e._id!==s.payload)),e.userPosts=e.userPosts.filter((e=>e._id!==s.payload))})).addCase(Le.fulfilled,((e,s)=>{const t=s.payload;if(Array.isArray(e.list)){const s=e.list.findIndex((e=>e._id===t._id));-1!==s&&(e.list[s]=t)}if(Array.isArray(e.userPosts)){const s=e.userPosts.findIndex((e=>e._id===t._id));-1!==s&&(e.userPosts[s]=t)}})).addCase(_e.fulfilled,((e,s)=>{const t=s.payload,r=e.list.findIndex((e=>e._id===t._id));-1!==r&&(e.list[r]=t);const a=e.userPosts.findIndex((e=>e._id===t._id));-1!==a&&(e.userPosts[a]=t)})).addCase(Ve.fulfilled,((e,s)=>{const t=s.payload,r=e.list.findIndex((e=>e._id===t._id));-1!==r&&(e.list[r]=t);const a=e.userPosts.findIndex((e=>e._id===t._id));-1!==a&&(e.userPosts[a]=t)}))}}),{resetPosts:Be}=We.actions,Je=We.reducer,Ze=(0,d.zD)("adminJobPost/fetchJobPosts",(async(e,s)=>{let{rejectWithValue:t}=s;try{const e=await(async()=>V("GET","/job-posts"))();return console.log("Fetched job posts:",e),e}catch(e){return t(e.message||"Failed to fetch job posts")}})),Ge=(0,d.zD)("adminJobPost/blockJobPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>V("PATCH",`/job-posts/${e}/block`))(e);return s}catch(e){return t(e.message||"Failed to block job post")}})),He=(0,d.zD)("adminJobPost/unblockJobPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>V("PATCH",`/job-posts/${e}/unblock`))(e);return s}catch(e){return t(e.message||"Failed to unblock job post")}})),Ye=(0,d.Z0)({name:"adminJobPost",initialState:{jobPosts:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Ze.pending,(e=>{e.loading=!0})).addCase(Ze.fulfilled,((e,s)=>{e.loading=!1,e.jobPosts=s.payload,e.error=null,console.log("Updated state job posts:",e.jobPosts)})).addCase(Ze.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch job posts"})).addCase(Ge.fulfilled,((e,s)=>{const t=e.jobPosts.findIndex((e=>e._id===s.payload._id));-1!==t&&(e.jobPosts[t]=s.payload)})).addCase(He.fulfilled,((e,s)=>{const t=e.jobPosts.findIndex((e=>e._id===s.payload._id));-1!==t&&(e.jobPosts[t]=s.payload)}))}}).reducer,Ke=(0,d.zD)("connections/fetchProfile",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/connections/profile/${e}`))(e);return{userId:e,profile:s}}catch(e){return e instanceof Error?t(e.message):t("Failed to fetch connection profile. Please try again later.")}})),Xe=(0,d.zD)("connections/fetchRecommendations",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/connections/recommendations/${e}`))(e);return s?(console.log("reccommmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm",s),s):t("Invalid response from server")}catch(e){return e instanceof Error?t(e.message):t("Failed to fetch recommendations. Please try again later.")}})),Qe=(0,d.zD)("connections/sendRequest",(async(e,s)=>{let{senderId:t,recipientId:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>f("POST","/connections/request",{senderId:e,recipientId:s}))(t,r);return e&&e.connection?e.connection:a("Invalid response from server")}catch(e){return e instanceof Error?a(e.message):a("Failed to send connection request. Please try again later.")}})),es=(0,d.zD)("connections/fetchRequests",(async(e,s)=>{let{getState:t,rejectWithValue:r}=s;try{const s=await(async e=>await f("GET",`/connections/requests/${e}`))(e);return console.log("Connection requests response:",s),s}catch(e){return e instanceof Error?r(e.message):r("Failed to fetch connection requests. Please try again later.")}})),ss=(0,d.zD)("connections/acceptRequest",(async(e,s)=>{let{requestId:t,userId:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>f("POST",`/connections/accept/${e}`,{userId:s}))(t,r);return console.log("accept response",e),e}catch(e){return e instanceof Error?a(e.message):a("Failed to accept connection request. Please try again later.")}})),ts=(0,d.zD)("connections/rejectRequest",(async(e,s)=>{let{requestId:t,userId:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>f("POST",`/connections/reject/${e}`,{userId:s}))(t,r);return e}catch(e){return e instanceof Error?a(e.message):a("Failed to reject connection request. Please try again later.")}})),rs=(0,d.zD)("connections/fetchConnections",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/connections/${e}`))(e);return console.log("respo connections",s),s}catch(e){return e instanceof Error?t(e.message):t("Failed to fetch connections. Please try again later.")}})),as=(0,d.zD)("connections/searchConnections",(async(e,s)=>{let{userId:t,query:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>f("GET",`/connections/${e}/search?query=${s}`))(t,r);return e}catch(e){return e instanceof Error?a(e.message):a("Failed to search connections. Please try again later.")}})),ls=(0,d.zD)("connections/searchConnections/message",(async e=>{const{userId:s,query:t}=e;let r=await(async(e,s)=>f("GET",`/connections/${e}/search?query=${s}`))(s,t);return console.log(r),r})),ns=(0,d.zD)("connections/removeConnection",(async(e,s)=>{let{userId:t,connectionId:r}=e,{rejectWithValue:a}=s;try{return await(async(e,s)=>f("DELETE",`/connections/${e}/remove/${s}`))(t,r),r}catch(e){return e instanceof Error?a(e.message):a("Failed to remove connection. Please try again later.")}})),is=(0,d.Z0)({name:"connections",initialState:{recommendations:[],connectionProfile:null,profilesConnection:{},connectionRequests:[],loading:!1,error:null,connections:[],lastFetchedAt:null,messageConnections:[],messageSearchResults:[]},reducers:{clearError:e=>{e.error=null},clearConnectionProfile:(e,s)=>{delete e.profilesConnection[s.payload]},clearAllConnectionProfiles:e=>{e.profilesConnection={}}},extraReducers:e=>{e.addCase(Xe.pending,(e=>{e.loading=!0,e.error=null})).addCase(Xe.fulfilled,((e,s)=>{e.loading=!1,e.recommendations=s.payload})).addCase(Xe.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch recommendations. Please try again."})).addCase(Qe.pending,(e=>{e.error=null})).addCase(Qe.fulfilled,((e,s)=>{if(s.payload&&s.payload.recipientId){const t=s.payload;e.recommendations=e.recommendations.map((e=>e.id===t.recipientId?{...e,connectionStatus:"pending"}:e))}else console.error("Invalid payload received in sendConnectionRequest.fulfilled:",s.payload)})).addCase(Qe.rejected,((e,s)=>{e.error=s.payload||"Failed to send connection request. Please try again."})).addCase(Ke.pending,(e=>{e.loading=!0,e.error=null})).addCase(Ke.fulfilled,((e,s)=>{e.loading=!1;const{userId:t,profile:r}=s.payload;e.profilesConnection[t]=r,e.connectionProfile&&e.connectionProfile.id===r.id||(e.connectionProfile=r)})).addCase(Ke.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch connection profile. Please try again."})).addCase(es.pending,(e=>{e.loading=!0,e.error=null})).addCase(es.fulfilled,((e,s)=>{e.loading=!1,null!==s.payload&&(e.connectionRequests=s.payload,console.log("state.connectionRequests",e.connectionRequests),e.lastFetchedAt=Date.now())})).addCase(es.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch connection requests. Please try again."})).addCase(ss.pending,(e=>{e.loading=!0,e.error=null})).addCase(ss.fulfilled,((e,s)=>{e.loading=!1,e.connectionRequests=e.connectionRequests.filter((e=>e._id!==s.payload._id))})).addCase(ss.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to accept connection request. Please try again."})).addCase(ts.pending,(e=>{e.loading=!0,e.error=null})).addCase(ts.fulfilled,((e,s)=>{e.loading=!1,e.connectionRequests=e.connectionRequests.filter((e=>e.id!==s.payload.requestId))})).addCase(ts.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to reject connection request. Please try again."})).addCase(rs.pending,(e=>{e.loading=!0,e.error=null})).addCase(rs.fulfilled,((e,s)=>{e.loading=!1,e.connections=s.payload.connections,e.connectionRequests=s.payload.connectionRequests})).addCase(rs.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch connections. Please try again."})).addCase(as.pending,(e=>{e.loading=!0,e.error=null})).addCase(as.fulfilled,((e,s)=>{e.loading=!1,e.connections=s.payload})).addCase(as.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to search connections. Please try again."})).addCase(ls.pending,(e=>{e.loading=!0,e.error=null})).addCase(ls.fulfilled,((e,s)=>{e.loading=!1,e.messageSearchResults=Array.isArray(s.payload)?s.payload:[]})).addCase(ls.rejected,((e,s)=>{e.loading=!1,e.error=s.error.message||"Failed to search connections"})).addCase(ns.pending,(e=>{e.loading=!0,e.error=null})).addCase(ns.fulfilled,((e,s)=>{var t;e.loading=!1,e.connections=(null===(t=e.connections)||void 0===t?void 0:t.filter((e=>e._id!==s.payload)))||[]})).addCase(ns.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to remove connection. Please try again."}))}}),{clearError:os,clearConnectionProfile:cs,clearAllConnectionProfiles:ds}=is.actions,us=is.reducer,ms=(0,d.zD)("notifications/fetch",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/notifications/${e}`))(e);if(!s||!Array.isArray(s))throw new Error("Invalid response format");return s}catch(e){return e instanceof Error?t(e.message):t("Failed to fetch notifications")}})),ps=(0,d.Z0)({name:"notifications",initialState:{items:[],unreadCount:0,loading:!1,error:null,lastFetchedAt:null,seenNotifications:[]},reducers:{addNotification:(e,s)=>{e.items.unshift(s.payload),e.unreadCount+=1},markAsRead:(e,s)=>{const t=e.items.find((e=>e._id===s.payload));t&&!t.isRead&&(t.isRead=!0,e.unreadCount=Math.max(0,e.unreadCount-1))},markAsSeen:(e,s)=>{e.seenNotifications.includes(s.payload)||(e.seenNotifications.push(s.payload),e.items=e.items.filter((e=>e._id!==s.payload)),e.unreadCount=e.items.filter((e=>!e.isRead)).length)},markAllAsRead:e=>{e.items.forEach((s=>{s.isRead||(s.isRead=!0,e.seenNotifications.includes(s._id)||e.seenNotifications.push(s._id))})),e.unreadCount=0},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(ms.pending,(e=>{e.loading=!0,e.error=null})).addCase(ms.fulfilled,((e,s)=>{e.loading=!1;const t=s.payload.filter((s=>!e.seenNotifications.includes(s._id)));e.items=t,e.unreadCount=t.filter((e=>!e.isRead)).length,e.lastFetchedAt=Date.now(),e.error=null})).addCase(ms.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"An unknown error occurred"}))}}),{addNotification:xs,markAsRead:hs,markAllAsRead:gs,clearError:fs,markAsSeen:js}=ps.actions,bs=ps.reducer,ys=(0,d.zD)("messages/fetchConnections",(async e=>{const s=await(async e=>f("GET",`/connections/message/${e}`))(e);return s})),vs=(0,d.zD)("messages/fetchConversation",(async e=>{let{userId1:s,userId2:t}=e;const r=await(async(e,s)=>f("GET",`/messages/${e}/${s}`))(s,t);return{conversationId:s<t?`${s}-${t}`:`${t}-${s}`,messages:r}})),Ns=(0,d.zD)("messages/markAsRead",(async e=>{let{messageIds:s}=e;return await Promise.all(s.map((e=>(async e=>f("PUT",`/messages/${e}/read`))(e)))),s})),ws=(0,d.zD)("messages/getUnreadCount",(async e=>{const s=await(async e=>f("GET",`/messages/unread/${e}`))(e);return s})),Cs=(0,d.Z0)({name:"useMessages",initialState:{connections:[],conversations:{},unreadCount:0,loading:!1,error:null,currentUserId:null},reducers:{resetUnreadCount:e=>{e.unreadCount=0},updateMessageStatus:(e,s)=>{const{messageId:t,status:r}=s.payload;Object.values(e.conversations).forEach((e=>{const s=e.find((e=>e.id===t));s&&(s.status=r)}))},addMessage:(e,s)=>{const{sender:t,recipient:r}=s.payload,a=t.id<r.id?`${t.id}-${r.id}`:`${r.id}-${t.id}`;if(e.conversations[a]||(e.conversations[a]=[]),!e.conversations[a].some((e=>e.id===s.payload.id))){e.conversations[a].push(s.payload);const l=e.connections.findIndex((s=>s.user.id===(t.id===e.currentUserId?r.id:t.id)));if(-1!==l){e.connections[l].lastMessage=s.payload;const[t]=e.connections.splice(l,1);e.connections.unshift(t)}}},setTypingStatus:(e,s)=>{const t=e.connections.findIndex((e=>e.user.id===s.payload.userId));var r;-1!==t&&(e.connections[t].isTyping=null!==(r=s.payload.isTyping)&&void 0!==r&&r)},setCurrentUserId:(e,s)=>{e.currentUserId=s.payload},updateUnreadCount:(e,s)=>{e.unreadCount=s.payload}},extraReducers:e=>{e.addCase(ys.pending,(e=>{e.loading=!0})).addCase(ys.fulfilled,((e,s)=>{e.loading=!1,e.connections=s.payload.map((e=>({...e,isTyping:!1})))})).addCase(ys.rejected,((e,s)=>{e.loading=!1,e.error=s.error.message||"Failed to fetch message connections"})).addCase(vs.fulfilled,((e,s)=>{const{conversationId:t,messages:r}=s.payload;e.conversations[t]=r})).addCase(Ns.fulfilled,((e,s)=>{const t=s.payload;Object.values(e.conversations).forEach((e=>{e.forEach((e=>{t.includes(e.id)&&(e.isRead=!0)}))}))})).addCase(ws.fulfilled,((e,s)=>{e.unreadCount=s.payload}))}}),{resetUnreadCount:ks,updateMessageStatus:Ss,addMessage:As,setTypingStatus:Ps,setCurrentUserId:Is,updateUnreadCount:Rs}=Cs.actions,Es=Cs.reducer,Ds=(0,d.zD)("messages/fetchConversations",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>ae("GET",`/conversations/${e}`))(e);return s.data}catch(e){var r;return t((null===(r=e.response)||void 0===r?void 0:r.data)||"An error occurred")}})),zs=(0,d.zD)("messages/fetchMessages",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>{const s=await ae("GET",`/conversations/${e}/messages`);return{data:Array.isArray(s.data)?s.data:s}})(e);return{conversationId:e,messages:s.data}}catch(e){var r;return t((null===(r=e.response)||void 0===r?void 0:r.data)||"An error occurred")}})),Os=(0,d.zD)("messages/sendMessage",(async(e,s)=>{let{conversationId:t,content:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>{try{const t=await ae("POST",`/conversations/${e}/messages`,{content:s});if(t&&"object"==typeof t&&"id"in t)return t;if(t&&"object"==typeof t&&"data"in t&&"object"==typeof t.data&&"id"in t.data)return t.data;throw console.error("Invalid response structure from sendMessageApi:",t),new Error("Invalid response structure from server")}catch(e){throw console.error("Error in sendMessageApi:",e),e}})(t,r);if(!e||"object"!=typeof e||!("id"in e))throw new Error("Invalid message structure received from API");return{conversationId:t,message:e}}catch(e){return console.error("Error in sendMessage thunk:",e),a(e.message||"An error occurred")}})),Ts=(0,d.Z0)({name:"RecruiterMessages",initialState:{RecruiterConversations:[],RecruiterMessages:{},typingStatus:{},onlineStatus:{},recruiterLoading:!1,recruiterError:null,currentRecruiterId:null,messageSending:!1},reducers:{addRecruiterMessage:(e,s)=>{const{conversationId:t,id:r}=s.payload;e.RecruiterMessages[t]||(e.RecruiterMessages[t]=[]),e.RecruiterMessages[t].some((e=>e.id===r))||e.RecruiterMessages[t].push(s.payload);const a=e.RecruiterConversations.find((e=>e.id===t));a&&s.payload.senderId!==e.currentRecruiterId&&(a.unreadCount=(a.unreadCount||0)+1)},setRecruiterTypingStatus:(e,s)=>{const{userId:t,conversationId:r,isTyping:a}=s.payload;e.typingStatus[r]||(e.typingStatus[r]={}),e.typingStatus[r][t]=a},markRecruiterMessageAsRead:(e,s)=>{var t;const{messageId:r,conversationId:a}=s.payload,l=e.RecruiterConversations.find((e=>e.id===a));l&&(l.lastMessageRead=!0,l.unreadCount=0);const n=null===(t=e.RecruiterMessages[a])||void 0===t?void 0:t.find((e=>e.id===r));n&&(n.isRead=!0,n.locallyRead=!0)},setRecruiterOnlineStatus:(e,s)=>{const{userId:t,online:r}=s.payload;e.onlineStatus[t]=r},updateRecruiterConversation:(e,s)=>{const t=e.RecruiterConversations.findIndex((e=>e.id===s.payload.id));-1!==t&&(e.RecruiterConversations[t]={...e.RecruiterConversations[t],...s.payload})},addNewRecruiterConversation:(e,s)=>{e.RecruiterConversations.push(s.payload)},markAllMessagesAsLocallyRead:(e,s)=>{const t=s.payload;e.RecruiterMessages[t]&&(e.RecruiterMessages[t]=e.RecruiterMessages[t].map((e=>({...e,locallyRead:!0}))));const r=e.RecruiterConversations.find((e=>e.id===t));r&&(r.unreadCount=0)},setCurrentRecruiterId:(e,s)=>{e.currentRecruiterId=s.payload},setMessageSending:(e,s)=>{e.messageSending=s.payload}},extraReducers:e=>{e.addCase(Ds.pending,(e=>{e.recruiterLoading=!0,e.recruiterError=null})).addCase(Ds.fulfilled,((e,s)=>{e.recruiterLoading=!1,e.RecruiterConversations=s.payload})).addCase(Ds.rejected,((e,s)=>{e.recruiterLoading=!1,e.recruiterError=s.payload||"An error occurred"})).addCase(zs.pending,(e=>{e.recruiterLoading=!0,e.recruiterError=null})).addCase(zs.fulfilled,((e,s)=>{e.recruiterLoading=!1,e.RecruiterMessages[s.payload.conversationId]=s.payload.messages||[]})).addCase(zs.rejected,((e,s)=>{e.recruiterLoading=!1,e.recruiterError=s.payload||"An error occurred"})).addCase(Os.pending,(e=>{e.recruiterLoading=!0,e.recruiterError=null})).addCase(Os.fulfilled,((e,s)=>{e.recruiterLoading=!1;const{conversationId:t,message:r}=s.payload;e.RecruiterMessages[t]||(e.RecruiterMessages[t]=[]),e.RecruiterMessages[t].some((e=>e.id===r.id))||(e.RecruiterMessages[t]=[...e.RecruiterMessages[t],r]);const a=e.RecruiterConversations.findIndex((e=>e.id===t));-1!==a&&(e.RecruiterConversations=e.RecruiterConversations.map(((e,s)=>s===a?{...e,lastMessage:r.content,lastMessageTimestamp:r.timestamp}:e)))})).addCase(Os.rejected,((e,s)=>{e.recruiterLoading=!1,e.recruiterError=s.payload||"An error occurred"}))}}),{addRecruiterMessage:$s,setRecruiterTypingStatus:Fs,markRecruiterMessageAsRead:Ms,markAllMessagesAsLocallyRead:Us,setRecruiterOnlineStatus:qs,updateRecruiterConversation:Ls,addNewRecruiterConversation:_s,setCurrentRecruiterId:Vs,setMessageSending:Ws}=Ts.actions,Bs=Ts.reducer,Js=(0,d.zD)("userRecruiterMessages/fetchConversations",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/user-conversations/${e}`))(e);return s}catch(e){var r;return t((null===(r=e.response)||void 0===r?void 0:r.data)||"An error occurred")}})),Zs=(0,d.zD)("userRecruiterMessages/fetchMessages",(async(e,s)=>{let{rejectWithValue:t}=s;try{const s=await(async e=>f("GET",`/user-messages/${e}`))(e);return{conversationId:e,messages:s}}catch(e){var r;return t((null===(r=e.response)||void 0===r?void 0:r.data)||"An error occurred")}})),Gs=(0,d.zD)("userRecruiterMessages/sendMessage",(async(e,s)=>{let{conversationId:t,content:r,senderId:a}=e,{rejectWithValue:l}=s;try{const e=await(async(e,s,t)=>f("POST",`/user-messages/${e}`,{content:s,senderId:t}))(t,r,a);return{conversationId:t,message:e}}catch(e){return l(e.message||"An error occurred")}})),Hs=(0,d.Z0)({name:"userRecruiterMessages",initialState:{conversations:[],messages:{},typingStatus:{},loading:!1,error:null,onlineStatus:{},currentUserId:"",totalUnreadCount:0,messageSending:!1},reducers:{addUserRecruiterMessage:(e,s)=>{const{conversationId:t,id:r}=s.payload;e.messages[t]||(e.messages[t]=[]),e.messages[t].some((e=>e.id===r))||e.messages[t].push(s.payload);const a=e.conversations.find((e=>e.id===t));a&&s.payload.senderId!==e.currentUserId&&(a.unreadCount=(a.unreadCount||0)+1)},setUserRecruiterTypingStatus:(e,s)=>{const{userId:t,conversationId:r,isTyping:a}=s.payload;e.typingStatus[r]||(e.typingStatus[r]={}),t!==e.currentUserId&&(e.typingStatus[r][t]=a)},markUserRecruiterMessageAsRead:(e,s)=>{var t;const{messageId:r,conversationId:a}=s.payload,l=e.conversations.find((e=>e.id===a));l&&(l.lastMessageRead=!0,l.unreadCount=0);const n=null===(t=e.messages[a])||void 0===t?void 0:t.find((e=>e.id===r));n&&(n.isRead=!0,n.locallyRead=!0)},setUserOnlineStatus:(e,s)=>{const{userId:t,online:r}=s.payload;e.onlineStatus[t]=r},updateConversation:(e,s)=>{const t=e.conversations.findIndex((e=>e.id===s.payload.id));-1!==t&&(e.conversations[t]={...e.conversations[t],...s.payload})},addNewConversation:(e,s)=>{e.conversations.push(s.payload)},incrementUnreadCount:(e,s)=>{const t=e.conversations.find((e=>e.id===s.payload));t&&(t.unreadCount+=1)},markAllMessagesAsLocallyRead:(e,s)=>{const t=s.payload;e.messages[t]&&(e.messages[t]=e.messages[t].map((e=>({...e,locallyRead:!0}))));const r=e.conversations.find((e=>e.id===t));r&&(r.unreadCount=0)},updateTotalUnreadCount:e=>{e.totalUnreadCount=e.conversations.reduce(((e,s)=>e+(s.unreadCount||0)),0)},setMessageSending:(e,s)=>{e.messageSending=s.payload}},extraReducers:e=>{e.addCase(Js.pending,(e=>{e.loading=!0,e.error=null})).addCase(Js.fulfilled,((e,s)=>{e.loading=!1,e.conversations=s.payload})).addCase(Js.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"An error occurred"})).addCase(Zs.pending,(e=>{e.loading=!0,e.error=null})).addCase(Zs.fulfilled,((e,s)=>{e.loading=!1,e.messages[s.payload.conversationId]=s.payload.messages})).addCase(Zs.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"An error occurred"})).addCase(Gs.pending,(e=>{e.loading=!0,e.error=null})).addCase(Gs.fulfilled,((e,s)=>{e.loading=!1;const{conversationId:t,message:r}=s.payload;e.messages[t]||(e.messages[t]=[]),e.messages[t].push(r);const a=e.conversations.findIndex((e=>e.id===t));-1!==a&&(e.conversations[a]={...e.conversations[a],lastMessage:r.content,lastMessageTimestamp:r.timestamp})})).addCase(Gs.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"An error occurred"}))}}),{addUserRecruiterMessage:Ys,setUserRecruiterTypingStatus:Ks,markUserRecruiterMessageAsRead:Xs,markAllMessagesAsLocallyRead:Qs,setUserOnlineStatus:et,updateConversation:st,addNewConversation:tt,incrementUnreadCount:rt,updateTotalUnreadCount:at,setMessageSending:lt}=Hs.actions,nt=Hs.reducer,it=(0,d.zD)("subscriptions/fetchSubscriptions",(async(e,s)=>{let{page:t,limit:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>{const t=await V("GET",`/subscriptions?page=${e}&limit=${s}`);return{subscriptions:t.subscriptions,totalPages:t.totalPages,currentPage:t.currentPage}})(t,r);return e}catch(e){return a(e.message||"Failed to fetch subscriptions")}})),ot=(0,d.zD)("subscriptions/cancelSubscription",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>V("POST",`/subscriptions/${e}/cancel`))(e),e}catch(e){return t(e.message||"Failed to cancel subscription")}})),ct=(0,d.Z0)({name:"subscriptions",initialState:{subscriptions:[],loading:!1,error:null,totalPages:1,currentPage:1},reducers:{},extraReducers:e=>{e.addCase(it.pending,(e=>{e.loading=!0})).addCase(it.fulfilled,((e,s)=>{e.loading=!1,e.subscriptions=s.payload.subscriptions,e.totalPages=s.payload.totalPages,e.currentPage=s.payload.currentPage,e.error=null})).addCase(it.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch subscriptions"})).addCase(ot.fulfilled,((e,s)=>{e.subscriptions=e.subscriptions.filter((e=>e.id!==s.payload))}))}}).reducer,dt=(0,d.zD)("userPosts/fetchUserPosts",(async(e,s)=>{let{page:t,limit:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>{const t=await V("GET",`/user-posts?page=${e}&limit=${s}`);return{userPosts:t.userPosts,totalPages:t.totalPages,currentPage:t.currentPage}})(t,r);return e}catch(e){return a(e.message||"Failed to fetch user posts")}})),ut=(0,d.zD)("userPosts/blockUserPost",(async(e,s)=>{let{rejectWithValue:t}=s;try{return await(async e=>V("POST",`/user-posts/${e}/toggle-block`))(e),e}catch(e){return t(e.message||"Failed to block user post")}})),mt=(0,d.Z0)({name:"userPosts",initialState:{userPosts:[],loading:!1,error:null,totalPages:1,currentPage:1},reducers:{},extraReducers:e=>{e.addCase(dt.pending,(e=>{e.loading=!0})).addCase(dt.fulfilled,((e,s)=>{e.loading=!1,e.userPosts=s.payload.userPosts,e.totalPages=s.payload.totalPages,e.currentPage=s.payload.currentPage,e.error=null})).addCase(dt.rejected,((e,s)=>{e.loading=!1,e.error=s.payload||"Failed to fetch user posts"})).addCase(ut.fulfilled,((e,s)=>{const t=e.userPosts.find((e=>e.id===s.payload));t&&(t.isBlocked=!t.isBlocked)}))}}).reducer,pt=(0,d.zD)("userSearch/searchUsersAndJobs",(async(e,s)=>{let{query:t,userId:r}=e,{rejectWithValue:a}=s;try{const e=await(async(e,s)=>f("GET",`/search?query=${encodeURIComponent(e)}&userId=${s}`))(t,r);return e}catch(e){return a(e.message)}})),xt=(0,d.Z0)({name:"userSearch",initialState:{users:[],jobPosts:[],loading:!1,error:null},reducers:{clearSearch:e=>{e.users=[],e.jobPosts=[],e.error=null}},extraReducers:e=>{e.addCase(pt.pending,(e=>{e.loading=!0,e.error=null})).addCase(pt.fulfilled,((e,s)=>{e.loading=!1,e.users=s.payload.users,e.jobPosts=s.payload.jobPosts})).addCase(pt.rejected,((e,s)=>{e.loading=!1,e.error=s.payload}))}}),{clearSearch:ht}=xt.actions,gt=xt.reducer,ft=(0,d.zD)("recruiterSearch/searchUsersAndJobs",(async(e,s)=>{let{query:t,userId:r}=e,{rejectWithValue:a}=s;try{const e=await(async e=>await ae("GET",`/search-users?query=${e}`))(t);return e}catch(e){return a(e.message||"An error occurred during the search")}})),jt=(0,d.Z0)({name:"recruiterSearch",initialState:{users:[],loading:!1,error:null},reducers:{clearSearch:e=>{e.users=[],e.error=null}},extraReducers:e=>{e.addCase(ft.pending,(e=>{e.loading=!0,e.error=null})).addCase(ft.fulfilled,((e,s)=>{e.loading=!1,e.users=s.payload})).addCase(ft.rejected,((e,s)=>{e.loading=!1,e.error=s.payload}))}}),{clearSearch:bt}=jt.actions,yt=jt.reducer,vt=(0,d.Z0)({name:"resume",initialState:{resumeData:null,generatedResumeLink:null,loading:!1,error:null},reducers:{setResumeData:(e,s)=>{e.resumeData=s.payload},generateResumeStart:e=>{e.loading=!0,e.error=null},generateResumeSuccess:(e,s)=>{e.loading=!1,e.generatedResumeLink=s.payload},generateResumeFailure:(e,s)=>{e.loading=!1,e.error=s.payload},clearResumeData:e=>{e.resumeData=null,e.generatedResumeLink=null,e.error=null}}}),{setResumeData:Nt,generateResumeStart:wt,generateResumeSuccess:Ct,generateResumeFailure:kt,clearResumeData:St}=vt.actions,At=vt.reducer,Pt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000",REACT_APP_API_BASE_URL_ADMIN:"http://localhost:5000/admin",REACT_APP_API_BASE_URL_RECRUITER:"http://localhost:5000/recruiter",REACT_APP_GOOGLE_CLIENT_ID:"587543227296-kk63ntvfqatjedh690liis2rbfj2lags.apps.googleusercontent.com",REACT_APP_SOCKET_URL:"http://localhost:5000"}.REACT_APP_ENCRYPTION_KEY||"fallback-key",It=(0,u.l1)(((e,s)=>"auth"===s||"recruiter"===s?{encryptedState:p.AES.encrypt(JSON.stringify(e),Pt).toString()}:e),((e,s)=>{if(("auth"===s||"recruiter"===s)&&"object"==typeof e&&null!==e){const s=e.encryptedState;if("string"==typeof s){const e=p.AES.decrypt(s,Pt).toString(p.enc.Utf8);return JSON.parse(e)}}return e})),Rt={key:"auth",storage:m.A,whitelist:["isAuthenticated","user","loading","AuthState"],transforms:[It]},Et={key:"admin",storage:m.A,whitelist:["isAuthenticatedAdmin","dashboardData","users","loading","AdminState","name","email","role"]},Dt={key:"recruiter",storage:m.A,whitelist:["isAuthenticatedRecruiter","isApproved","recruiterState","loading","recruiter"],transforms:[It]},zt={key:"jobPosts",storage:m.A,whitelist:["posts","loading","selectedPost","JobPostState"]},Ot={key:"contestants",storage:m.A,whitelist:["selectedContestant","contestants","loading","ContestantState"]},Tt={key:"posts",storage:m.A,whitelist:["posts","loading","selectedPost"]},$t={key:"adminJobPost",storage:m.A,whitelist:["jobPosts","loading","error"]},Ft={key:"connections",storage:m.A,whitelist:["recommendations","pendingRequests","loading","error"]},Mt={key:"notifications",storage:m.A,whitelist:["items","unreadCount","seenNotifications"]},Ut={key:"UserMessages",storage:m.A,whitelist:["UserMessages","unreadCount"]},qt={key:"recruiterMessages",storage:m.A,whitelist:["RecruiterConversations","RecruiterMessages"]},Lt=(0,u.rL)(Rt,_),_t=(0,u.rL)(Et,re),Vt=(0,u.rL)(Dt,be),Wt=(0,u.rL)(zt,Ae),Bt=(0,u.rL)(Ot,Oe),Jt=(0,u.rL)(Tt,Je),Zt=(0,u.rL)($t,Ye),Gt=(0,u.rL)(Ft,us),Ht=(0,u.rL)(Mt,bs),Yt=(0,u.rL)(Ut,Es),Kt=(0,u.rL)(qt,Bs),Xt=(0,c.HY)({auth:Lt,admin:_t,recruiter:Vt,jobPosts:Wt,contestants:Bt,posts:Jt,adminJobPost:Zt,connections:Gt,notifications:Ht,messages:Yt,recruiterMessages:Kt,userRecruiterMessages:(0,u.rL)({key:"userRecruiterMessages",storage:m.A,whitelist:["conversations","messages"]},nt),subscriptions:ct,userPosts:mt,userSearch:gt,recruiterSearch:yt,resume:At}),Qt=(0,d.U1)({reducer:Xt,middleware:e=>e({serializableCheck:{ignoredActions:[u.ZM,u.r2,u.Hz,u.DY,u.Cq,u.eY]}})}),er=(0,u.GM)(Qt),sr=Qt,tr=(0,x.Mz)([e=>e.connections.connections],(e=>e));var rr=t(2104);const ar=new class{constructor(){this.socket=null,this.userId=null,this.connected=!1}connect(e){this.userId=e,this.socket&&this.socket.connected&&this.socket.disconnect(),this.socket=(0,rr.io)("http://localhost:5000",{path:"/user-socket",transports:["websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,auth:{userId:e,userType:"user"}}),this.setupEventListeners()}setupEventListeners(){this.socket&&(this.socket.on("connect",(()=>{this.connected=!0})),this.socket.on("connect_error",(e=>{console.error("Socket connection error:",e),this.connected=!1})),this.socket.on("disconnect",(e=>{this.connected=!1})),this.socket.on("newMessage",(e=>{sr.dispatch(As(e))})),this.socket.on("messageSent",(e=>{sr.dispatch(As(e))})),this.socket.on("userTyping",(e=>{let{userId:s,isTyping:t}=e;sr.dispatch(Ps({userId:s,isTyping:t}))})),this.socket.on("messageError",(e=>{console.error("Error sending message:",e)})))}sendMessage(e){this.socket&&this.connected?this.socket.emit("sendMessage",e,(e=>{e.error&&console.error("Error sending message:",e.error)})):console.warn("SocketService: Socket is not connected. Unable to send message.")}emitTyping(e,s){this.socket&&this.connected?this.socket.emit("typing",{recipientId:e,isTyping:s}):console.warn("SocketService: Socket is not connected. Unable to emit typing status.")}emit(e,s){this.socket&&this.connected?this.socket.emit(e,s):console.warn(`SocketService: Cannot emit ${e}. Socket is not connected.`)}on(e,s){return this.socket?(this.socket.on(e,s),()=>{var t;return null===(t=this.socket)||void 0===t?void 0:t.off(e,s)}):()=>{}}getConnectionStatus(){return this.connected}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.connected=!1}markNotificationAsRead(e){this.socket&&this.connected?this.socket.emit("markNotificationAsRead",e):console.warn("SocketService: Socket is not connected. Unable to mark notification as read.")}emitUserCallOffer(e,s){this.socket&&this.connected&&this.socket.emit("userCallOffer",{recipientId:e,offer:s})}emitUserCallAnswer(e,s){this.socket&&this.connected&&this.socket.emit("userCallAnswer",{callerId:e,answer:s})}emitUserEndCall(e){this.socket&&this.connected&&this.socket.emit("userEndCall",{recipientId:e})}onIncomingCall(e){return this.socket?(this.socket.on("incomingCall",e),()=>{var s;return null===(s=this.socket)||void 0===s?void 0:s.off("incomingCall",e)}):()=>{}}emitCallAnswer(e,s){this.socket&&this.connected&&this.socket.emit("callAnswer",{callerId:e,answer:s})}onCallRejected(e){return this.socket?(this.socket.on("callRejected",e),()=>{var s;return null===(s=this.socket)||void 0===s?void 0:s.off("callRejected",e)}):()=>{}}};var lr=t(579);const nr=(0,r.createContext)(void 0),ir=e=>{let{children:s}=e;const[t,a]=(0,r.useState)(!1),[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),c=(0,r.useCallback)((e=>{console.log("Incoming call from:",e.callerId),a(!0),n(e)}),[]),d=(0,r.useCallback)((()=>{console.log("Call accepted in CallContext"),a(!1),o(!0),console.log("isCallActive set to true")}),[]),u=(0,r.useCallback)((()=>{l&&(ar.emit("rejectCall",{callerId:l.callerId}),a(!1),n(null))}),[l]),m=(0,r.useCallback)((e=>{console.log(`Setting up video call with ${e}`),o(!0)}),[]),p=(0,r.useCallback)((()=>{console.log("Call ended"),o(!1),n(null)}),[]);return(0,lr.jsx)(nr.Provider,{value:{isIncomingCall:t,incomingCallData:l,isCallActive:i,handleIncomingCall:c,acceptCall:d,rejectCall:u,setupVideoCall:m,endCall:p},children:s})},or=()=>{const e=(0,r.useContext)(nr);if(void 0===e)throw new Error("useCall must be used within a CallProvider");return e};var cr=t(5447);const dr=()=>{const[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(""),[o,c]=(0,r.useState)({}),d=(0,i.wA)(),{loading:u,error:m,isAuthenticated:p}=(0,i.d4)((e=>e.auth)),x=(0,n.Zp)();return(0,r.useEffect)((()=>{p&&x("/dashboard")}),[p,x]),(0,lr.jsx)(cr.G_,{clientId:"587543227296-kk63ntvfqatjedh690liis2rbfj2lags.apps.googleusercontent.com",children:(0,lr.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,lr.jsx)("div",{className:"w-full max-w-4xl overflow-hidden rounded-lg bg-white shadow-xl",children:(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,lr.jsxs)("div",{className:"bg-purple-600 p-12 md:w-2/5",children:[(0,lr.jsx)("div",{className:"text-8xl font-bold text-white opacity-50",children:"4"}),(0,lr.jsx)("div",{className:"mt-4 text-4xl font-semibold text-white",children:"JOBS"})]}),(0,lr.jsxs)("div",{className:"p-12 md:w-3/5",children:[(0,lr.jsx)("h2",{className:"mb-8 text-3xl font-semibold text-purple-600",children:"Log In"}),(0,lr.jsxs)("form",{onSubmit:s=>{s.preventDefault(),(()=>{let s={};return/^[a-zA-Z0-9._-]+@[a-z]+\.[a-z]{2,}$/.test(e)||(s.email="Please enter a valid email address."),/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(t)||(s.password="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."),c(s),0===Object.keys(s).length})()&&d(v({email:e,password:t}))},children:[(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsx)("input",{type:"email",placeholder:"Username",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-4 py-3 text-base focus:border-purple-500 focus:outline-none",value:e,onChange:e=>s(e.target.value),required:!0}),o.email&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500",children:o.email})]}),(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("input",{type:"password",placeholder:"Password",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-4 py-3 text-base focus:border-purple-500 focus:outline-none",value:t,onChange:e=>a(e.target.value),required:!0}),o.password&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500",children:o.password})]}),(0,lr.jsx)("button",{type:"submit",className:"w-full rounded-md bg-purple-600 py-3 text-lg font-semibold text-white transition duration-200 hover:bg-purple-700 focus:outline-none",disabled:u,children:u?"Logging in...":"Submit"}),m&&(0,lr.jsx)("p",{className:"mt-3 text-sm text-red-500",children:m}),(0,lr.jsx)(l.N_,{to:"/forgot-password",className:"block text-sm text-purple-600 hover:underline mt-2",children:"Forgot Password?"})]}),(0,lr.jsxs)("p",{className:"mt-6 text-base",children:["Don't have an account? ",(0,lr.jsx)(l.N_,{to:"/signup",className:"text-purple-600 hover:underline",children:"Sign up"})]}),(0,lr.jsxs)("div",{className:"mt-8",children:[(0,lr.jsx)("p",{className:"mb-3 text-base text-gray-600",children:"Or log in with"}),(0,lr.jsx)(cr.j,{onSuccess:e=>{e.credential?d(N(e.credential)):console.error("Google login response does not contain a credential")},onError:()=>{console.error("Google login error occurred")},type:"standard",theme:"outline",size:"large"})]})]})]})})})})},ur=e=>{let{onSignupSuccess:s}=e;const[t,a]=(0,r.useState)(""),[l,n]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)({}),[x,h]=(0,r.useState)(""),g=(0,i.wA)(),{loading:f}=(0,i.d4)((e=>e.auth)),j=(e,s)=>{let t="";switch(e){case"name":/^[^\s][a-zA-Z]{3,}(?:\s[a-zA-Z]*)?$/.test(s)||(t="Name must be at least 3 characters long and can include letters and spaces.");break;case"email":/^[a-zA-Z0-9._-]+@[a-z]+\.[a-z]{2,}$/.test(s)||(t="Please enter a valid email address.");break;case"password":/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(s)||(t="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character.");break;case"confirmPassword":s!==o&&(t="Passwords do not match.")}p((s=>({...s,[e]:t})))};return(0,lr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),j("name",t),j("email",l),j("password",o),j("confirmPassword",d),Object.values(m).every((e=>""===e))&&o===d)try{await g(w({name:t,email:l,password:o})).unwrap(),s(l)}catch(e){h(e.message||"Signup failed")}},className:"space-y-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,lr.jsx)("input",{id:"name",type:"text",value:t,onChange:e=>{a(e.target.value),j("name",e.target.value)},className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),m.name&&(0,lr.jsx)("span",{className:"mt-1 text-xs text-red-500",children:m.name})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,lr.jsx)("input",{id:"email",type:"email",value:l,onChange:e=>{n(e.target.value),j("email",e.target.value)},className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),m.email&&(0,lr.jsx)("span",{className:"mt-1 text-xs text-red-500",children:m.email})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,lr.jsx)("input",{id:"password",type:"password",value:o,onChange:e=>{c(e.target.value),j("password",e.target.value)},className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),m.password&&(0,lr.jsx)("span",{className:"mt-1 text-xs text-red-500",children:m.password})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,lr.jsx)("input",{id:"confirmPassword",type:"password",value:d,onChange:e=>{u(e.target.value),j("confirmPassword",e.target.value)},className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),m.confirmPassword&&(0,lr.jsx)("span",{className:"mt-1 text-xs text-red-500",children:m.confirmPassword})]}),x&&(0,lr.jsx)("div",{className:"text-sm text-red-500",children:x}),(0,lr.jsx)("button",{type:"submit",disabled:Object.values(m).some((e=>""!==e))||o!==d||f,className:"w-full rounded-md bg-purple-600 py-2 text-sm font-semibold text-white transition duration-200 hover:bg-purple-700 focus:outline-none disabled:opacity-50",children:f?"Signing Up...":"Sign Up"})]})},mr=e=>{let{email:s}=e;const[t,a]=(0,r.useState)(""),[l,n]=(0,r.useState)(30),[o,c]=(0,r.useState)(!0),d=(0,i.wA)();return(0,r.useEffect)((()=>{let e;return o&&l>0?e=setTimeout((()=>{n((e=>e-1))}),1e3):0===l&&c(!1),()=>clearTimeout(e)}),[o,l]),(0,lr.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,lr.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-xl p-8",children:[(0,lr.jsx)("h3",{className:"mb-4 text-2xl font-semibold text-purple-600 text-center",children:"OTP Verification"}),(0,lr.jsxs)("p",{className:"mb-6 text-gray-700 text-center",children:["An OTP has been sent to ",s]}),(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsx)("label",{htmlFor:"otp-input",className:"block text-sm font-semibold text-gray-700",children:"Enter OTP"}),(0,lr.jsx)("input",{id:"otp-input",type:"text",value:t,onChange:e=>a(e.target.value),required:!0,className:"w-full rounded-md border border-gray-300 px-4 py-2 text-sm focus:border-purple-500 focus:outline-none"})]}),(0,lr.jsx)("button",{onClick:async()=>{try{await d(C({email:s,otp:t})).unwrap()}catch(e){console.error("OTP verification failed:",e)}},disabled:!o,className:"w-full rounded-md py-2 text-sm font-semibold text-white transition duration-200 "+(o?"bg-purple-600 hover:bg-purple-700":"bg-gray-300 cursor-not-allowed"),children:"Verify OTP"}),(0,lr.jsx)("div",{className:"mt-4 text-center",children:o?(0,lr.jsxs)("p",{className:"text-gray-700",children:["Resend OTP in ",l," seconds"]}):(0,lr.jsx)("button",{onClick:async()=>{try{await(async e=>f("POST","/send-otp",{email:e}))(s),c(!0),n(30)}catch(e){console.error("Failed to resend OTP:",e)}},className:"mt-2 rounded-md bg-purple-600 py-2 text-sm font-semibold text-white hover:bg-purple-700 transition duration-200",children:"Resend OTP"})})]})})},pr=()=>{const[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(!1),l=(0,n.Zp)(),{loading:o,error:c,isAuthenticated:d}=(0,i.d4)((e=>e.auth));return(0,r.useEffect)((()=>{d&&l("/dashboard")}),[d,l]),(0,lr.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,lr.jsx)("div",{className:"w-full max-w-4xl overflow-hidden rounded-lg bg-white shadow-xl",children:(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,lr.jsxs)("div",{className:"bg-purple-600 p-12 md:w-2/5",children:[(0,lr.jsx)("div",{className:"text-8xl font-bold text-white opacity-50",children:"4"}),(0,lr.jsx)("div",{className:"mt-4 text-4xl font-semibold text-white",children:"JOBS"})]}),(0,lr.jsxs)("div",{className:"p-12 md:w-3/5",children:[(0,lr.jsx)("h2",{className:"mb-8 text-3xl font-semibold text-purple-600",children:"Sign Up"}),t?(0,lr.jsx)(mr,{email:e}):(0,lr.jsx)(ur,{onSignupSuccess:e=>{s(e),a(!0)}}),o&&(0,lr.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Loading..."}),c&&(0,lr.jsx)("p",{className:"mt-4 text-sm text-red-500",children:c})]})]})})})};var xr=t(3910),hr=t(7929);const gr=(e,s)=>{const t=ar.on(e,s);return()=>{"function"==typeof t&&t()}},fr=()=>{const[e,s]=(0,r.useState)(!1),[t,a]=(0,r.useState)(!1),[l,o]=(0,r.useState)(""),c=(0,i.wA)(),d=(0,n.Zp)(),u=(0,i.d4)((e=>e.auth.user)),m=(0,i.d4)((e=>e.notifications.items)),p=(0,i.d4)((e=>e.notifications.unreadCount)),x=(0,i.d4)((e=>e.connections.connectionRequests)),h=(0,r.useMemo)((()=>x.filter((e=>"pending"===e.status))),[x]),g=(0,r.useMemo)((()=>p+h.length),[p,h.length]),f=(0,r.useCallback)((e=>{d(e),s(!1)}),[d]),j=(0,r.useCallback)((()=>{c(ks()),f("/messages")}),[c,f]);(0,r.useEffect)((()=>{if(u){const e=new AbortController;return ar&&!ar.getConnectionStatus()&&ar.connect(u.id),c(ms(u.id)),c(es(u.id)),()=>{e.abort(),null==ar||ar.disconnect()}}}),[u,c]),(0,r.useEffect)((()=>{const e=gr("newNotification",(e=>{c(xs(e))}));return()=>{e()}}),[c]);const b=(0,r.useCallback)((()=>{c(U()),d("/login")}),[c,d]),y=(0,r.useCallback)((()=>{c(R({page:1,limit:10,sortBy:"createdAt",sortOrder:"desc",filter:{}})),f("/jobs")}),[c,f]),v=(0,r.useCallback)((()=>{s((e=>!e))}),[]);(0,r.useEffect)((()=>{if(e&&m.length>0){const e=m.filter((e=>!e.isRead));e.length>0&&(c(gs()),e.forEach((e=>{e._id&&ar.markNotificationAsRead(e._id)})))}}),[e,c,m]);const N=(0,r.useCallback)((()=>{f("/connections")}),[f]),w=(0,r.useCallback)((()=>{a((e=>!e)),I(!1)}),[]),C=(0,r.useCallback)((()=>{l.length>=3&&u&&(c(pt({query:l,userId:u.id})),d("/search-results"))}),[l,c,d,u]),k=(0,r.useCallback)((()=>{o(""),c(ht())}),[c]),S=(0,r.useCallback)(((e,s,t,r)=>(0,lr.jsxs)("button",{className:"flex items-center text-purple-600 hover:text-gray-600 px-2 sm:px-3 md:px-4 py-1 sm:py-2 relative text-xs sm:text-sm md:text-base w-full md:w-auto",onClick:t,children:[(0,lr.jsx)(xr.g,{icon:e,className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),(0,lr.jsx)("span",{className:"inline",children:s}),void 0!==r&&r>0&&(0,lr.jsx)("span",{className:"absolute top-0 right-0 -mt-1 -mr-1 bg-red-500 text-white rounded-full px-1 sm:px-2 py-0.5 text-xxs sm:text-xs",children:r})]},s)),[]),A=[{icon:hr.v02,text:"Home",onClick:()=>f("/dashboard")},{icon:hr.u4D,text:"Jobs",onClick:y},{icon:hr.q9p,text:"Messages",onClick:j},{icon:hr.gdJ,text:"Connections",onClick:N,badge:h.length},{icon:hr.z$e,text:"Notifications",onClick:v,badge:g},{icon:hr.X46,text:"Profile",onClick:()=>f(`/profile/${null==u?void 0:u.id}`)},{icon:hr.GxD,text:"Logout",onClick:b}],[P,I]=(0,r.useState)(!1),E=(0,r.useCallback)((()=>{I((e=>!e)),a(!1)}),[]);return(0,lr.jsx)("header",{className:"bg-white shadow-md p-2 sm:p-3 md:p-4",children:(0,lr.jsxs)("div",{className:"container mx-auto",children:[(0,lr.jsxs)("div",{className:"flex flex-wrap justify-between items-center",children:[(0,lr.jsxs)("div",{className:"flex items-center justify-between w-full md:w-auto mb-2 md:mb-0",children:[(0,lr.jsxs)("button",{onClick:()=>f("/dashboard"),className:"flex items-center",children:[(0,lr.jsx)("img",{src:"/logo.png",alt:"Logo",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 mr-1 sm:mr-2"}),(0,lr.jsx)("span",{className:"text-purple-700 font-semibold text-sm sm:text-base md:text-lg",children:"4 Jobs"})]}),(0,lr.jsxs)("div",{className:"flex md:hidden",children:[(0,lr.jsx)("button",{onClick:w,className:"text-purple-600 mr-2 sm:mr-4","aria-label":"Search",children:(0,lr.jsx)(xr.g,{icon:hr.MjD,className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,lr.jsx)("button",{className:"text-purple-600 focus:outline-none",onClick:E,children:(0,lr.jsx)(xr.g,{icon:P?hr.GRI:hr.ckx,className:"h-5 w-5 sm:h-6 sm:w-6"})})]})]}),(0,lr.jsx)("div",{className:`w-full md:w-auto md:flex-grow mx-0 sm:mx-2 md:mx-4 mb-2 md:mb-0 order-3 md:order-2 ${t||!P?"block":"hidden"} md:block`,children:(0,lr.jsxs)("div",{className:"relative w-full max-w-lg mx-auto",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search...",value:l,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&C(),className:"w-full px-3 sm:px-4 py-1 sm:py-2 text-sm sm:text-base border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500"}),l&&(0,lr.jsx)("button",{onClick:k,className:"absolute right-8 sm:right-12 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:(0,lr.jsx)(xr.g,{icon:hr.GRI,className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,lr.jsx)("button",{onClick:C,className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 text-purple-500 hover:text-purple-700",children:(0,lr.jsx)(xr.g,{icon:hr.MjD,className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),(0,lr.jsx)("nav",{className:(P?"block":"hidden")+" md:flex flex-col md:flex-row md:flex-wrap space-y-2 md:space-y-0 space-x-0 md:space-x-1 lg:space-x-2 xl:space-x-4 items-start md:items-center order-2 md:order-3 w-full md:w-auto mt-2 md:mt-0",children:A.map((e=>S(e.icon,e.text,e.onClick,e.badge)))})]}),e&&(0,lr.jsxs)("div",{className:"fixed inset-0 z-50 md:absolute md:inset-auto md:right-4 md:top-16 mt-2 w-full md:w-80 bg-white border border-gray-200 rounded-md shadow-lg",children:[(0,lr.jsxs)("div",{className:"flex justify-between items-center p-2 sm:p-4 border-b border-gray-200",children:[(0,lr.jsx)("span",{className:"font-bold text-purple-700 text-sm sm:text-base",children:"Notifications"}),(0,lr.jsx)("button",{onClick:v,className:"text-gray-500 hover:text-gray-700 sm:hidden",children:(0,lr.jsx)(xr.g,{icon:hr.GRI,className:"h-5 w-5"})})]}),(0,lr.jsxs)("div",{className:"max-h-[calc(100vh-10rem)] sm:max-h-96 overflow-y-auto",children:[h.length>0&&(0,lr.jsx)("div",{className:"p-2 sm:p-4 border-b border-gray-100 hover:bg-purple-50 cursor-pointer transition duration-300",onClick:N,children:(0,lr.jsxs)("p",{className:"text-xs sm:text-sm flex items-center text-purple-600",children:[(0,lr.jsx)(xr.g,{icon:hr.nWR,className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),h.length," pending connection request(s)"]})},"connection-requests"),m.map((e=>(0,lr.jsxs)("div",{className:"p-2 sm:p-4 border-b border-gray-100 hover:bg-purple-50 transition duration-300",children:[(0,lr.jsx)("p",{className:"text-xs sm:text-sm",children:e.message}),(0,lr.jsx)("p",{className:"text-xxs sm:text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleString()})]},e._id))),0===m.length&&0===h.length&&(0,lr.jsx)("div",{className:"p-2 sm:p-4 text-gray-500 text-xs sm:text-sm",children:"No new notifications"})]})]})]})})};var jr=t(8706);const br=e=>{let{isOpen:s}=e;const{user:t}=(0,i.d4)((e=>e.auth));return(0,lr.jsxs)("div",{className:`bg-white shadow-md rounded-lg p-4 w-64 transition-transform duration-300 ease-in-out fixed top-16 left-0 h-full z-50 ${s?"translate-x-0":"-translate-x-full"} lg:static lg:translate-x-0 lg:block`,children:[(0,lr.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[null!=t&&t.profileImage?(0,lr.jsx)("img",{src:`${t.profileImage}`,alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}):(0,lr.jsx)(jr.A,{className:"w-16 h-16 text-gray-400"}),(0,lr.jsx)("h2",{className:"mt-2 text-xl text-purple-700 font-semibold",children:(null==t?void 0:t.name)||"Guest"})]}),(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsx)("h3",{className:"text-sm font-semibold text-purple-800 mb-1",children:"Bio"}),(0,lr.jsx)("p",{className:"text-xs text-purple-700 overflow-hidden text-ellipsis",children:(null==t?void 0:t.bio)||"No bio available."})]}),(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,lr.jsx)("span",{className:"text-purple-600",children:"Profile viewers"}),(0,lr.jsx)("span",{className:"font-semibold text-purple-600",children:"55"})]}),(0,lr.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,lr.jsx)("span",{className:"text-purple-600",children:"Post impressions"}),(0,lr.jsx)("span",{className:"font-semibold text-purple-600",children:"1"})]})]}),(0,lr.jsx)(l.N_,{to:"/resume-builder",className:"block w-full mt-4",children:(0,lr.jsx)("button",{className:"w-full bg-purple-600 text-white py-1 px-2 rounded-full hover:bg-purple-700 transition duration-300 text-xs",children:"Build Resume"})})]})};var yr=t(5505);const vr=()=>{const{user:e}=(0,i.d4)((e=>e.auth));return(0,lr.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 text-xs sm:text-sm md:text-base",children:(0,lr.jsxs)(l.N_,{to:"/posts/create",className:"flex items-center space-x-4",children:[(0,lr.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:null!=e&&e.profileImage?(0,lr.jsx)("img",{src:`${null==e?void 0:e.profileImage}`,alt:"User avatar",className:"rounded-full"}):(0,lr.jsx)(jr.A,{className:"w-20 h-20 text-gray-400"})}),(0,lr.jsx)("div",{className:"flex-grow",children:(0,lr.jsx)("div",{className:"bg-purple-50 text-purple-500 rounded-full py-1 px-2 text-xs sm:text-sm md:text-base",children:"Write about something"})}),(0,lr.jsxs)("div",{className:"flex space-x-2",children:[(0,lr.jsx)("button",{className:"text-purple-500 hover:bg-purple-100 rounded-full p-1 transition duration-300 text-xs sm:text-sm md:text-base",children:(0,lr.jsx)(yr.A,{size:20})}),(0,lr.jsx)("button",{className:"text-purple-500 hover:bg-purple-100 rounded-full p-1 transition duration-300 text-xs sm:text-sm md:text-base",children:(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/s",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5"})})]})]})})};var Nr=t(3204);function wr(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const Cr=e=>{let{_id:s,user:t,content:a,imageUrl:l,videoUrl:n,likes:o,comments:c,createdAt:d}=e;const u=(0,i.wA)(),m=(0,i.d4)((e=>e.auth.user)),[p,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)(c),b=m&&m.id&&o.includes(m.id);return(0,lr.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden transition-all duration-300 hover:shadow-xl mb-4 border border-purple-200 dark:border-purple-700",children:[(0,lr.jsx)("div",{className:"p-4 border-b text-purple-600 border-purple-200 dark:border-purple-700",children:(0,lr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,lr.jsx)("img",{src:t.profileImage||"https://via.placeholder.com/40",alt:t.name,className:"w-10 h-10 rounded-full object-cover"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{className:"font-semibold text-purple-800 dark:text-purple-500",children:t.name}),(0,lr.jsx)("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:wr(d)})]})]})}),(0,lr.jsxs)("div",{className:"p-4",children:[(0,lr.jsx)("p",{className:"text-purple-800 dark:text-purple-500 mb-4",children:a}),l&&(0,lr.jsx)("img",{src:l,alt:"",className:"w-full h-auto rounded-lg mb-4 object-cover"}),n&&(0,lr.jsx)("video",{src:n,controls:!0,className:"w-full h-auto rounded-lg mb-4"}),(0,lr.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,lr.jsxs)("div",{className:"flex space-x-4",children:[(0,lr.jsxs)("button",{onClick:()=>{m&&m.id&&s&&u(Me({postId:s,userId:m.id}))},className:`flex items-center space-x-1 ${b?"text-purple-900 dark:text-purple-900":"text-gray-500 dark:text-gray-400"} hover:text-purple-700 dark:hover:text-purple-300 transition-colors duration-200`,children:[(0,lr.jsx)(Nr.gb0,{}),(0,lr.jsx)("span",{children:o.length})]}),(0,lr.jsx)("button",{onClick:()=>{m&&m.id&&s&&u(_e({postId:s,userId:m.id}))},className:"flex items-center space-x-1 text-purple-100 dark:text-gray-400 hover:text-purple-700 dark:hover:text-purple-300 transition-colors duration-200",children:(0,lr.jsx)(Nr.b7w,{})})]}),(0,lr.jsxs)("button",{onClick:()=>g(!h),className:"flex items-center space-x-1 text-purple-900 dark:text-purple-900 hover:text-purple-900 dark:hover:text-purple-300 transition-colors duration-200",children:[(0,lr.jsx)(Nr.j1Q,{}),(0,lr.jsx)("span",{children:f.length})]})]}),h&&(0,lr.jsxs)("div",{className:"mt-4",children:[(0,lr.jsx)("h4",{className:"font-medium text-purple-700 dark:text-purple-900 mb-2",children:"Comments"}),(0,lr.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:f.map((e=>(0,lr.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-100 p-2 rounded-lg flex items-start space-x-2",children:[(0,lr.jsx)("img",{src:e.userId.profileImage||"https://via.placeholder.com/40",alt:e.userId.name,className:"w-8 h-8 rounded-full object-cover"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"text-sm font-medium text-purple-800 dark:text-purple-600",children:e.userId.name}),(0,lr.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-500",children:e.content}),(0,lr.jsx)("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:wr(e.createdAt)})]})]},e.id)))}),(0,lr.jsxs)("div",{className:"mt-4 flex",children:[(0,lr.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),placeholder:"Write a comment...",className:"flex-grow px-3 py-2 border border-purple-300 dark:border-purple-600 rounded-l-md focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-purple-100 dark:text-white"}),(0,lr.jsx)("button",{onClick:()=>{if(m&&m.id&&s&&p.trim()){const e={postId:s,userId:m.id,content:p,userName:m.name,userProfileImage:m.profileImage};u(Ue(e));const t={id:Date.now().toString(),content:p,createdAt:(new Date).toISOString(),userId:{id:m.id,name:m.name,profileImage:m.profileImage}};j((e=>[t,...e])),x("")}},className:"px-4 py-2 bg-purple-600 text-white rounded-r-md hover:bg-purple-700 transition-colors duration-200",children:"Post"})]})]})]})]})},kr=()=>{const e=(0,i.wA)(),s=(0,i.d4)((e=>e.posts.list)),t=(0,i.d4)((e=>e.posts.status)),a=(0,i.d4)((e=>e.posts.error)),l=(0,i.d4)((e=>e.posts.hasMore)),n=(0,r.useRef)(null),o=(0,r.useCallback)((s=>{"loading"!==t&&(n.current&&n.current.disconnect(),n.current=new IntersectionObserver((s=>{s[0].isIntersecting&&l&&e(Te())})),s&&n.current.observe(s))}),[t,l,e]);return(0,r.useEffect)((()=>(e(Te()),()=>{n.current&&n.current.disconnect()})),[e]),"loading"!==t||s&&0!==s.length?a?(0,lr.jsxs)("div",{children:["Error: ",a]}):Array.isArray(s)&&0!==s.length?(0,lr.jsxs)("div",{className:"w-full",children:[(0,lr.jsx)(vr,{}),(0,lr.jsxs)("div",{className:"post-list space-y-4",children:[s.map(((e,t)=>(0,lr.jsx)("div",{ref:t===s.length-1?o:null,className:"text-xs sm:text-sm md:text-base lg:text-lg",children:(0,lr.jsx)(Cr,{...e})},`${e._id}-${t}`))),"loading"===t&&(0,lr.jsx)("div",{className:"text-center py-4",children:"Loading more posts..."}),!l&&"loading"!==t&&(0,lr.jsx)("div",{className:"text-center text-gray-500 py-4",children:"All posts for you finished"})]})]}):(0,lr.jsxs)("div",{children:[(0,lr.jsx)(vr,{}),(0,lr.jsx)("div",{children:"No posts available."})]}):(0,lr.jsx)("div",{children:"Loading..."})},Sr=e=>{let{user:s,onViewProfile:t}=e;const r=(0,i.wA)(),a=(0,i.d4)((e=>e.auth.user)),l=()=>{a&&r(Qe({senderId:a.id,recipientId:s.id}))};return(0,lr.jsxs)("div",{className:"flex flex-col justify-between p-4 bg-gray-50 rounded-lg shadow-md hover:bg-gray-100 transition duration-300 ease-in-out h-full",children:[(0,lr.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[null!=s&&s.profileImage?(0,lr.jsx)("img",{src:`${s.profileImage}`,alt:s.name,className:"rounded-full h-16 w-16 object-cover mb-2"}):(0,lr.jsx)(jr.A,{className:"w-20 h-20 text-gray-400"}),(0,lr.jsx)("h4",{className:"font-medium text-base text-gray-800 text-center",children:s.name})]}),(0,lr.jsxs)("div",{className:"flex flex-col space-y-2 mt-auto",children:[(()=>{switch(s.connectionStatus){case"pending":return(0,lr.jsx)("button",{className:"w-full text-sm bg-gray-400 text-white px-3 py-2 rounded cursor-not-allowed",disabled:!0,children:"Pending"});case"rejected":return(0,lr.jsx)("button",{onClick:l,className:"w-full text-sm bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded transition duration-300 ease-in-out",children:"Connect Again"});case"none":return(0,lr.jsx)("button",{onClick:l,className:"w-full text-sm bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded transition duration-300 ease-in-out",children:"Connect"});default:return null}})(),(0,lr.jsx)("button",{onClick:()=>{t(s.id)},className:"w-full text-sm bg-gray-200 text-gray-700 px-3 py-2 rounded hover:bg-gray-300 transition duration-300 ease-in-out",children:"View Profile"})]})]})},Ar=e=>{let{isOpen:s}=e;const{recommendations:t,loading:r,error:a}=(0,i.d4)((e=>e.connections));return r?(0,lr.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4",children:(0,lr.jsx)("p",{children:"Loading recommendations..."})}):a?(0,lr.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4",children:(0,lr.jsx)("p",{className:"text-red-500 text-center",children:a})}):Array.isArray(t)?0===t.length?(0,lr.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4",children:(0,lr.jsx)("p",{className:"text-gray-500 text-center",children:"No recommendations available at this time."})}):(0,lr.jsxs)("div",{className:`bg-white shadow-lg rounded-lg p-4 transition-transform duration-300 ease-in-out ${s?"translate-x-0":"translate-x-full"} fixed top-16 right-0 h-full z-50 overflow-y-auto lg:static lg:translate-x-0 lg:h-auto`,children:[(0,lr.jsx)("h3",{className:"font-semibold text-lg mb-4 text-gray-800",children:"Recommendations"}),(0,lr.jsx)("div",{className:"grid grid-row-1 sm:grid-row-2 lg:grid-row-3 xl:grid-row-4 gap-4",children:t.map((e=>(0,lr.jsx)(Sr,{user:e,onViewProfile:()=>{}},e.id)))})]}):(console.error("Recommendations is not an array:",t),(0,lr.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4",children:(0,lr.jsx)("p",{className:"text-red-500 text-center",children:"An error occurred while loading recommendations."})}))};var Pr=t(9463),Ir=t(8326);const Rr=()=>{const e=(0,i.wA)(),s=(0,i.d4)((e=>e.auth.user)),[t,a]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),o=()=>{a(!t)},c=()=>{n(!l)};return(0,r.useEffect)((()=>{s&&e(Xe(s.id))}),[e,s]),(0,lr.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)("div",{className:"max-w-7xl mx-auto m-3 px-4 sm:px-6 lg:px-8 relative",children:(0,lr.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5",children:[(0,lr.jsx)("div",{className:"lg:hidden fixed top-1/2 left-0 transform -translate-y-1/2 w-16 cursor-pointer opacity-0 hover:opacity-100 transition-opacity duration-300",onClick:o,children:(0,lr.jsx)(Pr.A,{className:"text-gray-600"})}),(0,lr.jsx)("div",{className:"hidden lg:block lg:w-1/4 xl:w-1/5",children:(0,lr.jsx)("div",{className:"sticky top-20",children:(0,lr.jsx)(br,{isOpen:!0})})}),(0,lr.jsx)("div",{className:"w-full lg:w-1/2 xl:w-3/5",children:(0,lr.jsx)(kr,{})}),(0,lr.jsx)("div",{className:"hidden lg:block lg:w-1/4 xl:w-1/5",children:(0,lr.jsx)("div",{className:"sticky top-20",children:(0,lr.jsx)(Ar,{isOpen:!0})})}),(0,lr.jsx)("div",{className:"lg:hidden transition-transform duration-300 ease-in-out "+(l?"block":"hidden"),children:(0,lr.jsx)(Ar,{isOpen:l})}),(0,lr.jsx)("div",{className:"lg:hidden fixed top-1/2 right-0 transform -translate-y-1/2 w-16 cursor-pointer opacity-0 hover:opacity-100 transition-opacity duration-300",onClick:c,children:(0,lr.jsx)(Ir.A,{className:"text-gray-600"})}),(0,lr.jsx)("div",{className:"lg:hidden transition-transform duration-300 ease-in-out "+(t?"block":"hidden"),children:(0,lr.jsx)(br,{isOpen:t})}),t&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-40",onClick:o}),l&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-40",onClick:c})]})})]})},Er=e=>{let{children:s}=e;const{isAuthenticated:t}=(0,i.d4)((e=>e.auth)),a=(0,i.wA)(),l=(0,n.Zp)(),o=localStorage.getItem("token");return(0,r.useEffect)((()=>{(async()=>{if(!t&&o)try{await a(F()).unwrap()}catch(e){a(U()),l("/login")}})()}),[t,o,a,l]),t||o?(0,lr.jsx)(lr.Fragment,{children:s}):(0,lr.jsx)(n.C5,{to:"/login",replace:!0})},Dr=()=>{const e=(0,i.wA)(),s=(0,n.Zp)(),{isAuthenticatedAdmin:t,error:a,loading:l}=(0,i.d4)((e=>e.admin)),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)({email:"",password:""});return(0,r.useEffect)((()=>{t&&s("/admin/dashboard")}),[t,s]),(0,lr.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:(0,lr.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden max-w-4xl w-full flex flex-col md:flex-row",children:[(0,lr.jsx)("div",{className:"bg-purple-600 w-full md:w-2/5 p-8 flex items-center justify-center",children:(0,lr.jsxs)("h1",{className:"text-white text-6xl font-bold",children:[(0,lr.jsx)("span",{className:"text-9xl",children:"4"}),"JOBS"]})}),(0,lr.jsxs)("div",{className:"w-full md:w-3/5 p-8",children:[(0,lr.jsx)("h2",{className:"text-3xl font-semibold text-purple-600 mb-6",children:"Admin Log In"}),(0,lr.jsxs)("form",{onSubmit:s=>{s.preventDefault(),(()=>{const e={email:"",password:""};return/^[a-zA-Z0-9._-]+@[a-z]+\.[a-z]{2,}$/.test(o)||(e.email="Please enter a valid email address."),/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(d)||(e.password="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."),p(e),!e.email&&!e.password})()&&(a&&e(se()),e(B({email:o,password:d})))},className:"space-y-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("input",{type:"email",value:o,onChange:e=>c(e.target.value),placeholder:"Username",className:"w-full px-4 py-3 rounded-full bg-purple-50 border border-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",required:!0}),m.email&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.email})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("input",{type:"password",value:d,onChange:e=>u(e.target.value),placeholder:"Password",className:"w-full px-4 py-3 rounded-full bg-purple-50 border border-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",required:!0}),m.password&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.password})]}),(0,lr.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-purple-600 text-white py-3 rounded-full hover:bg-purple-700 transition duration-300 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-opacity-50",children:l?"Logging in...":"Submit"})]}),a&&(0,lr.jsx)("p",{className:"text-red-500 mt-4 text-center",children:a})]})]})})},zr=()=>{const[e,s]=(0,r.useState)(!1),t=()=>{s(!e)};return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("div",{className:"md:hidden fixed top-0 left-0 z-50 p-2 sm:p-4",children:(0,lr.jsx)("button",{onClick:t,className:"bg-purple-700 text-white p-1 sm:p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-600",children:e?(0,lr.jsx)(Nr.QCr,{className:"text-lg sm:text-2xl"}):(0,lr.jsx)(Nr.OXb,{className:"text-lg sm:text-2xl"})})}),(0,lr.jsxs)("aside",{className:`fixed top-0 left-0 h-screen w-64 bg-purple-700 text-white transform transition-transform duration-300 ease-in-out overflow-y-auto z-40\n          ${e?"translate-x-0":"-translate-x-full"}\n          md:translate-x-0 md:sticky md:top-0 md:z-0 shadow-lg`,children:[(0,lr.jsx)("div",{className:"flex items-center justify-center h-16 border-b border-purple-600",children:(0,lr.jsx)("img",{src:"../../logo.png",alt:"4Jobs Logo",className:"h-8 sm:h-10"})}),(0,lr.jsx)("nav",{className:"mt-8 pb-16 md:pb-0",children:(0,lr.jsxs)("ul",{className:"space-y-2 sm:space-y-4",children:[(0,lr.jsx)("li",{children:(0,lr.jsxs)(l.N_,{to:"/admin/dashboard",className:"flex items-center space-x-2 sm:space-x-4 px-4 py-2 hover:bg-purple-600 transition-colors duration-200 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.$BV,{}),(0,lr.jsx)("span",{children:"Dashboard"})]})}),(0,lr.jsx)("li",{children:(0,lr.jsxs)(l.N_,{to:"/admin/user",className:"flex items-center space-x-2 sm:space-x-4 px-4 py-2 hover:bg-purple-600 transition-colors duration-200 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.K9B,{}),(0,lr.jsx)("span",{children:"User"})]})}),(0,lr.jsx)("li",{children:(0,lr.jsxs)(l.N_,{to:"/admin/recruiters",className:"flex items-center space-x-2 sm:space-x-4 px-4 py-2 hover:bg-purple-600 transition-colors duration-200 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.YXz,{}),(0,lr.jsx)("span",{children:"Recruiters"})]})}),(0,lr.jsx)("li",{children:(0,lr.jsxs)(l.N_,{to:"/admin/subscription",className:"flex items-center space-x-2 sm:space-x-4 px-4 py-2 hover:bg-purple-600 transition-colors duration-200 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.Y4c,{}),(0,lr.jsx)("span",{children:"Subscription"})]})}),(0,lr.jsx)("li",{children:(0,lr.jsxs)(l.N_,{to:"/admin/jobpost",className:"flex items-center space-x-2 sm:space-x-4 px-4 py-2 hover:bg-purple-600 transition-colors duration-200 text-sm sm:text-base",children:[(0,lr.jsx)(Nr._yv,{}),(0,lr.jsx)("span",{children:"Job Post"})]})}),(0,lr.jsx)("li",{children:(0,lr.jsxs)(l.N_,{to:"/admin/userposts",className:"flex items-center space-x-2 sm:space-x-4 px-4 py-2 hover:bg-purple-600 transition-colors duration-200 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.Nhm,{}),(0,lr.jsx)("span",{children:"User Posts"})]})})]})})]}),e&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 md:hidden z-30",onClick:t})]})},Or=()=>{const e=(0,n.Zp)(),s=(0,i.wA)(),[t,a]=(0,r.useState)(!1);return(0,lr.jsx)("header",{className:"bg-white shadow-md flex justify-end items-center px-2 sm:px-4 py-2 sm:py-4",children:(0,lr.jsxs)("div",{className:"relative",children:[(0,lr.jsx)("button",{className:"flex items-center bg-white space-x-2 cursor-pointer text-gray-600",onClick:()=>{a(!t)},children:(0,lr.jsx)(Nr.NBi,{className:"text-xl sm:text-2xl"})}),t&&(0,lr.jsx)("div",{className:"absolute right-0 mt-2 w-40 sm:w-48 bg-white rounded-md shadow-lg z-50",children:(0,lr.jsxs)("ul",{className:"py-1",children:[(0,lr.jsxs)("li",{onClick:()=>{e("/admin/profile")},className:"px-3 sm:px-4 py-2 hover:bg-gray-100 flex items-center space-x-2 cursor-pointer text-sm sm:text-base",children:[(0,lr.jsx)(Nr.NBi,{}),(0,lr.jsx)("span",{children:"Profile"})]}),(0,lr.jsxs)("li",{onClick:()=>{s(J()),e("/admin/login")},className:"px-3 sm:px-4 py-2 hover:bg-gray-100 flex items-center space-x-2 cursor-pointer text-sm sm:text-base",children:[(0,lr.jsx)(Nr.axc,{}),(0,lr.jsx)("span",{children:"Logout"})]})]})})]})})};var Tr=t(6058),$r=t(461);$r.t1.register($r.PP,$r.kc,$r.FN,$r.No,$r.hE,$r.m_,$r.s$);const Fr=e=>{let{title:s,value:t}=e;return(0,lr.jsxs)("div",{className:"bg-purple-100 p-4 rounded-lg",children:[(0,lr.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:s}),(0,lr.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:t})]})},Mr=()=>{const e=(0,n.Zp)(),s=(0,i.wA)(),{loading:t,error:a,isAuthenticatedAdmin:l,dashboardData:o}=(0,i.d4)((e=>e.admin));if((0,r.useEffect)((()=>{l?s(X()):e("/admin/login")}),[l,e,s]),t)return(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(a)return(0,lr.jsxs)("div",{className:"flex justify-center items-center h-screen",children:["Error: ",a]});const{userCount:c=0,recruiterCount:d=0,companyCount:u=0,totalRevenue:m=0,jobPostCount:p=0,userPostCount:x=0,revenueData:h=[]}=o||{},g={labels:h.map((e=>e.month)),datasets:[{label:"Revenue",data:h.map((e=>e.amount)),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.5)"}]};return(0,lr.jsxs)("div",{className:"flex min-h-screen",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col bg-gray-100 md:ml-0",children:[(0,lr.jsx)(Or,{}),(0,lr.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md m-4",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold text-purple-700 mb-6",children:"Dashboard Overview"}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:[(0,lr.jsx)(Fr,{title:"Total Users",value:c}),(0,lr.jsx)(Fr,{title:"Total Recruiters",value:d}),(0,lr.jsx)(Fr,{title:"Total Companies",value:u}),(0,lr.jsx)(Fr,{title:"Total Revenue",value:`${m.toFixed(2)}`}),(0,lr.jsx)(Fr,{title:"Total Job Posts",value:p}),(0,lr.jsx)(Fr,{title:"Total User Posts",value:x})]}),(0,lr.jsx)("div",{className:"mt-8",children:(0,lr.jsx)(Tr.N1,{options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Monthly Revenue"}}},data:g})})]})]})]})},Ur=e=>{let{children:s}=e;const{isAuthenticatedAdmin:t}=(0,i.d4)((e=>e.admin)),a=(0,i.wA)(),l=(0,n.Zp)(),o=localStorage.getItem("adminToken");return(0,r.useEffect)((()=>{(async()=>{if(!t&&o)try{await a(Q()).unwrap()}catch(e){a(J()),l("/admin/login")}})()}),[t,o,a,l]),t||o?(0,lr.jsx)(lr.Fragment,{children:s}):(0,lr.jsx)(n.C5,{to:"/admin/login",replace:!0})},qr=()=>{const[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(""),[o,c]=(0,r.useState)({email:"",password:""}),d=(0,i.wA)(),u=(0,n.Zp)(),{loading:m,error:p,isAuthenticatedRecruiter:x,isApproved:h}=(0,i.d4)((e=>e.recruiter));return(0,r.useEffect)((()=>{x&&u("/recruiter/dashboard")}),[x,h,u]),(0,lr.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:(0,lr.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden max-w-4xl w-full flex flex-col md:flex-row",children:[(0,lr.jsx)("div",{className:"bg-purple-600 w-full md:w-2/5 p-8 flex items-center justify-center",children:(0,lr.jsxs)("h1",{className:"text-white text-6xl font-bold",children:[(0,lr.jsx)("span",{className:"text-9xl",children:"4"}),"JOBS"]})}),(0,lr.jsxs)("div",{className:"w-full md:w-3/5 p-8",children:[(0,lr.jsx)("h2",{className:"text-3xl font-semibold text-purple-600 mb-6",children:"Log In"}),(0,lr.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),(()=>{const s={email:"",password:""};return/^[a-zA-Z0-9._-]+@[a-z]+\.[a-z]{2,}$/.test(e)||(s.email="Please enter a valid email address."),/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(t)||(s.password="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."),c(s),!s.email&&!s.password})()&&(p&&d(je()),d(oe({email:e,password:t})))},className:"space-y-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("input",{type:"email",value:e,onChange:e=>s(e.target.value),placeholder:"Username",className:"w-full px-4 py-3 rounded-full bg-purple-50 border border-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",required:!0}),o.email&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.email})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("input",{type:"password",value:t,onChange:e=>a(e.target.value),placeholder:"Password",className:"w-full px-4 py-3 rounded-full bg-purple-50 border border-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent",required:!0}),o.password&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.password})]}),(0,lr.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-purple-600 text-white py-3 rounded-full hover:bg-purple-700 transition duration-300 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-opacity-50",children:m?"Logging in...":"Submit"})]}),p&&(0,lr.jsx)("p",{className:"text-red-500 mt-4 text-center",children:p}),(0,lr.jsxs)("div",{className:"mt-6 text-center",children:[(0,lr.jsx)("p",{className:"text-gray-600",children:"Don't have an account?"}),(0,lr.jsx)(l.N_,{to:"/recruiter/signup",className:"text-purple-600 hover:underline",children:"Sign up here"})]})]})]})})},Lr=()=>{const[e,s]=(0,r.useState)({name:"",companyName:"",phone:"",email:"",password:"",governmentId:null}),[t,a]=(0,r.useState)({email:"",phone:"",password:"",governmentId:""}),l=(0,i.wA)(),o=(0,n.Zp)(),{error:c,loading:d,isAuthenticatedRecruiter:u}=(0,i.d4)((e=>e.recruiter));(0,r.useEffect)((()=>{u&&o("/recruiter/dashboard")}),[u,o]);const m=t=>{s({...e,[t.target.name]:t.target.value})};return(0,lr.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,lr.jsx)("div",{className:"w-full max-w-4xl overflow-hidden rounded-lg bg-white shadow-xl",children:(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,lr.jsxs)("div",{className:"bg-purple-600 p-12 md:w-2/5",children:[(0,lr.jsx)("div",{className:"text-8xl font-bold text-white opacity-50",children:"4"}),(0,lr.jsx)("div",{className:"mt-4 text-4xl font-semibold text-white",children:"JOBS"})]}),(0,lr.jsxs)("div",{className:"p-12 md:w-3/5",children:[(0,lr.jsx)("h2",{className:"mb-6 text-3xl font-semibold text-purple-600",children:"Recruiter Registration"}),(0,lr.jsxs)("form",{className:"space-y-4",onSubmit:async s=>{if(s.preventDefault(),(()=>{const s={name:"",companyName:"",email:"",phone:"",password:"",governmentId:""};if(e.name.trim().length<3?s.name="Full Name must be at least 3 characters long.":e.name.trim()||(s.name="Full Name is required."),e.companyName.trim().length<3?s.companyName="Company Name must be at least 3 characters long.":e.companyName.trim()||(s.companyName="Company Name is required."),/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.email)||(s.email="Please enter a valid email address."),/^\d{10}$/.test(e.phone)||(s.phone="Please enter a valid phone number with 10 digits."),/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(e.password)||(s.password="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."),e.governmentId){const t=2097152;["image/jpeg","image/png","image/webp","application/pdf"].includes(e.governmentId.type)?e.governmentId.size>t&&(s.governmentId="File size must be less than 2 MB."):s.governmentId="Please upload a valid file (JPEG, PNG, PDF, WEBP)."}else s.governmentId="Please upload a government ID.";return a(s),!(s.name||s.companyName||s.email||s.phone||s.password||s.governmentId)})()){c&&l(je());const s=new FormData;s.append("name",e.name),s.append("companyName",e.companyName),s.append("phone",e.phone),s.append("email",e.email),s.append("password",e.password),e.governmentId&&s.append("governmentId",e.governmentId);try{await l(ie(s)).unwrap(),o("/recruiter/verify-otp",{state:{email:e.email}})}catch(e){console.error("Error registering:",e)}}},children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Full Name"}),(0,lr.jsx)("input",{name:"name",value:e.name,onChange:m,placeholder:"Full Name",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Company Name"}),(0,lr.jsx)("input",{name:"companyName",value:e.companyName,onChange:m,placeholder:"Company Name",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Phone"}),(0,lr.jsx)("input",{name:"phone",value:e.phone,onChange:m,placeholder:"Phone",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),t.phone&&(0,lr.jsx)("p",{className:"mt-1 text-xs text-red-500",children:t.phone})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Email"}),(0,lr.jsx)("input",{name:"email",value:e.email,onChange:m,placeholder:"Email",type:"email",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),t.email&&(0,lr.jsx)("p",{className:"mt-1 text-xs text-red-500",children:t.email})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Password"}),(0,lr.jsx)("input",{name:"password",value:e.password,onChange:m,placeholder:"Password",type:"password",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none",required:!0}),t.password&&(0,lr.jsx)("p",{className:"mt-1 text-xs text-red-500",children:t.password})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Government ID"}),(0,lr.jsx)("input",{name:"governmentId",type:"file",onChange:t=>{t.target.files&&t.target.files[0]&&s({...e,governmentId:t.target.files[0]})},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-purple-500 focus:outline-none file:mr-4 file:rounded-md file:border-0 file:bg-purple-50 file:py-2 file:px-4 file:text-sm file:font-semibold file:text-purple-700 hover:file:bg-purple-100",required:!0}),t.governmentId&&(0,lr.jsx)("p",{className:"mt-1 text-xs text-red-500",children:t.governmentId})]}),(0,lr.jsx)("button",{type:"submit",disabled:d,className:"w-full rounded-md bg-purple-600 py-2 text-sm font-semibold text-white transition duration-200 hover:bg-purple-700 focus:outline-none disabled:opacity-50",children:d?"Registering...":"Register"}),c&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500",children:c})]})]})]})})})};var _r=t(3536);const Vr=e=>{let{results:s,onSelectUser:t}=e;return(0,lr.jsx)("div",{className:"bg-white border border-gray-300 rounded-md shadow-lg max-h-80 overflow-y-auto",children:s.map((e=>(0,lr.jsx)("div",{className:"p-3 hover:bg-purple-50 cursor-pointer transition duration-150 ease-in-out",onClick:()=>t(e.id),children:(0,lr.jsxs)("div",{className:"flex items-center",children:[e.profileImage?(0,lr.jsx)("img",{src:e.profileImage,alt:e.name,className:"w-10 h-10 rounded-full mr-3 object-cover"}):(0,lr.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-200 flex items-center justify-center mr-3",children:(0,lr.jsx)("span",{className:"text-purple-600 font-semibold text-lg",children:e.name.charAt(0).toUpperCase()})}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"font-semibold text-purple-800",children:e.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]})]})},e.id)))})},Wr=()=>{const[e,s]=(0,r.useState)(!1),[t,a]=(0,r.useState)(""),[l,o]=(0,r.useState)(!1),c=(0,i.wA)(),d=(0,n.Zp)(),u=(0,i.d4)((e=>{var s;return null===(s=e.recruiter)||void 0===s?void 0:s.recruiter.id})),m=(0,i.d4)((e=>e.recruiterSearch.users)),p=(0,i.d4)((e=>e.recruiterSearch.loading)),x=(0,r.useRef)(null),h=(0,_r.debounce)((e=>{e.length>=3&&u?c(ft({query:e,userId:u})):c(bt())}),300);(0,r.useEffect)((()=>(h(t),()=>{h.cancel()})),[h,t,u]),(0,r.useEffect)((()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const g=()=>{c(ge()),d("/recruiter/login")},f=()=>{d("/recruiter/profile"),s(!1)},j=()=>{u&&c(ve(u)),d("/recruiter/jobs")},b=()=>{d("/recruiter/messages")};return(0,lr.jsxs)("header",{className:"bg-white shadow-md p-4 flex justify-between items-center h-16",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)("button",{onClick:()=>{d("/recruiter/dashboard")},children:(0,lr.jsx)("img",{src:"../../../logo.png",alt:"Logo",className:"h-12 w-12 md:h-16 md:w-16"})}),(0,lr.jsx)("span",{className:"text-purple-700 font-semibold text-lg ml-2",children:"4 Jobs Recruiter"})]}),(0,lr.jsxs)("div",{className:"flex-grow mx-4 relative",ref:x,children:[(0,lr.jsxs)("div",{className:"relative w-full max-w-lg mx-auto",children:[(0,lr.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Search users (min. 3 characters)",value:t,onChange:e=>{a(e.target.value),o(!0)}}),t&&(0,lr.jsx)("button",{className:"absolute right-12 top-2 text-gray-500 hover:text-gray-700",onClick:()=>{a(""),c(bt()),o(!1)},children:(0,lr.jsx)(xr.g,{icon:hr.GRI,className:"h-5 w-5"})}),(0,lr.jsx)(xr.g,{icon:hr.MjD,className:"absolute right-3 top-3 text-gray-500"})]}),l&&m&&m.length>0&&(0,lr.jsx)("div",{className:"absolute z-10 w-full max-w-lg mx-auto mt-2",children:(0,lr.jsx)(Vr,{results:m,onSelectUser:e=>{d(`/recruiter/contestant/${e}`),o(!1)}})}),p&&(0,lr.jsx)("div",{className:"absolute z-10 w-full max-w-lg mx-auto mt-2 bg-white p-2 text-center",children:"Loading..."}),!p&&l&&m&&0===m.length&&(0,lr.jsx)("div",{className:"absolute z-10 w-full max-w-lg mx-auto mt-2 bg-white p-2 text-center",children:"No results found"})]}),(0,lr.jsx)("button",{className:"md:hidden text-gray-600 focus:outline-none",onClick:()=>s(!e),children:(0,lr.jsx)(xr.g,{icon:hr.ckx,className:"h-6 w-6"})}),(0,lr.jsxs)("nav",{className:"hidden md:flex space-x-6 items-center",children:[(0,lr.jsxs)("button",{onClick:j,className:"flex items-center text-purple-600 hover:text-gray-600 mb-2",children:[(0,lr.jsx)(xr.g,{icon:hr.u4D,className:"h-6 w-6 mr-2"}),(0,lr.jsx)("span",{className:"text-sm",children:"ADD JOBS"})]}),(0,lr.jsxs)("button",{onClick:b,className:"flex items-center text-purple-600 hover:text-gray-600 mb-2",children:[(0,lr.jsx)(xr.g,{icon:hr.q9p,className:"h-6 w-6 mr-2"}),(0,lr.jsx)("span",{className:"text-sm",children:"Messages"})]}),(0,lr.jsxs)("button",{className:"text-purple-600 hover:text-gray-600",onClick:f,children:[(0,lr.jsx)(xr.g,{icon:hr.X46,className:"h-6 w-6"}),(0,lr.jsx)("span",{className:"text-xs",children:"Profile"})]}),(0,lr.jsxs)("button",{className:"text-purple-600 hover:text-gray-600",onClick:g,children:[(0,lr.jsx)(xr.g,{icon:hr.X46,className:"h-6 w-6"}),(0,lr.jsx)("span",{className:"text-xs",children:"Logout"})]})]}),e&&(0,lr.jsxs)("div",{className:"absolute top-16 right-0 w-48 bg-white shadow-lg rounded-md p-4 md:hidden",children:[(0,lr.jsxs)("button",{className:"flex items-center text-purple-600 hover:text-gray-600 mb-2",onClick:j,children:[(0,lr.jsx)(xr.g,{icon:hr.u4D,className:"h-6 w-6 mr-2"}),(0,lr.jsx)("span",{className:"text-sm",children:"ADD JOBS"})]}),(0,lr.jsxs)("button",{className:"flex items-center text-purple-600 hover:text-gray-600 mb-2",onClick:b,children:[(0,lr.jsx)(xr.g,{icon:hr.q9p,className:"h-6 w-6 mr-2"}),(0,lr.jsx)("span",{className:"text-sm",children:"Messages"})]}),(0,lr.jsxs)("button",{className:"text-purple-600 hover:text-gray-600 mb-2",onClick:f,children:[(0,lr.jsx)(xr.g,{icon:hr.X46,className:"h-6 w-6 mr-2"}),(0,lr.jsx)("span",{className:"text-sm",children:"Profile"})]}),(0,lr.jsxs)("button",{className:"flex items-center text-purple-600 hover:text-gray-600",onClick:g,children:[(0,lr.jsx)(xr.g,{icon:hr.X46,className:"h-6 w-6 mr-2"}),(0,lr.jsx)("span",{className:"text-sm",children:"Logout"})]})]})]})};var Br=t(4459),Jr=t(3190),Zr=t(8006),Gr=t(6376),Hr=t(8646);const Yr=()=>{const{recruiter:e}=(0,i.d4)(ye);return(0,lr.jsxs)("aside",{className:"hidden md:block shadow-md rounded-lg p-4 bg-white",children:[(0,lr.jsxs)("div",{className:"text-center mb-4",children:[(0,lr.jsx)("div",{className:"w-20 h-20 rounded-full bg-purple-100 mx-auto mb-2 flex items-center justify-center",children:(0,lr.jsx)(Br.A,{size:40,className:"text-purple-600"})}),(0,lr.jsx)("div",{className:"text-purple-800 text-xl md:text-2xl font-bold",children:(null==e?void 0:e.name)||"Recruiter"}),(0,lr.jsx)("p",{className:"text-purple-600 mt-2 text-xs md:text-sm lg:text-base",children:null==e?void 0:e.email})]}),(0,lr.jsxs)("div",{className:"border-t border-purple-200 mt-4 pt-4",children:[(0,lr.jsxs)("div",{className:"flex items-center text-purple-700 mb-2 text-sm md:text-base",children:[(0,lr.jsx)(Jr.A,{size:16,className:"mr-2"}),(0,lr.jsxs)("p",{children:["Company: ",(0,lr.jsx)("span",{className:"font-bold text-purple-900",children:null==e?void 0:e.companyName})]})]}),(0,lr.jsxs)("div",{className:"flex items-center text-purple-700 mb-2",children:[(0,lr.jsx)(Zr.A,{size:16,className:"mr-2"}),(0,lr.jsxs)("p",{children:["Location: ",(0,lr.jsx)("span",{className:"font-bold text-purple-900",children:null==e?void 0:e.location})]})]}),(0,lr.jsxs)("div",{className:"flex items-center text-purple-700 mb-2",children:[(0,lr.jsx)(Gr.A,{size:16,className:"mr-2"}),(0,lr.jsxs)("p",{children:["Subscribed: ",(0,lr.jsx)("span",{className:"font-bold text-purple-900",children:null!=e&&e.subscribed?"Yes":"No"})]})]}),(0,lr.jsxs)("div",{className:"flex items-center text-purple-700",children:[(0,lr.jsx)(Hr.A,{size:16,className:"mr-2"}),(0,lr.jsxs)("p",{children:["Plan: ",(0,lr.jsx)("span",{className:"font-bold text-purple-900",children:null!=e&&e.subscribed?null==e?void 0:e.planDuration:"No plans subscribed"})]})]})]})]})};var Kr=t(1527),Xr=t(5088);const Qr=e=>{let{jobs:s}=e;return(0,lr.jsx)("div",{className:"space-y-6",children:s.map((e=>{var s;return(0,lr.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 hover:shadow-lg transition-shadow duration-300 border-l-4 border-purple-600",children:[(0,lr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold text-purple-800 mb-2",children:e.title}),(0,lr.jsx)("p",{className:"text-purple-600 mb-2",children:null===(s=e.company)||void 0===s?void 0:s.name}),(0,lr.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-purple-500 mb-4",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Zr.A,{size:16,className:"mr-1"}),e.location]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Jr.A,{size:16,className:"mr-1"}),e.wayOfWork]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Kr.A,{size:16,className:"mr-1"}),"",e.salaryRange.min.toLocaleString()," - ",e.salaryRange.max.toLocaleString()]})]})]}),(0,lr.jsxs)("div",{className:"text-sm text-purple-500 flex items-center",children:["Posted on : ",(0,lr.jsx)(Xr.A,{size:16,className:"mr-1"}),new Date(e.createdAt||"").toLocaleDateString()]})]}),(0,lr.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,lr.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.skillsRequired.slice(0,5).map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded",children:e},s))),e.skillsRequired.length>5&&(0,lr.jsxs)("span",{className:"text-purple-500 text-xs",children:["+",e.skillsRequired.length-5," more"]})]}),(0,lr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,lr.jsx)(l.N_,{to:`/recruiter/jobPost/${e._id}`,className:"text-purple-600 hover:text-purple-800 font-medium text-sm",children:"View Details"}),(0,lr.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold "+("Open"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]})]},e._id)}))})},ea=()=>{const e=(0,i.wA)(),{posts:s,loading:t,error:a}=(0,i.d4)((e=>e.jobPosts));return(0,r.useEffect)((()=>{e(Se())}),[e]),t?(0,lr.jsx)("div",{className:"text-center py-4 text-purple-600",children:"Loading..."}):a?(0,lr.jsxs)("div",{className:"text-center py-4 text-red-500",children:["Error: ",a]}):(0,lr.jsxs)("main",{className:"container mx-auto px-4 py-4 md:py-8 bg-purple-50",children:[(0,lr.jsx)("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-bold mb-4 md:mb-6 text-purple-800",children:"Job Listings"}),(0,lr.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4 md:p-6",children:s.length>0?(0,lr.jsx)(Qr,{jobs:s}):(0,lr.jsx)("p",{className:"text-center text-purple-600 text-sm md:text-base",children:"No job postings available at the moment."})})]})},sa=()=>{const{isApproved:e}=(0,i.d4)((e=>e.recruiter)),{recruiter:s}=(0,i.d4)(ye),t=(0,i.wA)(),r=(0,n.Zp)();return e?(0,lr.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsxs)("div",{className:"grid grid-cols-12 gap-4 flex-1 p-4",children:[(0,lr.jsx)("div",{className:"hidden lg:block lg:col-span-2",children:(0,lr.jsx)(Yr,{})}),(0,lr.jsxs)("main",{className:"col-span-12 lg:col-span-10 bg-white p-6 rounded-lg shadow-md",children:[(0,lr.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-purple-600",children:["Welcome, ",null==s?void 0:s.name,"!"]}),(0,lr.jsx)(ea,{})]})]})]}):(0,lr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,lr.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[(0,lr.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-purple-600",children:"Approval Pending"}),(0,lr.jsx)("p",{className:"text-gray-600 mt-4 text-sm md:text-base",children:"Your recruiter account is under review. You will be able to access the dashboard once approved."}),(0,lr.jsx)("button",{onClick:()=>{t(ge()),r("/recruiter/login")},className:"mt-6 bg-purple-600 text-white py-2 px-4 rounded-lg shadow hover:bg-purple-700 transition duration-200 text-sm md:text-base",children:"Logout"})]})})},ta=e=>{let{children:s}=e;const{isAuthenticatedRecruiter:t}=(0,i.d4)((e=>e.recruiter)),a=(0,i.wA)(),l=(0,n.Zp)(),o=localStorage.getItem("recruiterToken");return(0,r.useEffect)((()=>{(async()=>{if(!t&&o)try{await a(xe()).unwrap()}catch(e){a(ge()),l("/recruiter/login")}})()}),[t,o,a,l]),t||o?(0,lr.jsx)(lr.Fragment,{children:s}):(0,lr.jsx)(n.C5,{to:"/recruiter/login",replace:!0})},ra=()=>{var e;const[s,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(30),[o,c]=(0,r.useState)(!0),d=(0,n.zy)(),u=(0,n.Zp)(),m=(0,i.wA)(),{error:p,isAuthenticatedRecruiter:x}=(0,i.d4)((e=>e.recruiter)),h=(null===(e=d.state)||void 0===e?void 0:e.email)||"";return(0,r.useEffect)((()=>{let e;return o&&a>0?e=setTimeout((()=>{l((e=>e-1))}),1e3):0===a&&c(!1),()=>clearTimeout(e)}),[o,a]),(0,r.useEffect)((()=>{x&&u("/recruiter/dashboard")}),[x,u]),(0,lr.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,lr.jsxs)("div",{className:"w-full max-w-md overflow-hidden rounded-lg bg-white shadow-xl p-8",children:[(0,lr.jsx)("h2",{className:"mb-6 text-3xl font-semibold text-purple-600 text-center",children:"Verify OTP"}),(0,lr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await m(ce({email:h,otp:s}))}catch(e){console.error("Error verifying OTP:",e)}},className:"space-y-4",children:[(0,lr.jsx)("input",{name:"otp",value:s,onChange:e=>{t(e.target.value)},placeholder:"Enter OTP",required:!0,className:"w-full rounded-md border border-gray-300 px-4 py-2 text-sm focus:border-purple-500 focus:outline-none"}),(0,lr.jsx)("button",{type:"submit",disabled:!o,className:"w-full rounded-md py-2 text-sm font-semibold text-white transition duration-200 "+(o?"bg-purple-600 hover:bg-purple-700":"bg-gray-300 cursor-not-allowed"),children:"Verify OTP"}),p&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500 text-center",children:p})]}),(0,lr.jsx)("div",{className:"mt-6 text-center",children:o?(0,lr.jsxs)("p",{className:"text-gray-700",children:["Resend OTP in ",a," seconds"]}):(0,lr.jsx)("button",{onClick:async()=>{try{await le(h),c(!0),l(30)}catch(e){console.error("Failed to resend OTP:",e)}},className:"mt-2 rounded-md bg-purple-600 py-2 text-sm font-semibold text-white hover:bg-purple-700 transition duration-200",children:"Resend OTP"})})]})})},aa=()=>{const e=(0,i.wA)(),{recruiters:s,error:t,loading:a,isAuthenticatedAdmin:l,token:o}=(0,i.d4)((e=>e.admin)),[c,d]=(0,r.useState)(1),[u,m]=(0,r.useState)("");(0,r.useEffect)((()=>{l&&o&&e(Z())}),[e,l,o]);const p=Math.ceil(s.length/8),x=s.filter((e=>e.name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())));return l?(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-100",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,lr.jsx)(Or,{}),(0,lr.jsx)("main",{className:"p-2 sm:p-4 md:p-6 flex-grow overflow-auto",children:(0,lr.jsxs)("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-lg shadow-md",children:[(0,lr.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-purple-800",children:"Recruiter List"}),a&&(0,lr.jsx)("p",{className:"text-purple-600",children:"Loading..."}),t&&(0,lr.jsx)("p",{className:"text-red-500",children:t}),(0,lr.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row",children:[(0,lr.jsxs)("div",{className:"relative flex-grow mb-2 sm:mb-0 sm:mr-2",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search recruiters...",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border rounded-lg text-gray-700 focus:outline-none focus:border-purple-500"}),u&&(0,lr.jsx)("button",{onClick:()=>{m("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-800",children:(0,lr.jsx)(Nr.QCr,{className:"text-sm sm:text-base"})})]}),(0,lr.jsxs)("button",{className:"bg-purple-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-purple-600 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.KSO,{className:"inline mr-1"})," Search"]})]}),(0,lr.jsx)("div",{className:"overflow-x-auto",children:(0,lr.jsxs)("table",{className:"min-w-full bg-white text-sm sm:text-base",children:[(0,lr.jsx)("thead",{className:"bg-purple-100",children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Name"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Email"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Phone"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Status"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Actions"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Government ID"})]})}),(0,lr.jsx)("tbody",{className:"divide-y divide-purple-200",children:x.slice(8*(c-1),8*c).map((s=>(0,lr.jsxs)("tr",{className:"hover:bg-purple-50",children:[(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.name}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.email}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.phone}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:(0,lr.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(s.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.isApproved?"Approved":"Pending"})}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:!s.isApproved&&(0,lr.jsxs)("button",{onClick:()=>(async s=>{try{await e(G(s)).unwrap(),e(Z())}catch(e){console.error("Failed to approve recruiter",e)}})(s.id),className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-1 sm:py-2 px-2 sm:px-4 rounded text-xs sm:text-sm inline-flex items-center",children:[(0,lr.jsx)(Nr.CMH,{className:"mr-1 sm:mr-2"})," Approve"]})}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.governmentId?(0,lr.jsxs)("button",{onClick:()=>((e,s)=>{const t=document.createElement("a"),r=`${e}`;t.href=r,t.setAttribute("download",`${s}-government-id`),document.body.appendChild(t),t.click(),document.body.removeChild(t)})(s.governmentId,s.name),className:"bg-purple-400 hover:bg-purple-800 text-white font-bold py-1 sm:py-2 px-2 sm:px-4 rounded text-xs sm:text-sm inline-flex items-center",children:[(0,lr.jsx)(Nr.WCW,{className:"mr-1 sm:mr-2"})," Download ID"]}):(0,lr.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"No ID uploaded"})})]},s._id)))})]})}),(0,lr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 sm:mt-6",children:[(0,lr.jsxs)("div",{className:"flex space-x-2 mb-2 sm:mb-0",children:[(0,lr.jsxs)("button",{onClick:()=>d((e=>Math.max(e-1,1))),className:"bg-purple-500 text-white px-3 sm:px-4 py-1 sm:py-2 rounded hover:bg-purple-600 disabled:opacity-50 flex items-center text-xs sm:text-sm",disabled:1===c,children:[(0,lr.jsx)(Nr._Jj,{className:"mr-1 sm:mr-2"})," Previous"]}),(0,lr.jsxs)("button",{onClick:()=>d((e=>Math.min(e+1,p))),className:"bg-purple-500 text-white px-3 sm:px-4 py-1 sm:py-2 rounded hover:bg-purple-600 disabled:opacity-50 flex items-center text-xs sm:text-sm",disabled:c===p,children:["Next ",(0,lr.jsx)(Nr.X6T,{className:"ml-1 sm:ml-2"})]})]}),(0,lr.jsxs)("span",{className:"text-xs sm:text-sm text-purple-600",children:["Page ",c," of ",p]})]})]})})]})]}):(0,lr.jsx)(n.C5,{to:"/admin/login"})},la=()=>(0,lr.jsx)("div",{className:"spinner-container",children:(0,lr.jsx)("div",{className:"loading-spinner"})});var na=t(7856),ia=t(5347),oa=t(1680),ca=t(2105),da=t(764);const ua=e=>{let{icon:s,title:t,content:r}=e;return(0,lr.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg shadow-md",children:[(0,lr.jsxs)("h4",{className:"font-semibold text-xl text-gray-800 flex items-center mb-4",children:[(0,lr.jsx)("span",{className:"mr-2 text-purple-600",children:s}),t]}),(0,lr.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:r})]})},ma=e=>{let{icon:s,title:t,content:r}=e;return(0,lr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg shadow-md flex items-start",children:[(0,lr.jsx)("div",{className:"mr-4 text-purple-600",children:s}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h4",{className:"font-semibold text-lg text-gray-800",children:t}),(0,lr.jsx)("p",{className:"text-gray-600 h-auto w-auto mt-1",children:r})]})]})},pa=e=>{let{title:s,icon:t,children:r}=e;return(0,lr.jsxs)("div",{className:"mt-8",children:[(0,lr.jsxs)("h3",{className:"text-2xl font-bold mb-4 flex items-center text-gray-800",children:[(0,lr.jsx)("span",{className:"mr-2 text-purple-600",children:t}),s]}),r]})},xa=e=>{let{certificate:s}=e;return(0,lr.jsxs)("div",{className:"border rounded-lg shadow-md overflow-hidden transition-transform transform hover:scale-105",children:[(0,lr.jsxs)("div",{className:"p-4 bg-gray-50",children:[(0,lr.jsx)("h4",{className:"font-semibold text-md text-gray-800",children:s.name}),(0,lr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Issued by ",s.issuingOrganization," on"," ",new Date(s.dateOfIssue).toLocaleDateString()]})]}),s.imageUrl&&(0,lr.jsx)("img",{src:`${s.imageUrl}`,alt:s.name,className:"w-full h-48 object-cover"})]})},ha=e=>{let{project:s}=e;return(0,lr.jsx)("div",{className:"border rounded-lg shadow-md overflow-hidden transition-transform transform hover:scale-105",children:(0,lr.jsxs)("div",{className:"p-4 bg-gray-50",children:[(0,lr.jsx)("h4",{className:"font-semibold text-md text-gray-800",children:s.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),(0,lr.jsxs)("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 mt-2 inline-flex items-center",children:[(0,lr.jsx)(da.A,{size:16,className:"mr-1"}),"View Project"]})]})})},ga=e=>{let{experience:s}=e;return(0,lr.jsx)("div",{className:"border rounded-lg shadow-md overflow-hidden transition-transform transform hover:scale-105",children:(0,lr.jsxs)("div",{className:"p-4 bg-gray-50",children:[(0,lr.jsx)("h4",{className:"font-semibold text-md text-gray-800",children:s.position}),(0,lr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Company: ",s.company]}),(0,lr.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Duration: ",s.startDate," - ",s.endDate]}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:s.description})]})})},fa=e=>{var s,t,a,l;let{children:o}=e;const c=(0,i.wA)(),d=(0,n.Zp)(),{userId:u}=(0,n.g)(),{user:m,loading:p}=(0,i.d4)((e=>e.auth));return(0,r.useEffect)((()=>{u&&c(y(u))}),[c,u]),p?(0,lr.jsx)(la,{}):m?(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)("div",{className:"container mx-auto m-5 px-4 sm:px-8 md:px-16 lg:px-24 xl:px-32",children:(0,lr.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,lr.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-300 p-6 text-white",children:(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row items-center",children:[(0,lr.jsx)("img",{src:null!=m&&m.profileImage?`${m.profileImage}`:"/default-profile.png",alt:"Profile",className:"rounded-full w-20 h-20 md:w-24 md:h-24 lg:w-32 lg:h-32 border-4 border-white shadow-lg"}),(0,lr.jsxs)("div",{className:"md:ml-6 mt-4 md:mt-0 text-center md:text-left",children:[(0,lr.jsx)("h2",{className:"text-2xl md:text-3xl font-bold",children:null==m?void 0:m.name}),(0,lr.jsx)("p",{className:"text-base md:text-lg mt-1",children:null==m?void 0:m.email}),(0,lr.jsx)("p",{className:"text-base md:text-lg mt-1",children:null!=m&&m.phone?m.phone:"Phone number not provided"}),(0,lr.jsxs)("div",{className:"mt-4 space-x-4",children:[(0,lr.jsx)("button",{className:"px-4 py-2 text-sm sm:text-base bg-white text-purple-600 rounded-full hover:bg-gray-100 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-opacity-50",onClick:()=>{u&&d(`/profile/update/${u}`)},children:"Update Profile"}),(0,lr.jsx)("button",{className:"px-4 py-2 text-sm sm:text-base bg-purple-500 text-white rounded-full hover:bg-purple-600 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-opacity-50",onClick:()=>{u&&d(`/posts/user/${u}`)},children:"View Posts"})]})]})]})}),(0,lr.jsxs)("div",{className:"p-6",children:[(0,lr.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,lr.jsx)(ua,{icon:(0,lr.jsx)(na.A,{}),title:"Bio",content:(null==m?void 0:m.bio)||"No bio available."}),(0,lr.jsx)(ua,{icon:(0,lr.jsx)(Br.A,{}),title:"About",content:(null==m?void 0:m.about)||"No details available."})]}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,lr.jsx)(ma,{icon:(0,lr.jsx)(Hr.A,{}),title:"Date of Birth",content:null!=m&&m.dateOfBirth?new Date(m.dateOfBirth).toLocaleDateString():"Not specified"}),(0,lr.jsx)(ma,{icon:(0,lr.jsx)(Br.A,{}),title:"Gender",content:(null==m?void 0:m.gender)||"Not specified"}),(0,lr.jsx)(ma,{icon:(0,lr.jsx)(ia.A,{}),title:"Skills",content:(null==m||null===(s=m.skills)||void 0===s?void 0:s.join(", "))||"No skills listed."})]}),(0,lr.jsx)(pa,{title:"Certificates",icon:(0,lr.jsx)(ia.A,{}),children:null!=m&&null!==(t=m.certificates)&&void 0!==t&&t.length?(0,lr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.certificates.map((e=>(0,lr.jsx)(xa,{certificate:e},e.id)))}):(0,lr.jsx)("p",{className:"text-gray-600",children:"No certificates listed."})}),(0,lr.jsx)(pa,{title:"Resume",icon:(0,lr.jsx)(oa.A,{}),children:null!=m&&m.resume?(0,lr.jsxs)("a",{href:`${m.resume}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition duration-300",children:[(0,lr.jsx)(oa.A,{className:"mr-2",size:20}),"Download Resume"]}):(0,lr.jsx)("p",{className:"text-gray-600",children:"No resume uploaded."})}),(0,lr.jsx)(pa,{title:"Projects",icon:(0,lr.jsx)(ca.A,{}),children:null!=m&&null!==(a=m.projects)&&void 0!==a&&a.length?(0,lr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.projects.map((e=>(0,lr.jsx)(ha,{project:e},e.id)))}):(0,lr.jsx)("p",{className:"text-gray-600",children:"No projects listed."})}),(0,lr.jsx)(pa,{title:"Experience",icon:(0,lr.jsx)(Jr.A,{}),children:null!=m&&null!==(l=m.experiences)&&void 0!==l&&l.length?(0,lr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.experiences.map((e=>(0,lr.jsx)(ga,{experience:e},e.id)))}):(0,lr.jsx)("p",{className:"text-gray-600",children:"No experience listed."})})]})]})}),o&&(0,lr.jsx)("div",{className:"mt-8",children:o})]}):(0,lr.jsx)("div",{className:"text-center text-gray-600 mt-10",children:"No user data available."})};var ja=t(1036);t(2342);const ba=()=>{var e,s,t;const a=(0,i.wA)(),{user:l}=(0,i.d4)((e=>e.auth)),[n,o]=(0,r.useState)({name:(null==l?void 0:l.name)||"",email:(null==l?void 0:l.email)||"",phone:(null==l||null===(e=l.phone)||void 0===e?void 0:e.toString())||"",bio:(null==l?void 0:l.bio)||"",about:(null==l?void 0:l.about)||"",dateOfBirth:(null==l||null===(s=l.dateOfBirth)||void 0===s?void 0:s.split("T")[0])||"",gender:(null==l?void 0:l.gender)||"",skills:(null==l||null===(t=l.skills)||void 0===t?void 0:t.join(", "))||"",profileImage:null}),[c,d]=(0,r.useState)({}),u=e=>{const{name:s,value:t}=e.target;o({...n,[s]:t}),d({...c,[s]:""})};return(0,lr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{let e=!0;const s={};return(n.name.length<2||n.name.length>50)&&(s.name="Name must be between 2 and 50 characters.",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(s.email="Please enter a valid email address.",e=!1),n.phone&&!/^\d{10}$/.test(n.phone)&&(s.phone="Please enter a valid 10-digit phone number.",e=!1),n.bio.length>1e3&&(s.bio="Bio must not exceed 1000 characters.",e=!1),n.about.length>1e3&&(s.about="About section must not exceed 1000 characters.",e=!1),n.dateOfBirth||(s.dateOfBirth="Date of Birth is required.",e=!1),n.skills.split(",").map((e=>e.trim())).length>10&&(s.skills="You can list a maximum of 10 skills.",e=!1),d(s),e})()&&l){const e=new FormData;Object.entries(n).forEach((s=>{let[t,r]=s;null!==r&&e.append(t,r)}));try{await a(k({userId:l.id,formData:e})),ja.oR.success("Profile updated successfully!")}catch(e){ja.oR.error("Failed to update profile. Please try again later.")}}},className:"space-y-6",children:[(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,lr.jsx)("input",{type:"text",id:"name",name:"name",value:n.name,onChange:u,className:`w-full px-3 py-2 border ${c.name?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.name&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.name})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,lr.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:u,className:`w-full px-3 py-2 border ${c.email?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.email&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.email})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,lr.jsx)("input",{type:"phone",id:"phone",name:"phone",value:n.phone,onChange:u,className:`w-full px-3 py-2 border ${c.phone?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.phone&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.phone})]}),(0,lr.jsxs)("div",{className:"md:col-span-2",children:[(0,lr.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,lr.jsx)("textarea",{id:"bio",name:"bio",rows:3,value:n.bio,onChange:u,className:`w-full px-3 py-2 border ${c.bio?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.bio&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.bio})]}),(0,lr.jsxs)("div",{className:"md:col-span-2",children:[(0,lr.jsx)("label",{htmlFor:"about",className:"block text-sm font-medium text-gray-700",children:"About"}),(0,lr.jsx)("textarea",{id:"about",name:"about",rows:5,value:n.about,onChange:u,className:`w-full px-3 py-2 border ${c.about?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.about&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.about})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,lr.jsx)("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:n.dateOfBirth,onChange:u,className:`w-full px-3 py-2 border ${c.dateOfBirth?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.dateOfBirth&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.dateOfBirth})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),(0,lr.jsxs)("select",{id:"gender",name:"gender",value:n.gender,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,lr.jsx)("option",{value:"",children:"Select Gender"}),(0,lr.jsx)("option",{value:"male",children:"Male"}),(0,lr.jsx)("option",{value:"female",children:"Female"}),(0,lr.jsx)("option",{value:"other",children:"Other"})]})]}),(0,lr.jsxs)("div",{className:"md:col-span-2",children:[(0,lr.jsx)("label",{htmlFor:"skills",className:"block text-sm font-medium text-gray-700",children:"Skills (comma-separated)"}),(0,lr.jsx)("input",{type:"text",id:"skills",name:"skills",value:n.skills,onChange:u,className:`w-full px-3 py-2 border ${c.skills?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`}),c.skills&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.skills})]}),(0,lr.jsxs)("div",{className:"md:col-span-2",children:[(0,lr.jsx)("label",{htmlFor:"profileImage",className:"block text-sm font-medium text-gray-700",children:"Profile Image"}),(0,lr.jsx)("input",{type:"file",id:"profileImage",name:"profileImage",onChange:e=>{const s=e.target.files;s&&s.length>0&&o({...n,profileImage:s[0]})},accept:"image/*",className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"})]})]}),(0,lr.jsx)("div",{children:(0,lr.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Update Profile"})})]})};var ya=t(797);const va=()=>{const e=(0,i.wA)(),{user:s}=(0,i.d4)((e=>e.auth)),[t,a]=(0,r.useState)(null);return(0,lr.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),s&&t)try{await e(I({userId:s.id,resume:t})),ja.oR.success("Resume updated successfully!")}catch(e){ja.oR.error("Failed to update resume. Please try again later.")}else ja.oR.error("Please select a resume file to upload.")},className:"space-y-6",children:[(0,lr.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 flex flex-col items-center justify-center",children:[(0,lr.jsx)(ya.A,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Click to select a file"}),(0,lr.jsx)("input",{type:"file",onChange:e=>{const s=e.target.files;if(s&&s.length>0){const e=s[0];if(!["application/pdf"].includes(e.type))return void ja.oR.error("Only PDF files are allowed.");if(e.size>5242880)return void ja.oR.error("File size must be less than 5 MB.");a(e)}},accept:".pdf,.doc,.docx",className:"hidden",id:"resume-upload"}),(0,lr.jsx)("label",{htmlFor:"resume-upload",className:"px-4 py-2 bg-purple-400 text-dark rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 cursor-pointer",children:"Select File"}),t&&(0,lr.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",t.name]})]}),(0,lr.jsx)("div",{className:"flex justify-end",children:(0,lr.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-500 text-dark rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:!t,children:"Upload Resume"})})]})};var Na=t(614),wa=t(1360);const Ca=()=>{const e=(0,i.wA)(),{user:s}=(0,i.d4)((e=>e.auth)),[t,a]=(0,r.useState)([]),[l,n]=(0,r.useState)({});(0,r.useEffect)((()=>{s&&Array.isArray(s.projects)&&a(s.projects)}),[s]);const o=(e,s,r)=>{const l=t.map(((t,a)=>a===e?{...t,[s]:r}:t));a(l)};return(0,lr.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),(()=>{const e={};let s=!0;return t.forEach(((t,r)=>{const a={};(!t.name||t.name.length<2||t.name.length>50)&&(a.name="Name must be between 2 and 50 characters.",s=!1),t.link&&!/^https?:\/\/[^\s]+$/.test(t.link)&&(a.link="Invalid URL format.",s=!1),t.description&&t.description.length>500&&(a.description="Description must not exceed 500 characters.",s=!1),t.imageUrl&&!/^https?:\/\/[^\s]+$/.test(t.imageUrl)&&(a.imageUrl="Invalid URL format.",s=!1),Object.keys(a).length&&(e[r]=a)})),n(e),s})()&&s)try{await e(S({userId:s.id,projects:t})),ja.oR.success("Projects updated successfully!")}catch(e){ja.oR.error("Failed to update projects. Please try again later.")}else ja.oR.error("Please fix the errors before submitting.")},className:"space-y-6",children:[(0,lr.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Projects"}),t.map(((e,s)=>{var r,i,c,d,u,m;return(0,lr.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 relative",children:[(0,lr.jsx)("button",{type:"button",onClick:()=>(e=>{const s=t.filter(((s,t)=>t!==e));a(s),n((s=>{const t={...s};return delete t[e],t}))})(s),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:(0,lr.jsx)(Na.A,{className:"w-5 h-5"})}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:`project-name-${s}`,className:"block text-sm font-medium text-gray-700",children:"Project Name"}),(0,lr.jsx)("input",{type:"text",id:`project-name-${s}`,value:e.name,onChange:e=>o(s,"name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent "+(null!==(r=l[s])&&void 0!==r&&r.name?"border-red-500":"")}),(null===(i=l[s])||void 0===i?void 0:i.name)&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:l[s].name})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:`project-link-${s}`,className:"block text-sm font-medium text-gray-700",children:"Project Link"}),(0,lr.jsx)("input",{type:"url",id:`project-link-${s}`,value:e.link,onChange:e=>o(s,"link",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent "+(null!==(c=l[s])&&void 0!==c&&c.link?"border-red-500":"")}),(null===(d=l[s])||void 0===d?void 0:d.link)&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:l[s].link})]}),(0,lr.jsxs)("div",{className:"md:col-span-2",children:[(0,lr.jsx)("label",{htmlFor:`project-description-${s}`,className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,lr.jsx)("textarea",{id:`project-description-${s}`,value:e.description,onChange:e=>o(s,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent "+(null!==(u=l[s])&&void 0!==u&&u.description?"border-red-500":""),rows:3}),(null===(m=l[s])||void 0===m?void 0:m.description)&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:l[s].description})]})]})]},`${e.id}-${s}`)})),(0,lr.jsxs)("div",{className:"flex justify-between",children:[(0,lr.jsxs)("button",{type:"button",onClick:()=>{a([...t,{id:Date.now().toString(),name:"",description:"",link:"",imageUrl:""}])},className:"flex items-center px-4 py-2 text-sm sm:text-base bg-purple-500 text-white rounded-md hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:[(0,lr.jsx)(wa.A,{className:"w-5 h-5 mr-2"}),"Add Project"]}),(0,lr.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm sm:text-base bg-purple-500 text-white rounded-md hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Update Projects"})]})]})};var ka=t(9989);const Sa=()=>{const e=(0,i.wA)(),{user:s}=(0,i.d4)((e=>e.auth)),t=s&&Array.isArray(s.certificates)?s.certificates.map((e=>({...e,file:null}))):[],[a,l]=(0,r.useState)(t),[n,o]=(0,r.useState)({id:"",name:"",issuingOrganization:"",dateOfIssue:"",imageUrl:"",file:null}),[c,d]=(0,r.useState)(null);(0,r.useEffect)((()=>{m()}),[]);const u=(e,s)=>{o((t=>({...t,[e]:s})))},m=()=>{o({id:Date.now().toString(),name:"",issuingOrganization:"",dateOfIssue:"",imageUrl:"",file:null}),d(null)};return(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-gray-800",children:"Certificates"}),(0,lr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:a.map(((e,s)=>(0,lr.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 relative",children:[(0,lr.jsx)("button",{type:"button",onClick:()=>(e=>{l(a.filter(((s,t)=>t!==e)))})(s),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,lr.jsx)(Na.A,{className:"w-5 h-5"})}),(0,lr.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-2 text-gray-800",children:e.name}),(0,lr.jsx)("p",{className:"text-gray-600 mb-1",children:e.issuingOrganization}),(0,lr.jsx)("p",{className:"text-sm md:text-base text-gray-500 mb-4",children:e.dateOfIssue}),(0,lr.jsxs)("button",{type:"button",onClick:()=>(e=>{o(a[e]),d(e)})(s),className:"inline-flex items-center px-3 py-2 text-sm md:text-base border border-transparent leading-4 font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors duration-200",children:[(0,lr.jsx)(ka.A,{className:"w-4 h-4 mr-2"}),"Edit"]})]},`${e.id}-${s}`)))}),(0,lr.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const{name:e,issuingOrganization:s,dateOfIssue:t}=n;return e&&s&&t?!(e.length>50||s.length>50)||(ja.oR.error("Certificate name and issuing organization must be less than 50 characters."),!1):(ja.oR.error("All fields are required."),!1)})()&&s){let t;null!==c?(t=a.map(((e,s)=>s===c?n:e)),d(null)):t=[...a,n];const r=t.map((e=>({file:e.file,details:{id:e.id,name:e.name,issuingOrganization:e.issuingOrganization,dateOfIssue:e.dateOfIssue,imageUrl:e.imageUrl}})));try{await e(A({userId:s.id,certificates:r})),l(t),m(),ja.oR.success("Certificates updated successfully!")}catch(e){ja.oR.error("Failed to update certificates. Please try again later.")}}},className:"bg-white shadow-md rounded-lg p-6",children:[(0,lr.jsx)("h3",{className:"text-2xl md:text-3xl font-semibold mb-6 text-gray-800",children:null!==c?"Edit Certificate":"Add New Certificate"}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Certificate Name"}),(0,lr.jsx)("input",{type:"text",id:"name",value:n.name,onChange:e=>u("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"issuingOrganization",className:"block text-sm font-medium text-gray-700 mb-1",children:"Issuing Organization"}),(0,lr.jsx)("input",{type:"text",id:"issuingOrganization",value:n.issuingOrganization,onChange:e=>u("issuingOrganization",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"dateOfIssue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Issue"}),(0,lr.jsx)("input",{type:"date",id:"dateOfIssue",value:n.dateOfIssue,onChange:e=>u("dateOfIssue",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"certificateFile",className:"block text-sm font-medium text-gray-700 mb-1",children:"Certificate File"}),(0,lr.jsx)("input",{type:"file",id:"certificateFile",onChange:e=>{const s=e.target.files?e.target.files[0]:null;o((e=>({...e,file:s})))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",accept:"image/*,application/pdf"})]})]}),(0,lr.jsx)("div",{className:"mt-6",children:(0,lr.jsx)("button",{type:"submit",className:"w-full md:w-auto px-6 py-3 bg-purple-600 text-white font-medium rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors duration-200",children:null!==c?"Update Certificate":"Add Certificate"})})]})]})},Aa=()=>{var e;const s=(0,i.wA)(),{user:t,error:a}=(0,i.d4)((e=>e.auth)),[l,n]=(0,r.useState)(null!==(e=null==t?void 0:t.experiences)&&void 0!==e?e:[]),[o,c]=(0,r.useState)({id:"",title:"",company:"",startDate:"",endDate:"",currentlyWorking:!1,description:""}),[d,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{t&&Array.isArray(t.experiences)?n(t.experiences):n([])}),[t]);const m=(e,s)=>{c((t=>({...t,[e]:s})))};return(0,lr.jsxs)("div",{children:[(0,lr.jsx)(ja.N9,{}),(0,lr.jsxs)("div",{className:"space-y-8",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Your Experiences"}),a&&(0,lr.jsx)("p",{className:"text-red-500",children:a}),(0,lr.jsx)("div",{className:"space-y-4",children:l.length>0?l.map(((e,r)=>(0,lr.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6 relative",children:[(0,lr.jsx)("button",{type:"button",onClick:()=>(async e=>{const r=l.filter(((s,t)=>t!==e));n(r);try{var a;await s(P({userId:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:"",experiences:r})),ja.oR.success("Experience removed successfully!")}catch(e){ja.oR.error("Failed to remove experience. Please try again later.")}})(r),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:(0,lr.jsx)(Na.A,{className:"w-5 h-5"})}),(0,lr.jsx)("h3",{className:"text-lg font-bold",children:e.title}),(0,lr.jsx)("p",{className:"text-gray-600",children:e.company}),(0,lr.jsxs)("p",{className:"text-sm text-gray-500",children:[e.startDate," -"," ",e.currentlyWorking?"Present":e.endDate]}),(0,lr.jsx)("p",{className:"mt-2",children:e.description}),(0,lr.jsx)("button",{type:"button",onClick:()=>(e=>{c(l[e]),u(e)})(r),className:"mt-4 bg-purple-500 text-white py-1 px-3 rounded-lg hover:bg-purple-600 transition duration-300",children:"Edit"})]},e.id))):(0,lr.jsx)("p",{children:"No experiences added yet."})}),(0,lr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(e=>{const{title:s,company:t,startDate:r,endDate:a,currentlyWorking:l,description:n}=e,i=/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{4}$/i;return s&&t&&r&&n?/^[a-zA-Z0-9\s]{1,30}$/.test(s)?/^[a-zA-Z0-9\s]{1,20}$/.test(t)?i.test(r)?l||a?l||!a||i.test(a)?a&&new Date(r)>new Date(a)?(ja.oR.error("End date cannot be earlier than the start date."),!1):!(n.length>500&&(ja.oR.error("Job description must be less than 500 characters."),1)):(ja.oR.error("End date must be in the format 'MMM YYYY' (e.g., Dec 2022)."),!1):(ja.oR.error("Please provide an end date or check 'Currently Working'."),!1):(ja.oR.error("Start date must be in the format 'MMM YYYY' (e.g., Jan 2020)."),!1):(ja.oR.error("Company name must be 1-20 characters and alphanumeric."),!1):(ja.oR.error("Job title must be 1-30 characters and alphanumeric."),!1):(ja.oR.error("All fields except 'End Date' are required."),!1)})(o))return;let r;null!==d?(r=l.map(((e,s)=>s===d?o:e)),u(null)):r=[...l,{...o,id:Date.now().toString()}],n(r),c({id:"",title:"",company:"",startDate:"",endDate:"",currentlyWorking:!1,description:""});try{var a;await s(P({userId:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:"",experiences:r})),ja.oR.success("Experiences updated successfully!")}catch(e){ja.oR.error("Failed to update experiences. Please try again later.")}},className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[(0,lr.jsx)("h3",{className:"text-lg font-bold mb-4",children:null!==d?"Edit Experience":"Add New Experience"}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title"}),(0,lr.jsx)("input",{type:"text",id:"title",value:o.title,onChange:e=>m("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),(0,lr.jsx)("input",{type:"text",id:"company",value:o.company,onChange:e=>m("company",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,lr.jsx)("input",{type:"text",id:"startDate",value:o.startDate,onChange:e=>m("startDate",e.target.value),placeholder:"e.g., Jan 2020",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,lr.jsx)("input",{type:"text",id:"endDate",value:o.endDate,onChange:e=>m("endDate",e.target.value),placeholder:o.currentlyWorking?"Currently Working":"e.g., Dec 2022",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:o.currentlyWorking})]}),(0,lr.jsxs)("div",{className:"sm:col-span-2",children:[(0,lr.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Description"}),(0,lr.jsx)("textarea",{id:"description",value:o.description,onChange:e=>m("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:4})]}),(0,lr.jsx)("div",{className:"sm:col-span-2",children:(0,lr.jsxs)("label",{className:"inline-flex items-center",children:[(0,lr.jsx)("input",{type:"checkbox",checked:o.currentlyWorking,onChange:e=>m("currentlyWorking",e.target.checked),className:"rounded border-gray-300 text-purple-500 focus:ring-purple-500"}),(0,lr.jsx)("span",{className:"ml-2",children:"Currently Working Here"})]})})]}),(0,lr.jsx)("div",{className:"mt-6 text-right",children:(0,lr.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition duration-300",children:null!==d?"Update Experience":"Add Experience"})})]})]})]})},Pa=e=>{let{title:s,children:t}=e;return(0,lr.jsxs)("section",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold bg-gradient-to-r from-purple-600 to-purple-300 text-white p-4",children:s}),(0,lr.jsx)("div",{className:"p-6",children:t})]})},Ia=()=>(0,lr.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,lr.jsx)(fr,{}),(0,lr.jsxs)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl",children:[(0,lr.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-8 text-center text-gray-800",children:"Update Your Profile"}),(0,lr.jsxs)("div",{className:"space-y-12",children:[(0,lr.jsx)(Pa,{title:"Personal Information",children:(0,lr.jsx)(ba,{})}),(0,lr.jsx)(Pa,{title:"Resume",children:(0,lr.jsx)(va,{})}),(0,lr.jsx)(Pa,{title:"Projects",children:(0,lr.jsx)(Ca,{})}),(0,lr.jsx)(Pa,{title:"Certificates",children:(0,lr.jsx)(Sa,{})}),(0,lr.jsx)(Pa,{title:"Work Experience",children:(0,lr.jsx)(Aa,{})})]})]})]}),Ra=()=>{const{token:e,name:s,email:t,role:a}=(0,i.d4)((e=>e.admin));(0,r.useEffect)((()=>{}),[e]);const l={name:s,email:t,role:a};return(0,lr.jsxs)("div",{className:"flex",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1",children:[(0,lr.jsx)(Or,{}),(0,lr.jsxs)("div",{className:"container mx-auto p-4",children:[(0,lr.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Admin Profile"}),(0,lr.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6",children:(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{className:"flex flex-col",children:[(0,lr.jsx)("label",{className:"font-semibold text-gray-700",children:"Name"}),(0,lr.jsx)("input",{type:"text",value:l.name,readOnly:!0,className:"mt-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400"})]}),(0,lr.jsxs)("div",{className:"flex flex-col",children:[(0,lr.jsx)("label",{className:"font-semibold text-gray-700",children:"Email"}),(0,lr.jsx)("input",{type:"email",value:l.email,readOnly:!0,className:"mt-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400"})]}),(0,lr.jsxs)("div",{className:"flex flex-col md:col-span-2",children:[(0,lr.jsx)("label",{className:"font-semibold text-gray-700",children:"Role"}),(0,lr.jsx)("input",{type:"text",value:l.role,readOnly:!0,className:"mt-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400"})]})]})})]})]})]})},Ea=()=>{const e=(0,i.wA)(),{profile:s,loading:t,error:a,recruiter:l}=(0,i.d4)(ye),o=(0,n.Zp)();return(0,r.useEffect)((()=>{null!=l&&l.id&&e(ue(l.id))}),[e,l]),t?(0,lr.jsx)("div",{className:"text-center p-4",children:"Loading..."}):a?(0,lr.jsxs)("div",{className:"text-center p-4",children:["Error: ",a]}):(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(Wr,{}),(0,lr.jsxs)("div",{className:"max-w-4xl mx-auto p-6 lg:p-8 bg-white shadow-lg rounded-lg mt-6",children:[(0,lr.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-purple-700",children:"Recruiter Profile"}),(0,lr.jsxs)("div",{className:"space-y-4",children:[(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("strong",{children:"Name:"})," ",null==s?void 0:s.name]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("strong",{children:"Email:"})," ",null==s?void 0:s.email]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("strong",{children:"Company Name:"})," ",null==s?void 0:s.companyName]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("strong",{children:"Company Location:"})," ",null==s?void 0:s.location]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("strong",{children:"Phone:"})," ",null==s?void 0:s.phone]})]}),(null==s?void 0:s.governmentId)&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{children:(0,lr.jsx)("strong",{children:"Government ID:"})}),(0,lr.jsx)("img",{src:`${s.governmentId}`,alt:"Government ID",className:"w-24 h-auto border border-gray-300 rounded"})]}),(null==s?void 0:s.employeeIdImage)&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{children:(0,lr.jsx)("strong",{children:"Employee ID Image:"})}),(0,lr.jsx)("img",{src:`${s.employeeIdImage}`,alt:"Employee ID",className:"w-24 h-auto border border-gray-300 rounded"})]}),(0,lr.jsx)("button",{onClick:()=>o("/recruiter/update-profile"),className:"mt-4 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 w-full",children:"Update Profile"})]})]})]})},Da=()=>{const e=(0,i.wA)(),{profile:s,recruiter:t}=(0,i.d4)(ye),a=(0,n.Zp)(),[l,o]=(0,r.useState)({name:(null==s?void 0:s.name)||"",email:(null==s?void 0:s.email)||"",companyName:(null==s?void 0:s.companyName)||"",phone:(null==s?void 0:s.phone)||"",location:(null==s?void 0:s.location)||"",governmentId:null,employeeIdImage:null}),[c,d]=(0,r.useState)({name:"",email:"",companyName:"",phone:"",location:"",governmentId:"",employeeIdImage:""}),u=/^[a-zA-Z0-9._-]+@[a-z]+\.[a-z]{2,}$/,m=/^\d{10}$/,p=/^[a-zA-Z\s]{3,20}$/,x=/^[a-zA-Z\s,]{3,15}$/,h=e=>{const{name:s,value:t,files:r}=e.target;o(r?e=>({...e,[s]:r[0]}):e=>({...e,[s]:t}))};return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(Wr,{}),(0,lr.jsx)("div",{className:"max-w-4xl mx-auto p-6 lg:p-8 bg-white shadow-lg rounded-lg mt-6",children:(0,lr.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!(()=>{let e=!0;const s={name:"",email:"",companyName:"",phone:"",location:"",governmentId:"",employeeIdImage:""};if(p.test(l.name)||(s.name="Name must be 3-20 characters and contain only letters and spaces.",e=!1),u.test(l.email)||(s.email="Please enter a valid email address.",e=!1),p.test(l.companyName)||(s.companyName="Company name must be 3-20 characters and contain only letters and spaces.",e=!1),m.test(l.phone)||(s.phone="Phone number must be a valid 10-digit number.",e=!1),x.test(l.location)||(s.location="Location must be 3-15 characters and can contain letters, spaces, and commas.",e=!1),l.governmentId){const t=l.governmentId.name;/\.(jpg|jpeg|png|pdf|webp)$/i.test(t)||(s.governmentId="Government ID must be a valid jpg, jpeg, png, or pdf file.",e=!1)}if(l.employeeIdImage){const t=l.employeeIdImage.name;/\.(jpg|jpeg|png|pdf|webp)$/i.test(t)||(s.employeeIdImage="Employee ID Image must be a valid jpg, jpeg, png, or pdf file.",e=!1)}return d(s),e})())return void ja.oR.error("Please fix the errors in the form.");const r=new FormData;r.append("name",l.name),r.append("email",l.email),r.append("companyName",l.companyName),r.append("phone",l.phone),r.append("location",l.location),l.governmentId&&r.append("governmentId",l.governmentId),l.employeeIdImage&&r.append("employeeIdImage",l.employeeIdImage),e(me({recruiterId:null==t?void 0:t.id,profileData:r})).then((()=>{a("/recruiter/profile")}))},className:"space-y-4",children:[(0,lr.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-purple-700",children:"Update Profile"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block font-semibold",children:"Name:"}),(0,lr.jsx)("input",{type:"text",name:"name",value:l.name,onChange:h,className:`w-full border ${c.name?"border-red-500":"border-gray-300"} rounded-lg p-2`,disabled:!0}),c.name&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.name})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block font-semibold",children:"Email:"}),(0,lr.jsx)("input",{type:"email",name:"email",value:l.email,onChange:h,className:`w-full border ${c.email?"border-red-500":"border-gray-300"} rounded-lg p-2`,disabled:!0}),c.email&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.email})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block font-semibold",children:"Company Name:"}),(0,lr.jsx)("input",{type:"text",name:"companyName",value:l.companyName,onChange:h,className:`w-full border ${c.companyName?"border-red-500":"border-gray-300"} rounded-lg p-2`,required:!0}),c.companyName&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.companyName})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block font-semibold",children:"Company Location:"}),(0,lr.jsx)("input",{type:"text",name:"location",value:l.location,onChange:h,className:`w-full border ${c.location?"border-red-500":"border-gray-300"} rounded-lg p-2`,required:!0}),c.location&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.location})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block font-semibold",children:"Phone:"}),(0,lr.jsx)("input",{type:"text",name:"phone",value:l.phone,onChange:h,className:`w-full border ${c.phone?"border-red-500":"border-gray-300"} rounded-lg p-2`,required:!0}),c.phone&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.phone})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{className:"block font-semibold",children:"Employee ID Image:"}),(0,lr.jsx)("input",{type:"file",name:"employeeIdImage",onChange:h,className:"w-full p-2"}),c.employeeIdImage&&(0,lr.jsx)("p",{className:"text-red-500 text-sm",children:c.employeeIdImage})]}),(0,lr.jsx)("div",{children:(0,lr.jsx)("button",{type:"submit",className:"bg-purple-700 text-white py-2 px-4 rounded-lg hover:bg-purple-600",children:"Update Profile"})})]})})]})};var za=t(7719),Oa=t(7118),Ta=t(6151),$a=t(6140),Fa=t(6533),Ma=t(9855),Ua=t(5087);const qa=e=>{let{jobPosts:s,onDelete:t,onEdit:r,onToggleStatus:a,onViewContestants:l}=e;const i=(0,n.Zp)();return(0,lr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e=>{var s;return(0,lr.jsxs)("div",{className:`bg-white border ${e.isBlock?"border-red-500":"border-purple-200"} p-4 md:p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300`,children:[(0,lr.jsx)("h3",{className:"text-lg md:text-xl font-bold mb-2 text-purple-800",children:e.title}),e.isBlock&&(0,lr.jsxs)("div",{className:"flex items-center text-red-500 mb-2",children:[(0,lr.jsx)(za.A,{size:18,className:"mr-2"}),(0,lr.jsx)("span",{className:"font-semibold text-sm md:text-base",children:"Blocked by Admin"})]}),(0,lr.jsxs)("p",{className:"mb-2 text-gray-600 text-sm md:text-base",children:[e.description.substring(0,100),"..."]}),(0,lr.jsxs)("div",{className:"space-y-1 mb-2",children:[(0,lr.jsxs)("div",{className:"flex items-center text-gray-700 text-sm md:text-base",children:[(0,lr.jsx)(Jr.A,{size:18,className:"mr-1 text-purple-600"}),(0,lr.jsx)("span",{children:null===(s=e.company)||void 0===s?void 0:s.name})]}),(0,lr.jsxs)("div",{className:"flex items-center text-gray-700 text-sm md:text-base",children:[(0,lr.jsx)(Zr.A,{size:18,className:"mr-1 text-purple-600"}),(0,lr.jsx)("span",{children:e.location})]}),(0,lr.jsxs)("div",{className:"flex items-center text-gray-700 text-sm md:text-base",children:[(0,lr.jsx)(Kr.A,{size:18,className:"mr-1 text-purple-600"}),(0,lr.jsxs)("span",{children:["",e.salaryRange.min.toLocaleString()," - ",e.salaryRange.max.toLocaleString()]})]}),(0,lr.jsxs)("div",{className:"flex items-center text-gray-700 text-sm md:text-base",children:[(0,lr.jsx)(Oa.A,{size:18,className:"mr-1 text-purple-600"}),(0,lr.jsx)("span",{children:e.wayOfWork})]})]}),(0,lr.jsx)("div",{className:"mb-2",children:(0,lr.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+("Open"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["Open"===e.status?(0,lr.jsx)(Ta.A,{size:14,className:"mr-1"}):(0,lr.jsx)($a.A,{size:14,className:"mr-1"}),e.status]})}),(0,lr.jsxs)("div",{className:"flex flex-wrap justify-between mt-2 gap-2",children:[(0,lr.jsxs)("button",{onClick:()=>r(e),className:"flex items-center bg-purple-100 text-purple-700 px-3 py-1 rounded hover:bg-purple-200 transition-colors duration-300 text-sm md:text-base",children:[(0,lr.jsx)(Fa.A,{size:16,className:"mr-1"}),"Edit"]}),(0,lr.jsxs)("button",{onClick:()=>t(e._id),className:"flex items-center bg-purple-100 text-purple-700 px-3 py-1 rounded hover:bg-purple-200 transition-colors duration-300 text-sm md:text-base",children:[(0,lr.jsx)(Ma.A,{size:16,className:"mr-1"}),"Delete"]}),(0,lr.jsxs)("button",{onClick:()=>a(e),className:"flex items-center px-3 py-1 rounded transition-colors duration-300 text-sm md:text-base "+(e.status,"bg-purple-100 text-purple-700 hover:bg-purple-200"),children:["Open"===e.status?(0,lr.jsx)($a.A,{size:16,className:"mr-1"}):(0,lr.jsx)(Ta.A,{size:16,className:"mr-1"}),"Open"===e.status?"Close":"Reopen"]}),(0,lr.jsxs)("button",{onClick:()=>l(e._id),className:"flex items-center bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors duration-300 text-sm md:text-base",children:[(0,lr.jsx)(Ua.A,{size:16,className:"mr-1"}),"View Applicants"]}),(0,lr.jsxs)("button",{onClick:()=>{return s=e._id,void i(`/recruiter/jobPost/${s}`);var s},className:"flex items-center bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors duration-300 text-sm md:text-base",children:[(0,lr.jsx)(Ua.A,{size:16,className:"mr-1"}),"View Details"]})]})]},e._id)}))})};var La=t(7819),_a=t(2043);const Va=e=>{let{isOpen:s,onClose:t,onConfirm:r,title:a,message:l}=e;return s?(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-auto",children:[(0,lr.jsxs)("div",{className:"flex justify-between items-center border-b p-4",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold text-gray-900 break-words",children:a}),(0,lr.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 transition-colors duration-200","aria-label":"Close modal",children:(0,lr.jsx)(Na.A,{size:24})})]}),(0,lr.jsx)("div",{className:"p-6",children:(0,lr.jsx)("p",{className:"text-gray-600 break-words",children:l})}),(0,lr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 p-4 border-t",children:[(0,lr.jsx)("button",{onClick:t,className:"w-full sm:w-auto px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors duration-200",children:"Cancel"}),(0,lr.jsx)("button",{onClick:()=>{try{r(),t()}catch(e){e instanceof Error?console.error("Error in confirmation action:",e.message):console.error("An unknown error occurred during confirmation")}},className:"w-full sm:w-auto px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200",children:"Delete"})]})]})}):null},Wa=()=>{const e=(0,i.wA)(),s=(0,n.Zp)(),{posts:t,loading:a,error:l}=(0,i.d4)((e=>e.jobPosts)),{recruiter:o}=(0,i.d4)((e=>e.recruiter)),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null);(0,r.useEffect)((()=>{o&&o._id&&e(ve(o._id))}),[e,o]);const p=(0,r.useCallback)((async e=>{m(e),d(!0)}),[]),x=(0,r.useCallback)((async()=>{if(u)try{await e(Ce(u)).unwrap()}catch(e){console.error("Failed to delete job post:",e)}d(!1),m(null)}),[e,u]),h=(0,r.useCallback)((e=>{s(`/recruiter/jobs/edit/${e._id}`)}),[s]),g=(0,r.useCallback)((()=>{s("/recruiter/jobs/create")}),[s]),f=(0,r.useCallback)((s=>{const t={...s,status:"Open"===s.status?"Closed":"Open"};return e(we({id:s._id,postData:t})).unwrap()}),[e]),j=(0,r.useCallback)((e=>{s(`/recruiter/job-applicants/${e}`)}),[s]);return o?(0,lr.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,lr.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,lr.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,lr.jsx)("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold text-purple-900",children:"Job Posts"}),(0,lr.jsx)("div",{className:"flex space-x-4",children:(0,lr.jsxs)("button",{onClick:g,className:"bg-purple-600 text-white py-2 px-3 sm:px-4 rounded-lg hover:bg-purple-700 transition duration-300 flex items-center shadow-md text-sm sm:text-base",children:[(0,lr.jsx)(wa.A,{size:20,className:"mr-2"}),"Create New Job Post"]})})]}),a?(0,lr.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,lr.jsx)(_a.A,{className:"animate-spin h-12 w-12 text-purple-500"})}):l?(0,lr.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg shadow-md",role:"alert",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(La.A,{className:"h-6 w-6 mr-2"}),(0,lr.jsx)("p",{className:"font-bold",children:"Error"})]}),(0,lr.jsx)("p",{className:"mt-2",children:l})]}):0===t.length?(0,lr.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,lr.jsx)(La.A,{size:48,className:"text-yellow-500 mx-auto mb-4"}),(0,lr.jsx)("p",{className:"text-xl text-gray-800 font-semibold mb-2",children:"No Job Posts Available"}),(0,lr.jsx)("p",{className:"text-gray-600 mb-4",children:"Click 'Create New Job Post' to add your first job listing."}),(0,lr.jsxs)("button",{onClick:g,className:"bg-purple-600 text-white py-2 px-3 sm:px-4 rounded-lg hover:bg-purple-700 transition duration-300 inline-flex items-center text-sm sm:text-base",children:[(0,lr.jsx)(wa.A,{size:20,className:"mr-2"}),"Create New Job Post"]})]}):(0,lr.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,lr.jsx)(qa,{jobPosts:t,onDelete:p,onEdit:h,onToggleStatus:f,onViewContestants:j})})]}),(0,lr.jsx)(Va,{isOpen:c,onClose:()=>d(!1),onConfirm:x,title:"Delete Job Post",message:"Are you sure you want to delete this job post? This action cannot be undone."})]})]}):(0,lr.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[(0,lr.jsx)(La.A,{size:48,className:"text-yellow-500 mb-4"}),(0,lr.jsx)("p",{className:"text-xl text-gray-800 font-semibold mb-2",children:"Access Restricted"}),(0,lr.jsx)("p",{className:"text-gray-600",children:"Please log in to view job posts."})]})};var Ba=t(9461),Ja=t(5264),Za=t(5731),Ga=t(9384),Ha=t(9917);const Ya=e=>{var s,t;let{initialData:a,recruiterId:l,isEditing:n,onSubmit:o}=e;const{recruiter:c}=(0,i.d4)((e=>e.recruiter)),[d,u]=(0,r.useState)({title:"",description:"",company:{name:"",website:"",logo:""},location:"",salaryRange:{min:0,max:0},wayOfWork:"",skillsRequired:[],qualifications:[],status:"Open",recruiterId:c.id,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),[m,p]=(0,r.useState)({});(0,r.useEffect)((()=>{n&&a&&u({...a,salaryRange:a.salaryRange||{min:0,max:0},recruiterId:c.id})}),[a,n,c.id]);const x=e=>{const{name:s,value:t}=e.target;if(s.includes(".")){const[e,r]=s.split(".");u((s=>({...s,[e]:{...s[e],[r]:t}})))}else u((e=>({...e,[s]:t})))},h=(e,s)=>{const t=e.target.value;u((e=>({...e,[s]:t.split(",").map((e=>e.trim()))})))};return(0,lr.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=(e=>{var s,t;const r={};return e.title.trim()||(r.title="Job title is required"),e.description.trim()||(r.description="Job description is required"),null!==(s=e.company)&&void 0!==s&&s.name.trim()||(r.companyName="Company name is required"),null!==(t=e.company)&&void 0!==t&&t.website&&!/^https?:\/\/\S+$/.test(e.company.website)&&(r.companyWebsite="Invalid website URL"),e.location.trim()||(r.location="Location is required"),e.salaryRange.min>e.salaryRange.max&&(r.salaryRange="Minimum salary cannot be greater than maximum salary"),e.wayOfWork.trim()||(r.wayOfWork="Way of work is required"),0===e.skillsRequired.length&&(r.skillsRequired="At least one skill is required"),0===e.qualifications.length&&(r.qualifications="At least one qualification is required"),r})(d);p(s),0===Object.keys(s).length&&o(d)},className:"space-y-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"title",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Jr.A,{className:"mr-2 text-purple-600",size:20}),"Job Title"]}),(0,lr.jsx)("input",{type:"text",name:"title",id:"title",value:d.title,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base"}),m.title&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.title})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"description",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Ba.A,{className:"mr-2 text-purple-600",size:20}),"Job Description"]}),(0,lr.jsx)("textarea",{name:"description",id:"description",value:d.description,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",rows:4}),m.description&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.description})]}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"company.name",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Ja.A,{className:"mr-2 text-purple-600",size:20}),"Company Name"]}),(0,lr.jsx)("input",{type:"text",name:"company.name",id:"company.name",value:null===(s=d.company)||void 0===s?void 0:s.name,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"}),m.companyName&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.companyName})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"company.website",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Za.A,{className:"mr-2 text-purple-600",size:20}),"Company Website"]}),(0,lr.jsx)("input",{type:"text",name:"company.website",id:"company.website",value:null===(t=d.company)||void 0===t?void 0:t.website,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"}),m.companyWebsite&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.companyWebsite})]})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"location",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Zr.A,{className:"mr-2 text-purple-600",size:20}),"Location"]}),(0,lr.jsx)("input",{type:"text",name:"location",id:"location",value:d.location,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"}),m.location&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.location})]}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"salaryRange.min",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Kr.A,{className:"mr-2 text-purple-600",size:20}),"Minimum Salary"]}),(0,lr.jsx)("input",{type:"number",name:"salaryRange.min",id:"salaryRange.min",value:d.salaryRange.min,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"salaryRange.max",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Kr.A,{className:"mr-2 text-purple-600",size:20}),"Maximum Salary"]}),(0,lr.jsx)("input",{type:"number",name:"salaryRange.max",id:"salaryRange.max",value:d.salaryRange.max,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"})]})]}),m.salaryRange&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.salaryRange}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"wayOfWork",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Ga.A,{className:"mr-2 text-purple-600",size:20}),"Way of Work"]}),(0,lr.jsxs)("select",{name:"wayOfWork",id:"wayOfWork",value:d.wayOfWork,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500",children:[(0,lr.jsx)("option",{value:"",children:"Select work type"}),(0,lr.jsx)("option",{value:"Remote",children:"Remote"}),(0,lr.jsx)("option",{value:"On-site",children:"On-site"}),(0,lr.jsx)("option",{value:"Hybrid",children:"Hybrid"})]}),m.wayOfWork&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.wayOfWork})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"skillsRequired",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Oa.A,{className:"mr-2 text-purple-600",size:20}),"Skills Required (comma separated)"]}),(0,lr.jsx)("input",{type:"text",id:"skillsRequired",value:d.skillsRequired.join(", "),onChange:e=>h(e,"skillsRequired"),className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"}),m.skillsRequired&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.skillsRequired})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"qualifications",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Ha.A,{className:"mr-2 text-purple-600",size:20}),"Qualifications (comma separated)"]}),(0,lr.jsx)("input",{type:"text",id:"qualifications",value:d.qualifications.join(", "),onChange:e=>h(e,"qualifications"),className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500"}),m.qualifications&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.qualifications})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("label",{htmlFor:"status",className:"mb-1 font-medium text-gray-700 flex items-center",children:[(0,lr.jsx)(Ha.A,{className:"mr-2 text-purple-600",size:20}),"Status"]}),(0,lr.jsxs)("select",{name:"status",id:"status",value:d.status,onChange:x,className:"w-full p-2 border rounded focus:ring-purple-500 focus:border-purple-500",children:[(0,lr.jsx)("option",{value:"Open",children:"Open"}),(0,lr.jsx)("option",{value:"Closed",children:"Closed"})]})]}),(0,lr.jsxs)("button",{type:"submit",className:"w-full p-3 bg-purple-600 text-white rounded hover:bg-purple-700 transition duration-300 ease-in-out flex items-center justify-center text-sm md:text-base",children:[(0,lr.jsx)(Jr.A,{className:"mr-2",size:20}),n?"Update Job Post":"Create Job Post"]})]})};var Ka=t(781);const Xa=[{name:"Monthly",price:200,duration:"1 month"},{name:"3 Months",price:550,duration:"3 months"},{name:"Yearly",price:2e3,duration:"1 year"}],Qa=e=>{let{onSelectPlan:s}=e;return(0,lr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-8",children:Xa.map((e=>(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,lr.jsxs)("div",{className:"px-6 py-8 bg-purple-600 text-white text-center",children:[(0,lr.jsx)("h3",{className:"text-2xl font-bold",children:e.name}),(0,lr.jsxs)("div",{className:"mt-4 flex items-center justify-center",children:[(0,lr.jsxs)("span",{className:"text-4xl font-bold",children:["",e.price]}),(0,lr.jsxs)("span",{className:"ml-2 text-purple-200",children:["/",e.duration]})]})]}),(0,lr.jsx)("div",{className:"px-6 py-8",children:(0,lr.jsx)("button",{onClick:()=>s(e),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300",children:"Select Plan"})})]},e.name)))})},el=e=>{let{amount:s,planDuration:t,onSuccess:a,onFailure:l}=e;const n=(0,i.wA)(),[o,c]=(0,r.useState)(!1),{recruiter:d}=(0,i.d4)((e=>e.recruiter));(0,r.useEffect)((()=>{const e=document.createElement("script");return e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,e.onload=()=>c(!0),document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]);return(0,lr.jsx)("button",{onClick:()=>{if(!o)return void l("Razorpay script not loaded yet. Please try again.");if("function"!=typeof window.Razorpay)return void l("Razorpay is not available. Please check your internet connection and try again.");const e={key:"rzp_test_mRydipg2bgDZmQ",amount:100*s,currency:"INR",name:"4JOBS",description:`${t} Subscription`,handler:async function(e){try{const e=(e=>{const s=new Date;switch(e){case"1 month":return new Date(s.setMonth(s.getMonth()+1));case"3 months":return new Date(s.setMonth(s.getMonth()+3));case"1 year":return new Date(s.setFullYear(s.getFullYear()+1));default:return s}})(t),r={subscribed:!0,planDuration:t,expiryDate:e.toISOString(),subscriptionAmount:s};await(async(e,s)=>ae("PUT",`/update-subscription/${e}`,s))(d.id,r),n(pe(r)),a()}catch(e){console.error("Error updating subscription:",e),l("Payment successful, but failed to update subscription. Please contact support.")}},prefill:{name:"Recruiter Name",email:"recruiter@example.com"},theme:{color:"#7C3AED"}};try{new window.Razorpay(e).open()}catch(e){console.error("Error creating Razorpay instance:",e),l("Failed to initialize payment. Please try again.")}},className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300",disabled:!o,children:o?"Pay Now":"Loading..."})},sl=()=>{const e=(0,i.wA)(),s=(0,n.Zp)(),{recruiter:t}=(0,i.d4)((e=>e.recruiter)),[a,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),d=(0,r.useCallback)((()=>{if(t){const e=t.subscribed,s=t.expiryDate?new Date(t.expiryDate):null,r=!s||s<new Date;l(!(e&&!r))}}),[t]);return(0,r.useEffect)((()=>{d()}),[d]),t?(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl",children:a?(0,lr.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,lr.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-purple-700",children:"Subscribe to Create Job Posts"}),(0,lr.jsx)(Qa,{onSelectPlan:e=>{c(e)}}),o&&(0,lr.jsx)("div",{className:"mt-8 text-center",children:(0,lr.jsx)(el,{amount:o.price,planDuration:o.duration,onSuccess:()=>{l(!1),ja.oR.success("Subscription successful! You can now create job posts."),d()},onFailure:e=>{ja.oR.error(`Payment failed: ${e}`)}})})]}):(0,lr.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,lr.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-purple-700 flex items-center",children:[(0,lr.jsx)(Ka.A,{className:"mr-2 w-6 h-6 sm:w-8 sm:h-8"})," Create New Job Post"]}),(0,lr.jsx)(Ya,{recruiterId:t.id,isEditing:!1,onSubmit:async r=>{if(t&&t.id){if(!t.subscribed||t.expiryDate&&new Date(t.expiryDate)<new Date)return ja.oR.error("Please subscribe to a plan to create job posts."),void l(!0);try{const a={...r,recruiterId:t.id};await e(Ne({recruiterId:t.id,postData:a})).unwrap(),ja.oR.success("Job post created successfully"),s("/recruiter/jobs")}catch(e){console.error("Failed to create job post:",e),ja.oR.error("Failed to create job post. Please try again.")}}else ja.oR.error("Recruiter ID is not available. Please log in.")}})]})})]}):(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen text-purple-700",children:"Please log in to create a job post."})};var tl=t(2054);const rl=e=>{let{message:s,type:t}=e;const r="success"===t?"bg-green-500":"bg-red-500",a="success"===t?tl.A:La.A;return(0,lr.jsxs)("div",{className:`flex items-center p-4 mb-4 text-white ${r} rounded-lg shadow-md`,children:[(0,lr.jsx)(a,{className:"mr-2",size:20}),(0,lr.jsx)("span",{children:s})]})},al=()=>{const{id:e}=(0,n.g)(),s=(0,n.Zp)(),t=(0,i.wA)(),{posts:a}=(0,i.d4)((e=>e.jobPosts)),{recruiter:l}=(0,i.d4)((e=>e.recruiter)),[o,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const t=a.find((s=>s._id===e));t?c(t):(rl({message:"Job post not found.",type:"error"}),s("/recruiter/jobs"))}),[e,a,s]),o?(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl",children:(0,lr.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,lr.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-purple-700 flex items-center",children:[(0,lr.jsx)(Fa.A,{className:"mr-2"})," Edit Job Post"]}),(0,lr.jsx)(Ya,{initialData:o,recruiterId:(null==l?void 0:l.id)||"",isEditing:!0,onSubmit:async r=>{if(e&&null!=l&&l.id)try{await t(we({id:e,postData:r})).unwrap(),rl({message:"Job post updated successfully",type:"success"}),s("/recruiter/jobs")}catch(e){console.error("Failed to update job post:",e),rl({message:"Failed to update job post. Please try again.",type:"error"})}else rl({message:"Recruiter ID is not available.",type:"error"})}})]})})]}):(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})})};var ll=t(3036),nl=t(1906),il=t(4516),ol=t(1637),cl=t(5865),dl=t(9424),ul=t(8903),ml=t(7561),pl=t(9190),xl=t(2268),hl=t(8988),gl=t(7600),fl=t(7392),jl=t(9135),bl=t(35),yl=t(4219),vl=t(5316),Nl=t(5795),wl=t(9347),Cl=t(4770),kl=t(1082),Sl=t(7225),Al=t(5978);const Pl=()=>{const e=(0,i.wA)(),s=(0,n.Zp)(),{jobPosts:t,user:a}=(0,i.d4)((e=>e.auth)),{posts:o,loading:c,error:d,totalPages:u,totalCount:m,currentPage:p}=t,x=(null==a?void 0:a.appliedJobs)||[],[h,g]=(0,r.useState)(p),[f,j]=(0,r.useState)(10),[b,y]=(0,r.useState)("createdAt"),[v,N]=(0,r.useState)("desc"),[w,C]=(0,r.useState)({}),[k,S]=(0,r.useState)(!1),[A,P]=(0,r.useState)(""),[I,O]=(0,r.useState)(null),T=(0,ll.A)("(max-width:400px)");(0,r.useEffect)((()=>{e(R({page:h,limit:f,sortBy:b,sortOrder:v,filter:w}))}),[e,h,f,b,v,w]);return c?(0,lr.jsx)(il.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,lr.jsx)(ol.A,{})}):d?(0,lr.jsx)(cl.A,{color:"error",align:"center",p:4,children:d}):(0,lr.jsxs)(il.A,{sx:{bgcolor:"background.default",minHeight:"100vh"},children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)(ja.N9,{}),(0,lr.jsxs)(dl.A,{maxWidth:"lg",sx:{py:8},children:[(0,lr.jsx)(cl.A,{variant:"h4",component:"h1",gutterBottom:!0,className:"text-purple-700 font-bold "+(T?"text-xl":"text-2xl sm:text-3xl"),children:"Job Listings"}),(0,lr.jsxs)(ul.Ay,{container:!0,spacing:2,sx:{mb:4},children:[(0,lr.jsx)(ul.Ay,{item:!0,xs:12,sm:4,md:3,children:(0,lr.jsxs)(ml.A,{fullWidth:!0,sx:{minWidth:120},children:[(0,lr.jsx)(pl.A,{id:"sort-by-label",className:"text-purple-700",children:"Sort By"}),(0,lr.jsxs)(xl.A,{labelId:"sort-by-label",value:b,label:"Sort By",onChange:e=>{y(e.target.value),N("asc"===v?"desc":"asc")},className:"text-purple-700",size:"small",children:[(0,lr.jsx)(hl.A,{value:"createdAt",children:"Date Posted"}),(0,lr.jsx)(hl.A,{value:"title",children:"Job Title"}),(0,lr.jsx)(hl.A,{value:"company.name",children:"Company Name"})]})]})}),(0,lr.jsx)(ul.Ay,{item:!0,xs:12,sm:4,md:3,children:(0,lr.jsxs)(ml.A,{fullWidth:!0,sx:{minWidth:120},children:[(0,lr.jsx)(pl.A,{id:"limit-label",className:"text-purple-700",children:"Per Page"}),(0,lr.jsxs)(xl.A,{labelId:"limit-label",value:f,label:"Per Page",onChange:e=>{j(e.target.value),g(1)},className:"text-purple-700",size:"small",children:[(0,lr.jsx)(hl.A,{value:10,children:"10"}),(0,lr.jsx)(hl.A,{value:20,children:"20"}),(0,lr.jsx)(hl.A,{value:50,children:"50"})]})]})}),(0,lr.jsx)(ul.Ay,{item:!0,xs:12,sm:4,md:3,children:(0,lr.jsx)(nl.A,{fullWidth:!0,variant:"contained",onClick:()=>{C({}),g(1)},sx:{height:"100%",bgcolor:"#9333EA","&:hover":{bgcolor:"#7E22CE"}},size:"small",children:"Clear Filters"})})]}),(0,lr.jsx)(ul.Ay,{container:!0,spacing:3,children:o.map((t=>{var r,n;return(0,lr.jsx)(ul.Ay,{item:!0,xs:12,md:12,lg:12,children:(0,lr.jsxs)(il.A,{sx:{boxShadow:2,border:"1px solid",borderColor:"purple.300",borderRadius:2,p:T?1:2,mb:2,bgcolor:"white"},children:[(0,lr.jsx)(cl.A,{variant:"h6",component:"h2",className:"text-purple-700 "+(T?"text-lg":"text-lg sm:text-xl"),children:t.title}),(0,lr.jsxs)(cl.A,{color:"text.secondary",gutterBottom:!0,className:"flex items-center text-sm "+(T?"text-xs":"sm:text-base"),children:[(0,lr.jsx)(Cl.A,{className:"mr-1 text-purple-600"})," ",null===(r=t.company)||void 0===r?void 0:r.name]}),(0,lr.jsxs)(cl.A,{color:"text.secondary",gutterBottom:!0,className:"flex items-center text-sm "+(T?"text-xs":"sm:text-base"),children:[(0,lr.jsx)(kl.A,{className:"mr-1 text-purple-600"})," ",t.location]}),(0,lr.jsxs)(cl.A,{color:"text.secondary",gutterBottom:!0,className:"flex items-center text-sm "+(T?"text-xs":"sm:text-base"),children:[(0,lr.jsx)(Sl.A,{className:"mr-1 text-purple-600"})," Posted on ",new Date(t.createdAt).toLocaleDateString()]}),(0,lr.jsxs)(gl.A,{sx:{justifyContent:"flex-end"},children:[(0,lr.jsx)(nl.A,{size:"small",variant:"contained",onClick:()=>(async t=>{try{await e(D(t)),s(`/jobs/${t}`)}catch(e){ja.oR.error("Error fetching job details. Please try again.")}})(t._id),sx:{bgcolor:"#9333EA","&:hover":{bgcolor:"#7E22CE"}},className:"text-sm "+(T?"text-xs":"sm:text-base"),children:"View Details"}),(n=t._id,null!=a&&a.id?a.resume?(0,lr.jsx)(nl.A,{size:"small",variant:"contained",onClick:()=>(async s=>{if(null!=a&&a.id)try{const t=await e(E({userId:a.id,jobId:s}));E.fulfilled.match(t)?(ja.oR.success("Successfully applied for the job!"),e(R({page:h,limit:f,sortBy:b,sortOrder:v,filter:w}))):E.rejected.match(t)&&ja.oR.error(t.payload)}catch(e){ja.oR.error("Error occurred while applying.")}else ja.oR.error("User ID not found. Please log in.")})(n),disabled:null==x?void 0:x.includes(n),sx:{bgcolor:"#9333EA","&:hover":{bgcolor:"#7E22CE"},"&.Mui-disabled":{bgcolor:"#E9D5FF",color:"#6B7280"}},children:null!=x&&x.includes(n)?"Applied":"Apply Now"}):(0,lr.jsx)(nl.A,{size:"small",variant:"contained",onClick:()=>s(`/profile/${a.id}`),className:"text-sm",sx:{bgcolor:"#EAB308","&:hover":{bgcolor:"#CA8A04"}},children:"Update Profile"}):(0,lr.jsx)(l.N_,{to:"/login",className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-400 hover:from-purple-700 hover:to-purple-500 text-white font-bold rounded-full shadow-md hover:shadow-lg text-sm",children:"Login to Apply"})),(0,lr.jsx)(fl.A,{size:"small",color:"error",onClick:()=>{return e=t._id,O(e),void S(!0);var e},title:"Report Job",className:"text-sm "+(T?"text-xs":"sm:text-base"),children:(0,lr.jsx)(Al.A,{className:"text-sm "+(T?"text-xs":"sm:text-base")})})]})]})},t._id)}))}),(0,lr.jsx)(il.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,lr.jsx)(jl.A,{count:u,page:h,onChange:(e,s)=>{g(s)},color:"secondary"})}),(0,lr.jsxs)(cl.A,{align:"center",color:"textSecondary",className:"mt-2",children:["Total Jobs: ",m]})]}),(0,lr.jsxs)(bl.A,{open:k,onClose:()=>S(!1),children:[(0,lr.jsx)(yl.A,{children:"Report Job"}),(0,lr.jsx)(vl.A,{children:(0,lr.jsx)(Nl.A,{autoFocus:!0,margin:"dense",id:"reason",label:"Reason",type:"text",fullWidth:!0,variant:"outlined",value:A,onChange:e=>P(e.target.value)})}),(0,lr.jsxs)(wl.A,{children:[(0,lr.jsx)(nl.A,{onClick:()=>S(!1),sx:{bgcolor:"#9333EA",color:"white","&:hover":{bgcolor:"#7E22CE"}},children:"Cancel"}),(0,lr.jsx)(nl.A,{onClick:async()=>{if(null!=a&&a.id&&I)try{const s=await e(z({userId:a.id,jobId:I,reason:A}));z.fulfilled.match(s)?(ja.oR.success("Job reported successfully"),S(!1),P(""),O(null)):z.rejected.match(s)&&ja.oR.error(s.payload)}catch(e){ja.oR.error("Error occurred while reporting the job.")}else ja.oR.error("User ID not found. Please log in.")},sx:{bgcolor:"#9333EA",color:"white","&:hover":{bgcolor:"#7E22CE"}},children:"Submit Report"})]})]})]})};var Il=t(2626);const Rl=()=>(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-600"})}),El=()=>{var e,s;const{jobId:t}=(0,n.g)(),a=(0,i.wA)(),o=(0,n.Zp)(),c=(0,i.d4)((e=>e.auth.jobPosts.posts.find((e=>e._id===t))||e.userSearch.jobPosts.find((e=>e._id===t)))),d=(0,i.d4)((e=>e.auth.user)),u=null==d?void 0:d.id,m=(0,i.d4)((e=>e.auth.error)),[p,x]=(0,r.useState)(!1);(0,r.useEffect)((()=>{!c&&t&&a(D(t))}),[a,t,c]);if(!c)return(0,lr.jsx)(Rl,{});const h=null==d||null===(e=d.appliedJobs)||void 0===e?void 0:e.includes(c._id),g=null==d?void 0:d.resume;return(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,lr.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,lr.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-300 text-white p-6",children:[(0,lr.jsx)("h1",{className:"text-3xl font-bold mb-2 md:text-2xl sm:text-xl",children:c.title}),(0,lr.jsxs)("p",{className:"text-xl flex items-center md:text-lg sm:text-base",children:[(0,lr.jsx)(Jr.A,{className:"mr-2 text-base sm:text-lg"}),null===(s=c.company)||void 0===s?void 0:s.name]})]}),(0,lr.jsxs)("div",{className:"p-6",children:[m&&(0,lr.jsxs)("div",{className:"mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 flex items-center",role:"alert",children:[(0,lr.jsx)(La.A,{className:"mr-2",size:20}),(0,lr.jsx)("p",{children:m})]}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,lr.jsxs)("div",{className:"space-y-4",children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Job Details"}),(0,lr.jsxs)("p",{className:"flex items-center text-base md:text-sm",children:[(0,lr.jsx)(Zr.A,{className:"mr-2 text-gray-600",size:20}),(0,lr.jsx)("span",{className:"font-semibold mr-2",children:"Location:"})," ",c.location]}),(0,lr.jsxs)("p",{className:"flex items-center text-base md:text-sm",children:[(0,lr.jsx)(Xr.A,{className:"mr-2 text-gray-600",size:20}),(0,lr.jsx)("span",{className:"font-semibold mr-2",children:"Work Type:"})," ",c.wayOfWork]}),(0,lr.jsxs)("p",{className:"flex items-center text-base md:text-sm",children:[(0,lr.jsx)(Kr.A,{className:"mr-2 text-gray-600",size:20}),(0,lr.jsx)("span",{className:"font-semibold mr-2",children:"Salary Range:"})," ",c.salaryRange.min," - ",c.salaryRange.max]}),(0,lr.jsxs)("p",{className:"flex items-center text-base md:text-sm",children:[(0,lr.jsx)(La.A,{className:"mr-2 text-gray-600",size:20}),(0,lr.jsx)("span",{className:"font-semibold mr-2",children:"Status:"})," ",c.status]})]}),(0,lr.jsxs)("div",{className:"space-y-4",children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Date Information"}),(0,lr.jsxs)("p",{className:"flex items-center text-base md:text-sm",children:[(0,lr.jsx)(Hr.A,{className:"mr-2 text-gray-600",size:20}),(0,lr.jsx)("span",{className:"font-semibold mr-2",children:"Posted Date:"})," ",new Date(c.createdAt).toLocaleDateString()]}),(0,lr.jsxs)("p",{className:"flex items-center text-base md:text-sm",children:[(0,lr.jsx)(Hr.A,{className:"mr-2 text-gray-600",size:20}),(0,lr.jsx)("span",{className:"font-semibold mr-2",children:"Last Updated:"})," ",new Date(c.updatedAt).toLocaleDateString()]})]})]}),(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsxs)("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[(0,lr.jsx)(ia.A,{className:"mr-2 text-purple-600",size:24}),"Description"]}),(0,lr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:c.description})]}),(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsxs)("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[(0,lr.jsx)(Il.A,{className:"mr-2 text-purple-600",size:24}),"Required Skills"]}),(0,lr.jsx)("div",{className:"flex flex-wrap gap-2",children:c.skillsRequired.map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:e},s)))})]}),(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsxs)("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[(0,lr.jsx)(ia.A,{className:"mr-2 text-purple-600",size:24}),"Required Qualifications"]}),(0,lr.jsx)("div",{className:"flex flex-wrap gap-2",children:c.qualifications.map(((e,s)=>(0,lr.jsx)("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:e},s)))})]}),(0,lr.jsx)("div",{className:"mt-8 flex justify-center",children:u?g?(0,lr.jsx)("button",{onClick:async()=>{if(t&&u)try{x(!0),await a(E({userId:u,jobId:t})).unwrap(),ja.oR.success("Successfully applied for the job!")}catch(e){console.error("Error applying for job:",e),ja.oR.error("Error occurred while applying for the job. Please try again.")}finally{x(!1)}else console.error("Missing jobId or userId"),ja.oR.error("Missing jobId or userId")},disabled:p||h,className:`px-6 py-3 rounded-full transition-all duration-300 ease-in-out ${h?"bg-gray-300 text-gray-600 cursor-not-allowed":p?"bg-purple-400":"bg-gradient-to-r from-purple-600 to-purple-400 hover:from-purple-700 hover:to-purple-500"} text-white font-bold text-lg sm:text-base shadow-md hover:shadow-lg w-full sm:w-auto`,children:p?"Applying...":h?"Already Applied":"Apply Now"}):(0,lr.jsx)("button",{onClick:()=>o(`/profile/${u}`),className:"px-6 py-3 rounded-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold text-lg shadow-md hover:shadow-lg w-full sm:w-auto text-center",children:"Update Profile to Apply"}):(0,lr.jsx)(l.N_,{to:"/login",className:"px-6 py-3 rounded-full bg-gradient-to-r from-purple-600 to-purple-600 hover:from-purple-700 hover:to-purple-700 text-white font-bold text-lg shadow-md hover:shadow-lg w-full sm:w-auto text-center",children:"Login to Apply"})}),!g&&u&&(0,lr.jsx)("div",{className:"mt-4 text-center text-red-600",children:"Please update your profile and add a resume before applying."})]})]})}),(0,lr.jsx)(ja.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1})]})};var Dl=t(8298),zl=t(5327);const Ol=e=>{let{currentPage:s,totalPages:t,onPageChange:r}=e;const a=[];for(let e=1;e<=t;e++)a.push(e);return(0,lr.jsx)("nav",{className:"flex justify-center mt-6",children:(0,lr.jsx)("ul",{className:"flex",children:a.map((e=>(0,lr.jsx)("li",{className:"mx-1",children:(0,lr.jsx)("button",{onClick:()=>r(e),className:"px-3 py-2 rounded "+(s===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e})},e)))})})},Tl=e=>{let{message:s}=e;return(0,lr.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,lr.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,lr.jsx)("span",{className:"block sm:inline",children:s})]})},$l=e=>{let{size:s=24,className:t=""}=e;return(0,lr.jsxs)("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:s,height:s,children:[(0,lr.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,lr.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Fl=()=>{const{jobId:e}=(0,n.g)(),s=(0,n.Zp)(),t=(0,i.wA)(),{contestants:a,filteredContestants:l,loading:o,error:c,totalPages:d,currentPage:u}=(0,i.d4)((e=>e.contestants)),[m,p]=(0,r.useState)(1),[x,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1);if((0,r.useEffect)((()=>(e&&t(Pe({jobId:e,page:m})),()=>{t(ze())})),[t,e,m]),o)return(0,lr.jsx)($l,{});if(c)return(0,lr.jsx)(Tl,{message:c});const j=x?l:a,b=Array.isArray(j)?j:[j];return(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl",children:[(0,lr.jsx)("h2",{className:"text-3xl font-bold mb-6 text-purple-800",children:"Job Applicants"}),(0,lr.jsx)("div",{className:"mb-4",children:(0,lr.jsx)("button",{onClick:x?()=>{e&&(t(Pe({jobId:e,page:m})),h(!1))}:async()=>{e&&(f(!0),await t(Re(e)),h(!0),f(!1))},className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 flex items-center",disabled:g,children:g?(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)($l,{size:18,className:"mr-2"}),"Filtering..."]}):(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(Dl.A,{size:18,className:"mr-2"}),x?"Reset Filter":"Filter Skilled Applicants"]})})}),0===b.length?(0,lr.jsx)("p",{className:"text-center text-gray-600",children:"No applicants for this job post yet."}):(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map((e=>(0,lr.jsxs)("div",{className:"bg-white border border-purple-200 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,lr.jsxs)("div",{className:"flex items-center mb-4",children:[e.profileImage?(0,lr.jsx)("img",{src:`${e.profileImage}`,alt:e.name,className:"w-16 h-16 rounded-full mr-4 object-cover"}):(0,lr.jsx)("div",{className:"w-16 h-16 rounded-full bg-purple-200 flex items-center justify-center mr-4",children:(0,lr.jsx)(Br.A,{size:32,className:"text-purple-600"})}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold text-purple-800",children:e.name}),(0,lr.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,lr.jsx)(zl.A,{size:14,className:"mr-1"}),(0,lr.jsx)("span",{children:e.email})]}),x&&"matchPercentage"in e&&(0,lr.jsxs)("div",{className:"text-green-600 font-semibold mt-1",children:["Match: ",e.matchPercentage,"%"]}),(0,lr.jsxs)("div",{className:"flex items-center text-gray-600 mt-2",children:[(0,lr.jsx)(oa.A,{size:14,className:"mr-1"}),null!=e&&e.resume?(0,lr.jsx)("a",{href:`${e.resume}`,target:"_blank",rel:"noopener noreferrer",download:!0,className:"text-purple-600 hover:underline",children:"Download Resume"}):(0,lr.jsx)("span",{children:"No resume uploaded"})]})]})]}),(0,lr.jsxs)("button",{onClick:()=>{return t=e.id,void s(`/recruiter/contestant/${t}`);var t},className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 flex items-center justify-center",children:[(0,lr.jsx)(Ua.A,{size:18,className:"mr-2"}),"View Details"]})]},e.id)))}),d>1&&(0,lr.jsx)("div",{className:"mt-8",children:(0,lr.jsx)(Ol,{currentPage:u,totalPages:d,onPageChange:e=>{p(e)}})})]})]})]})};var Ml=t(1286),Ul=t(5469);const ql=()=>{const{contestantId:e}=(0,n.g)(),s=(0,n.Zp)(),t=(0,i.wA)(),{selectedContestant:a,loading:l,error:o}=(0,i.d4)((e=>e.contestants)),c=(0,i.d4)((e=>{var s;return null===(s=e.recruiter.recruiter)||void 0===s?void 0:s.id}));return(0,r.useEffect)((()=>(e&&t(Ie(e)),()=>{t(De())})),[t,e]),l?(0,lr.jsx)($l,{}):o?(0,lr.jsx)(Tl,{message:o}):a?(0,lr.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,lr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,lr.jsx)("h2",{className:"text-4xl font-extrabold mb-8 text-purple-900 border-b-2 border-purple-200 pb-2",children:"Applicant Profile"}),(0,lr.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:(0,lr.jsxs)("div",{className:"p-8",children:[(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row items-center mb-8",children:[a.profileImage?(0,lr.jsx)("img",{src:`${a.profileImage}`,alt:a.name,className:"w-32 h-32 rounded-full border-4 border-purple-200 mr-6 mb-4 md:mb-0"}):(0,lr.jsx)("div",{className:"w-32 h-32 rounded-full bg-purple-100 flex items-center justify-center mr-6 mb-4 md:mb-0",children:(0,lr.jsx)(Br.A,{size:48,className:"text-purple-500"})}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{className:"text-3xl font-bold text-purple-900 mb-2",children:a.name}),(0,lr.jsxs)("div",{className:"flex flex-wrap items-center text-gray-600",children:[(0,lr.jsx)(zl.A,{size:16,className:"mr-2 text-purple-500"}),(0,lr.jsx)("span",{className:"mr-4",children:a.email})]}),(0,lr.jsxs)("div",{className:"flex flex-wrap items-center text-gray-600",children:[(0,lr.jsx)(Ml.A,{size:16,className:"mr-2 text-purple-500"}),(0,lr.jsx)("span",{className:"mr-4",children:a.phone})]})]})]}),(a.bio||a.about)&&(0,lr.jsxs)("div",{className:"mb-8 bg-purple-50 rounded-lg p-6",children:[(0,lr.jsx)("h4",{className:"text-xl font-semibold text-purple-900 mb-3",children:"About Me"}),(0,lr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:a.bio||a.about})]}),a.skills&&a.skills.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h4",{className:"text-xl font-semibold text-purple-900 mb-3",children:"Skills"}),(0,lr.jsx)("div",{className:"flex flex-wrap",children:a.skills.map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 rounded-full px-4 py-2 text-sm font-medium mr-2 mb-2 shadow-sm",children:e},s)))})]}),a.experiences&&a.experiences.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h4",{className:"text-xl font-semibold text-purple-900 mb-3",children:"Professional Experience"}),(0,lr.jsx)("div",{className:"space-y-6",children:a.experiences.map((e=>(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500",children:[(0,lr.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"font-semibold text-lg text-purple-900",children:e.title}),(0,lr.jsx)("p",{className:"text-purple-700",children:e.company})]}),(0,lr.jsxs)("p",{className:"text-sm text-gray-600",children:[e.startDate," - ",e.endDate||"Present"]})]}),(0,lr.jsx)("p",{className:"text-gray-700 mt-2",children:e.description})]},e.id)))})]}),a.projects&&a.projects.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h4",{className:"text-xl font-semibold text-purple-900 mb-3",children:"Projects"}),(0,lr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.projects.map((e=>(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.imageUrl&&(0,lr.jsx)("img",{src:`${e.imageUrl}`,alt:e.name,className:"w-full h-48 object-cover"}),(0,lr.jsxs)("div",{className:"p-6",children:[(0,lr.jsx)("p",{className:"font-semibold text-lg text-purple-900 mb-2",children:e.name}),(0,lr.jsx)("p",{className:"text-gray-700 mb-4",children:e.description}),e.link&&(0,lr.jsxs)("a",{href:`${e.link}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-purple-600 hover:text-purple-800 transition-colors duration-300",children:[(0,lr.jsx)(Za.A,{size:16,className:"mr-2"}),"View Project"]})]})]},e.id)))})]}),a.certificates&&a.certificates.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h4",{className:"text-xl font-semibold text-purple-900 mb-3",children:"Certifications"}),(0,lr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:a.certificates.map((e=>(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,lr.jsx)(ia.A,{size:24,className:"text-purple-500 mb-2"}),(0,lr.jsx)("p",{className:"font-semibold text-purple-900",children:e.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.issuingOrganization}),(0,lr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Issued: ",new Date(e.dateOfIssue).toLocaleDateString()]}),e.imageUrl&&(0,lr.jsx)("img",{src:`${e.imageUrl}`,alt:e.name,className:"mt-2 w-full h-32 object-cover rounded-md"})]},e.id)))})]}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[a.dateOfBirth&&(0,lr.jsxs)("div",{className:"flex items-center text-gray-700 bg-gray-100 rounded-lg p-4",children:[(0,lr.jsx)(Hr.A,{size:20,className:"mr-3 text-purple-600"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),(0,lr.jsx)("p",{className:"font-medium",children:new Date(a.dateOfBirth).toLocaleDateString()})]})]}),a.gender&&(0,lr.jsxs)("div",{className:"flex items-center text-gray-700 bg-gray-100 rounded-lg p-4",children:[(0,lr.jsx)(Br.A,{size:20,className:"mr-3 text-purple-600"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"text-sm text-gray-500",children:"Gender"}),(0,lr.jsx)("p",{className:"font-medium",children:a.gender})]})]})]}),a.resume&&(0,lr.jsx)("div",{className:"mt-8",children:(0,lr.jsxs)("a",{href:`${a.resume}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors duration-300 shadow-md",children:[(0,lr.jsx)(oa.A,{size:20,className:"mr-2"}),"View Full Resume"]})})]})}),(0,lr.jsxs)("button",{onClick:()=>s(-1),className:"mt-8 inline-flex items-center bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors duration-300 shadow-md",children:[(0,lr.jsx)(Ul.A,{size:20,className:"mr-2"}),"Back to Applicants"]}),(0,lr.jsx)("button",{onClick:async()=>{try{await(async(e,s)=>ae("POST","/conversations",{applicantId:e,recruiterId:s}))(null!=a&&a.id?null==a?void 0:a.id:"",c),s("/recruiter/messages")}catch(e){console.error("Error starting conversation:",e)}},className:"mt-4 bg-purple-500 text-white py-2 px-4 rounded hover:bg-purple-600 transition duration-300",children:"Start Conversation"})]})})]}):(0,lr.jsx)("div",{children:"No contestant data available."})},Ll=()=>{const e=(0,i.wA)(),{users:s,loading:t,error:a}=(0,i.d4)((e=>e.admin)),[l,n]=(0,r.useState)(""),[o,c]=(0,r.useState)(1),[d]=(0,r.useState)(10);(0,r.useEffect)((()=>{e(H())}),[e]);const u=s.filter((e=>e.name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase()))),m=o*d,p=m-d,x=u.slice(p,m),h=Math.ceil(u.length/d),g=e=>{c(e)};return t?(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen text-purple-600",children:"Loading..."}):a?(0,lr.jsxs)("div",{className:"flex justify-center items-center h-screen text-red-500",children:["Error: ",a]}):(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-100",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,lr.jsx)(Or,{}),(0,lr.jsxs)("main",{className:"p-2 sm:p-4 md:p-6 flex-grow overflow-auto",children:[(0,lr.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row",children:[(0,lr.jsxs)("div",{className:"relative flex-grow mb-2 sm:mb-0 sm:mr-2",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search users...",value:l,onChange:e=>{n(e.target.value),c(1)},className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border rounded-lg text-gray-700 focus:outline-none focus:border-purple-500"}),l&&(0,lr.jsx)("button",{onClick:()=>{n(""),c(1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-800",children:(0,lr.jsx)(Nr.QCr,{className:"text-sm sm:text-base"})})]}),(0,lr.jsxs)("button",{className:"bg-purple-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-purple-600 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.KSO,{className:"inline mr-1"})," Search"]})]}),(0,lr.jsxs)("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-lg shadow-md",children:[(0,lr.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold mb-4 sm:mb-6 text-purple-800",children:"User List"}),(0,lr.jsx)("div",{className:"overflow-x-auto",children:(0,lr.jsxs)("table",{className:"min-w-full bg-white text-sm sm:text-base",children:[(0,lr.jsx)("thead",{className:"bg-purple-100",children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Name"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Email"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Status"}),(0,lr.jsx)("th",{className:"py-2 sm:py-3 px-3 sm:px-6 text-left text-xs sm:text-sm font-medium text-purple-800 uppercase tracking-wider",children:"Actions"})]})}),(0,lr.jsx)("tbody",{className:"divide-y divide-purple-200",children:x.map((s=>(0,lr.jsxs)("tr",{className:"hover:bg-purple-50",children:[(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.name}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.email}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:(0,lr.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(s.isBlocked?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:s.isBlocked?"Blocked":"Active"})}),(0,lr.jsx)("td",{className:"py-2 sm:py-4 px-3 sm:px-6",children:s.isBlocked?(0,lr.jsxs)("button",{onClick:()=>{return t=s.id,void e(K(t));var t},className:"bg-green-500 hover:bg-green-600 text-white font-bold py-1 sm:py-2 px-2 sm:px-4 rounded text-xs sm:text-sm inline-flex items-center",children:[(0,lr.jsx)(Nr.YVu,{className:"mr-1 sm:mr-2"})," Unblock"]}):(0,lr.jsxs)("button",{onClick:()=>{return t=s.id,void e(Y(t));var t},className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1 sm:py-2 px-2 sm:px-4 rounded text-xs sm:text-sm inline-flex items-center",children:[(0,lr.jsx)(Nr.Rqy,{className:"mr-1 sm:mr-2"})," Block"]})})]},s.id)))})]})}),(0,lr.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,lr.jsxs)("span",{className:"text-purple-800",children:["Page ",o," of ",h]}),(0,lr.jsxs)("div",{className:"flex space-x-2",children:[(0,lr.jsxs)("button",{onClick:()=>g(o-1),disabled:1===o,className:"bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed",children:[(0,lr.jsx)(Nr._Jj,{className:"inline mr-1"})," Previous"]}),(0,lr.jsxs)("button",{onClick:()=>g(o+1),disabled:o===h,className:"bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed",children:["Next ",(0,lr.jsx)(Nr.X6T,{className:"inline ml-1"})]})]})]})]})]})]})]})},_l=e=>{let{isOpen:s,onClose:t,onConfirm:r,title:a,message:l}=e;return s?(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-sm w-full",children:[(0,lr.jsx)("h2",{className:"text-xl font-bold mb-4",children:a}),(0,lr.jsx)("p",{className:"mb-6",children:l}),(0,lr.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,lr.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"}),(0,lr.jsx)("button",{onClick:r,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}):null},Vl=e=>{let{message:s,type:t,onClose:a}=e;return(0,r.useEffect)((()=>{const e=setTimeout((()=>{a()}),3e3);return()=>clearTimeout(e)}),[a]),(0,lr.jsx)("div",{className:"fixed bottom-4 right-4 p-4 rounded-lg text-white "+("success"===t?"bg-green-500":"bg-red-500"),children:s})},Wl=e=>{let{post:s,onDelete:t,onEdit:r}=e;return(0,lr.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg",children:(0,lr.jsxs)("div",{className:"p-4",children:["blocked"===s.status&&(0,lr.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,lr.jsx)("strong",{className:"font-bold",children:"Notice: "}),(0,lr.jsx)("span",{className:"block sm:inline",children:"This post has been blocked by an admin."})]}),(0,lr.jsx)("p",{className:"text-gray-600 mb-4",children:s.content}),s.imageUrl&&(0,lr.jsx)("img",{src:s.imageUrl,alt:"Post",className:"w-full h-48 object-cover rounded-md mb-4"}),s.videoUrl&&(0,lr.jsx)("video",{src:s.videoUrl,controls:!0,className:"w-full h-48 object-cover rounded-md mb-4",children:"Your browser does not support the video tag."}),(0,lr.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,lr.jsx)("button",{onClick:r,className:"p-2 text-purple-600 hover:bg-purple-100 rounded-full transition-colors duration-300",children:(0,lr.jsx)(Fa.A,{size:20})}),(0,lr.jsx)("button",{onClick:t,className:"p-2 text-red-600 hover:bg-red-100 rounded-full transition-colors duration-300",children:(0,lr.jsx)(Ma.A,{size:20})})]})]})})},Bl=e=>{let{totalPages:s,paginate:t,currentPage:r}=e;const a=[];for(let e=1;e<=s;e++)a.push(e);return(0,lr.jsx)("nav",{className:"flex justify-center mt-8",children:(0,lr.jsxs)("ul",{className:"flex space-x-2",children:[(0,lr.jsx)("li",{children:(0,lr.jsx)("button",{onClick:()=>t(r-1),disabled:1===r,className:"px-3 py-2 rounded-md bg-purple-100 text-purple-700 hover:bg-purple-200 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,lr.jsx)(Pr.A,{size:20})})}),a.map((e=>(0,lr.jsx)("li",{children:(0,lr.jsx)("button",{onClick:()=>t(e),className:"px-3 py-2 rounded-md "+(r===e?"bg-purple-600 text-white":"bg-purple-100 text-purple-700 hover:bg-purple-200"),children:e})},e))),(0,lr.jsx)("li",{children:(0,lr.jsx)("button",{onClick:()=>t(r+1),disabled:r===s,className:"px-3 py-2 rounded-md bg-purple-100 text-purple-700 hover:bg-purple-200 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,lr.jsx)(Ir.A,{size:20})})})]})})},Jl=()=>{const{userId:e}=(0,n.g)(),s=(0,i.wA)(),t=(0,n.Zp)(),{userPosts:a=[],status:l,error:o,totalPages:c}=(0,i.d4)((e=>e.posts)),[d,u]=(0,r.useState)(1),[m,p]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(null);return(0,r.useEffect)((()=>{e&&s($e({userId:e,page:d,limit:10}))}),[e,s,d]),(0,lr.jsxs)("div",{className:"min-h-screen bg-purple-100",children:[(0,lr.jsx)(fr,{}),"loading"===l?(0,lr.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}):"failed"===l?(0,lr.jsxs)("div",{className:"text-red-500 text-center py-4 bg-red-100 border border-red-300 mx-4 mt-4",children:["Error: ",o]}):0===a.length?(0,lr.jsx)("div",{className:"text-center py-4 bg-yellow-100 border border-yellow-300 text-yellow-800 mx-4 mt-4",children:"No posts found for this user."}):(0,lr.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,lr.jsx)("h2",{className:"text-3xl font-bold text-purple-700 mb-6",children:"User Posts"}),(0,lr.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map((e=>(0,lr.jsx)(Wl,{post:e,onDelete:()=>{return s=e._id,h(s),void p(!0);var s},onEdit:()=>{return s=e._id,void t(`/edit-post/${s}`);var s}},e._id)))}),(0,lr.jsx)(Bl,{postsPerPage:10,totalPages:c,paginate:e=>u(e),currentPage:d})]}),(0,lr.jsx)(_l,{isOpen:m,onClose:()=>{console.log("Modal closed"),p(!1),h(null)},onConfirm:async()=>{if(x)try{await s(qe(x)).unwrap(),f({message:"Post deleted successfully",type:"success"}),e&&s($e({userId:e,page:d,limit:10}))}catch(e){f({message:"Failed to delete post. Please try again.",type:"error"})}finally{p(!1),h(null)}},title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone."}),g&&(0,lr.jsx)(Vl,{message:g.message,type:g.type,onClose:()=>f(null)})]})};var Zl=t(67),Gl=t(9333),Hl=t(8386),Yl=t(2129);const Kl=e=>{if(0===e)return"0 Byte";const s=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB","TB"][s]},Xl=10485760,Ql=209715200,en=41943040,sn=()=>(0,lr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,lr.jsxs)("div",{className:"relative w-8 h-8",children:[(0,lr.jsx)("div",{className:"absolute inset-0 bg-purple-300 rounded-full animate-ping opacity-75"}),(0,lr.jsx)("div",{className:"absolute inset-1 bg-purple-500 rounded-full animate-spin",children:(0,lr.jsx)("div",{className:"w-2 h-2 bg-white rounded-full absolute top-0 left-1/2 transform -translate-x-1/2"})})]}),(0,lr.jsx)("span",{className:"text-purple-600 font-medium",children:"Compressing video..."})]}),tn=e=>{let{path:s,delay:t}=e;return(0,lr.jsx)("div",{className:"absolute text-purple-300 animate-float opacity-30",style:{animationDelay:t,left:100*Math.random()+"%",top:100*Math.random()+"%"},children:(0,lr.jsx)("svg",{className:"w-12 h-12",fill:"currentColor",viewBox:"0 0 20 20",children:(0,lr.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:s})})})},rn=()=>{const[e,s]=(0,r.useState)(0),[t,a]=(0,r.useState)(0),[l,n]=(0,r.useState)(0),[i,o]=(0,r.useState)(1),[c,d]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=setInterval((()=>{c||(s((e=>Math.max(0,e-2))),a((e=>Math.max(0,e-1))),n((e=>Math.max(0,e-1))))}),1e3);return()=>clearInterval(e)}),[c]),(0,r.useEffect)((()=>{d(e>=1e3&&t>=500&&l>=750)}),[e,t,l]),(0,r.useEffect)((()=>{o(Math.floor((e+2*t+1.5*l)/1e3)+1)}),[e,t,l]),(0,lr.jsxs)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 to-indigo-900 bg-opacity-90 flex flex-col items-center justify-center z-50 overflow-hidden backdrop-blur-sm",children:[(0,lr.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,lr.jsx)(tn,{path:"M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z",delay:"0s"}),(0,lr.jsx)(tn,{path:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z",delay:"2s"}),(0,lr.jsx)(tn,{path:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z",delay:"4s"}),(0,lr.jsx)(tn,{path:"M6 3a1 1 0 011-1h.01a1 1 0 010 2H7a1 1 0 01-1-1zm2 3a1 1 0 00-2 0v1a2 2 0 00-2 2v1a2 2 0 00-2 2v.683a3.7 3.7 0 011.055.485 1.704 1.704 0 001.89 0 3.704 3.704 0 014.11 0 1.704 1.704 0 001.89 0 3.704 3.704 0 014.11 0 1.704 1.704 0 001.89 0A3.7 3.7 0 0118 12.683V12a2 2 0 00-2-2V9a2 2 0 00-2-2V6a1 1 0 10-2 0v1h-1V6a1 1 0 10-2 0v1H8V6zm10 8.868a3.704 3.704 0 01-4.055-.036 1.704 1.704 0 00-1.89 0 3.704 3.704 0 01-4.11 0 1.704 1.704 0 00-1.89 0A3.704 3.704 0 012 14.868V17a1 1 0 001 1h14a1 1 0 001-1v-2.132zM9 3a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zm3 0a1 1 0 011-1h.01a1 1 0 110 2H13a1 1 0 01-1-1z",delay:"6s"})]}),(0,lr.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-purple-700 bg-opacity-75 text-white py-2 text-center font-semibold animate-pulse",children:"Uploading your post..."}),(0,lr.jsxs)("div",{className:"bg-white bg-opacity-90 rounded-xl p-8 shadow-2xl max-w-md w-full mt-12 transform hover:scale-105 transition-transform duration-300 relative z-10",children:[(0,lr.jsx)("h2",{className:"text-3xl font-bold text-purple-700 mb-6 text-center animate-bounce",children:"Make Your Post Viral!"}),(0,lr.jsxs)("div",{className:"space-y-6",children:[(0,lr.jsxs)("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg p-4 shadow-inner relative overflow-hidden",children:[(0,lr.jsx)("div",{className:"absolute inset-0 bg-confetti opacity-10 animate-confetti"}),(0,lr.jsx)("p",{className:"text-gray-700 font-medium mb-2",children:"Your amazing post content goes here..."}),(0,lr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,lr.jsxs)("button",{onClick:()=>{c||s((e=>e+50))},className:"flex items-center space-x-1 text-pink-500 hover:text-pink-600 transition-colors duration-200 transform hover:scale-110",children:[(0,lr.jsx)("svg",{className:"w-5 h-5 animate-pulse",fill:"currentColor",viewBox:"0 0 20 20",children:(0,lr.jsx)("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})}),(0,lr.jsxs)("span",{children:[e," Likes"]})]}),(0,lr.jsxs)("button",{onClick:()=>{c||n((e=>e+35))},className:"flex items-center space-x-1 text-blue-500 hover:text-blue-600 transition-colors duration-200 transform hover:scale-110",children:[(0,lr.jsx)("svg",{className:"w-5 h-5 animate-bounce",fill:"currentColor",viewBox:"0 0 20 20",children:(0,lr.jsx)("path",{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"})}),(0,lr.jsxs)("span",{children:[l," Comments"]})]}),(0,lr.jsxs)("button",{onClick:()=>{c||a((e=>e+25))},className:"flex items-center space-x-1 text-green-500 hover:text-green-600 transition-colors duration-200 transform hover:scale-110",children:[(0,lr.jsx)("svg",{className:"w-5 h-5 animate-spin",fill:"currentColor",viewBox:"0 0 20 20",children:(0,lr.jsx)("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})}),(0,lr.jsxs)("span",{children:[t," Shares"]})]})]})]}),(0,lr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,lr.jsx)("div",{className:"text-purple-700",children:(0,lr.jsxs)("span",{className:"text-2xl font-bold animate-pulse",children:["Level ",i]})}),(0,lr.jsx)("div",{className:"text-yellow-500",children:c&&(0,lr.jsxs)("div",{className:"flex items-center space-x-2 animate-bounce",children:[(0,lr.jsx)("svg",{className:"w-6 h-6 animate-spin",fill:"currentColor",viewBox:"0 0 20 20",children:(0,lr.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),(0,lr.jsx)("span",{className:"text-xl font-bold",children:"Viral!"})]})})]})]}),(0,lr.jsx)("p",{className:"mt-6 text-center text-gray-600 animate-pulse",children:c?"Congratulations! Your post went viral!":"Interact with your post to make it go viral!"})]})]})},an=["image/jpeg","image/png","image/gif"],ln=["video/mp4","video/quicktime","video/x-msvideo"],nn=e=>{let{onConfirm:s,onCancel:t}=e;return(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Confirm Post"}),(0,lr.jsx)("p",{className:"mb-6",children:"Are you sure you want to publish this post?"}),(0,lr.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,lr.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition duration-300",children:"Cancel"}),(0,lr.jsx)("button",{onClick:s,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition duration-300",children:"Confirm"})]})]})})},on=()=>{const[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(null),[l,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[j,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),N=(0,i.wA)(),w=(0,i.d4)((e=>e.auth.user)),[C,k]=(0,r.useState)(null),[S,A]=(0,r.useState)(!1),[P,I]=(0,r.useState)(!1),[R,E]=(0,r.useState)(!1),D=e=>e.length>2e3?(h("Content must be 2000 characters or less"),!1):(h(null),!0),z=(e,s)=>{const t=s?Xl:Ql;if(e.size>t)return f(`File size exceeds the maximum allowed (${Kl(t)})`),!1;const r=s?an:ln;return r.includes(e.type)?(f(null),!0):(f(`Invalid file type. Allowed types: ${r.join(", ")}`),!1)},O=(0,r.useCallback)((async(e,s)=>{try{await N(Fe({postData:e,userId:s})).unwrap(),ja.oR.success("Post created successfully!"),T()}catch(e){e instanceof Error?ja.oR.error(`Error creating post: ${e.message}`):ja.oR.error("An unknown error occurred while creating the post")}}),[N]),T=()=>{s(""),a(null),n(null),k(null),c(null),u(null)},$=(0,r.useCallback)((async e=>{b(!0);const s=new Hl.m;await s.load();try{const t="input.mp4",r="output.mp4";await s.writeFile(t,await(0,Yl.t2)(e));const a=await F(e),l=Math.floor(335544320/a);console.log(`Input file size: ${Kl(e.size)}`),console.log(`Target bitrate: ${l} bps`),await s.exec(["-i",t,"-b:v",`${l}`,"-maxrate",""+2*l,"-bufsize",""+4*l,"-c:v","libx264","-preset","medium","-c:a","aac","-b:a","128k",r]);const n=await s.readFile(r),i=new Blob([n],{type:"video/mp4"}),o=new File([i],"compressed_video.mp4",{type:"video/mp4"});return console.log(`Compressed file size: ${Kl(o.size)}`),o}catch(e){throw console.error("Error compressing video:",e),e}finally{b(!1)}}),[]),F=e=>new Promise((s=>{const t=document.createElement("video");t.preload="metadata",t.onloadedmetadata=()=>{window.URL.revokeObjectURL(t.src),s(t.duration)},t.src=URL.createObjectURL(e)}));return(0,lr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-white-100 to-white-200",children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)(ja.N9,{position:"top-right",autoClose:5e3}),(0,lr.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,lr.jsx)("div",{className:"max-w-2xl mx-auto bg-gradient-to-br from-purple-50 to-purple-100 shadow-lg rounded-lg overflow-hidden",children:(0,lr.jsxs)("div",{className:"p-6",children:[(0,lr.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-purple-700 mb-6",children:"Create a Post"}),(0,lr.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),R||(E(!0),D(e)?t&&!z(t,!0)||l&&!z(l,!1)?E(!1):e.trim()||t||l?p(!0):(ja.oR.error("Please add some content, an image, or a video to your post."),E(!1)):E(!1))},className:"space-y-6",children:[(0,lr.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,lr.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex-shrink-0 overflow-hidden",children:(0,lr.jsx)("img",{src:`${null==w?void 0:w.profileImage}`,alt:"User avatar",className:"w-full h-full object-cover"})}),(0,lr.jsx)("textarea",{value:e,onChange:e=>{s(e.target.value),D(e.target.value)},placeholder:"What's on your mind?",rows:4,className:`w-full px-3 py-2 text-purple-700 border ${x?"border-red-500":"border-purple-300"} rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none text-sm sm:text-base`}),x&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x})]}),(0,lr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,lr.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer text-purple-600 hover:bg-purple-100 p-2 rounded-full transition duration-300 text-sm sm:text-base",children:[(0,lr.jsx)(Zl.A,{size:20}),(0,lr.jsx)("span",{className:"text-sm sm:text-base",children:"Add Image"}),(0,lr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];z(s,!0)?(a(s),c(URL.createObjectURL(s))):e.target.value=""}},className:"hidden"})]}),(0,lr.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer text-purple-600 hover:bg-purple-100 p-2 rounded-full transition duration-300 text-sm sm:text-base",children:[(0,lr.jsx)(Gl.A,{size:20}),(0,lr.jsx)("span",{className:"text-sm sm:text-base",children:"Add Video"}),(0,lr.jsx)("input",{type:"file",accept:"video/*",onChange:async e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];if(z(s,!1))if(n(s),u(URL.createObjectURL(s)),s.size>en){ja.oR.info(`Compressing video to approximately ${Kl(en)}, please wait...`);try{const e=await $(s);k(e),u(URL.createObjectURL(e)),ja.oR.success(`Video compressed to ${Kl(e.size)}`)}catch(e){ja.oR.error("Error compressing video. Using original file."),k(s)}}else k(s);else e.target.value=""}},className:"hidden",disabled:j})]}),j&&(0,lr.jsx)(sn,{})]}),o&&(0,lr.jsxs)("div",{className:"relative",children:[(0,lr.jsx)("img",{src:o,alt:"Preview",className:"max-w-full h-auto rounded-lg"}),(0,lr.jsx)("button",{type:"button",onClick:()=>{a(null),c(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition duration-300",children:(0,lr.jsx)(Na.A,{size:16})})]}),d&&(0,lr.jsxs)("div",{className:"relative",children:[(0,lr.jsx)("video",{src:d,controls:!0,className:"max-w-full h-auto rounded-lg"}),(0,lr.jsx)("button",{type:"button",onClick:()=>{n(null),k(null),u(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition duration-300",children:(0,lr.jsx)(Na.A,{size:16})})]}),g&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g}),(0,lr.jsx)("div",{className:"flex justify-end items-center",children:(0,lr.jsx)("button",{type:"submit",className:"px-4 sm:px-6 py-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition duration-300 disabled:opacity-50 text-sm sm:text-base",disabled:y||S,children:y?"Posting...":S?"Processing...":"Post"})})]})]})})}),P&&(S||y)&&(0,lr.jsx)(rn,{}),m&&(0,lr.jsx)(nn,{onConfirm:async()=>{if(null==w||!w.id)return void console.error("User ID is missing.");if(I(!0),p(!1),A(!0),l&&l.size>en){ja.oR.info(`Compressing video to approximately ${Kl(en)}, please wait...`);try{const e=await $(l);k(e),ja.oR.success(`Video compressed to ${Kl(e.size)}`)}catch(e){return ja.oR.error("Error compressing video. Please try again."),A(!1),void I(!1)}}v(!0);const s={content:e.trim()?e:void 0,image:t||void 0,video:C||l||void 0};await O(s,w.id),v(!1),A(!1),I(!1),E(!1)},onCancel:()=>{p(!1)}})]})};var cn=t(4808);const dn=e=>{let{isOpen:s,onClose:t,onConfirm:r,title:a,message:l}=e;return s?(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,lr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,lr.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:a}),(0,lr.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,lr.jsx)(Na.A,{size:24})})]}),(0,lr.jsx)("p",{className:"text-gray-600 mb-6",children:l}),(0,lr.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,lr.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors duration-200",children:"Cancel"}),(0,lr.jsx)("button",{onClick:()=>{r(),t()},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors duration-200",children:"Delete"})]})]})}):null},un=["image/jpeg","image/png","image/gif"],mn=["video/mp4","video/quicktime","video/x-msvideo"],pn=()=>{const{postId:e}=(0,n.g)(),s=(0,i.wA)(),t=(0,n.Zp)(),a=(0,i.d4)((e=>{var s;return(null===(s=e.auth.user)||void 0===s?void 0:s.id)||""})),l=(0,i.d4)((s=>s.posts.list.find((s=>s._id===e))||s.posts.userPosts.find((s=>s._id===e)))),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[j,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(null),[S,A]=(0,r.useState)(!1),[P,I]=(0,r.useState)(!1),[R,E]=(0,r.useState)(null),[D,z]=(0,r.useState)(null);(0,r.useEffect)((()=>{l&&(c(l.content||""),h(l.imageUrl||null),f(l.videoUrl||null))}),[l]);const O=e=>e.length>2e3?(w("Content must be 2000 characters or less"),!1):(w(null),!0),T=(e,s)=>{const t=s?Xl:Ql;if(e.size>t)return k(`File size exceeds the maximum allowed (${Kl(t)})`),!1;const r=s?un:mn;return r.includes(e.type)?(k(null),!0):(k(`Invalid file type. Allowed types: ${r.join(", ")}`),!1)},$=(0,r.useCallback)((async(e,r,a)=>{I(!0);try{await s(Le({postId:r,userId:a,postData:e})),ja.oR.success("Post updated successfully!"),t(-1)}catch(e){e instanceof Error?ja.oR.error(`Error updating post: ${e.message}`):ja.oR.error("An unknown error occurred while updating the post")}finally{I(!1)}}),[s,t]),F=(0,r.useCallback)((async e=>{A(!0);const s=new Hl.m;await s.load();try{const t="input.mp4",r="output.mp4";s.writeFile(t,await(0,Yl.t2)(e));const a=await M(e),l=Math.floor(351843720888320/a);await s.exec(["-i",t,"-b:v",`${l}`,"-maxrate",""+2*l,"-bufsize",""+4*l,"-c:v","libx264","-preset","slow","-c:a","aac","-b:a","128k",r]);const n=await s.readFile(r),i=new Blob([n],{type:"video/mp4"});return new File([i],"compressed_video.mp4",{type:"video/mp4"})}finally{if(A(!1),R){const s={...R.postData,video:e};await $(s,R.postId,R.userId),E(null)}}}),[R,$]),M=e=>new Promise((s=>{const t=document.createElement("video");t.preload="metadata",t.onloadedmetadata=()=>{window.URL.revokeObjectURL(t.src),s(t.duration)},t.src=URL.createObjectURL(e)}));return l?(0,lr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 to-purple-200",children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,lr.jsxs)("div",{className:"max-w-2xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,lr.jsxs)("div",{className:"p-6",children:[(0,lr.jsx)("h2",{className:"text-3xl font-bold text-purple-700 mb-6",children:"Edit Post"}),(0,lr.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),O(o)&&!(d&&!T(d,!0)||m&&!T(m,!1))&&e){if(I(!0),m&&m.size>en){ja.oR.info(`Compressing video to approximately ${Kl(en)}, please wait...`);try{const e=await F(m);z(e),ja.oR.success(`Video compressed to ${Kl(e.size)}`)}catch(e){return void ja.oR.error("Error compressing video. Please try again.")}}const s={content:o};if(d&&(s.image=d),D?s.video=D:m&&(s.video=m),!o.trim()&&!d&&!s.video)return void ja.oR.error("Please add some content, an image, or a video to your post.");await $(s,e,a),I(!1)}},className:"space-y-6",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"content",className:"block text-purple-700 font-bold mb-2",children:"Content"}),(0,lr.jsx)("textarea",{id:"content",value:o,onChange:e=>{const s=e.target.value;c(s),O(s)},className:`w-full px-3 py-2 text-purple-700 border ${N?"border-red-500":"border-purple-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent`,rows:4,placeholder:"What's on your mind?"}),N&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N})]}),(0,lr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,lr.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer text-purple-600 hover:bg-purple-100 p-2 rounded-full transition duration-300",children:[(0,lr.jsx)(Zl.A,{size:20}),(0,lr.jsx)("span",{className:"text-sm",children:"Add Image"}),(0,lr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];T(s,!0)?(u(s),h(URL.createObjectURL(s))):e.target.value=""}},className:"hidden"})]}),(0,lr.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer text-purple-600 hover:bg-purple-100 p-2 rounded-full transition duration-300",children:[(0,lr.jsx)(Gl.A,{size:20}),(0,lr.jsx)("span",{className:"text-sm",children:"Add Video"}),(0,lr.jsx)("input",{type:"file",accept:"video/*",onChange:async e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];if(T(s,!1))if(p(s),f(URL.createObjectURL(s)),s.size>en){ja.oR.info(`Compressing video to approximately ${Kl(en)}, please wait...`);const e=await F(s);z(e),f(URL.createObjectURL(e)),ja.oR.success(`Video compressed to ${Kl(e.size)}`)}else z(s);else e.target.value=""}},className:"hidden",disabled:S})]}),S&&(0,lr.jsx)(sn,{})]}),x&&(0,lr.jsxs)("div",{className:"relative",children:[(0,lr.jsx)("img",{src:x,alt:"Preview",className:"max-w-full h-auto rounded-lg"}),(0,lr.jsx)("button",{type:"button",onClick:()=>{u(null),h(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition duration-300",children:(0,lr.jsx)(Na.A,{size:16})})]}),g&&(0,lr.jsxs)("div",{className:"relative",children:[(0,lr.jsx)("video",{src:g,controls:!0,className:"max-w-full h-auto rounded-lg"}),(0,lr.jsx)("button",{type:"button",onClick:()=>{p(null),z(null),f(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition duration-300",children:(0,lr.jsx)(Na.A,{size:16})})]}),(0,lr.jsxs)("div",{className:"flex justify-end items-center",children:[S&&(0,lr.jsx)("span",{className:"text-purple-600 mr-4",children:"Compressing video..."}),(0,lr.jsx)("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors duration-300 disabled:opacity-50",disabled:P,children:P?"Updating...":"Update Post"})]})]})]}),(0,lr.jsxs)("div",{className:"p-6 border-t border-purple-200",children:[(0,lr.jsx)("h3",{className:"text-xl font-bold text-purple-700 mb-4",children:"Post Details"}),(0,lr.jsxs)("p",{className:"text-purple-600 mb-2",children:["Likes: ",l.likes.length]}),(0,lr.jsxs)("p",{className:"text-purple-600 mb-4",children:["Comments: ",l.comments.length]}),(0,lr.jsx)("h4",{className:"text-lg font-semibold text-purple-700 mb-2",children:"Comments"}),(0,lr.jsx)("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:l.comments.map((e=>{return(0,lr.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg flex justify-between items-start",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"text-purple-800 font-medium",children:e.userId.name}),(0,lr.jsx)("p",{className:"text-purple-600",children:e.content}),(0,lr.jsx)("p",{className:"text-purple-400 text-sm",children:(s=e.createdAt,new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,lr.jsx)("button",{onClick:()=>(async e=>{v(e),b(!0)})(e.id),className:"text-red-500 hover:text-red-700 transition-colors duration-200",children:(0,lr.jsx)(cn.A,{size:16})})]},e.id);var s}))})]})]})}),(0,lr.jsx)(dn,{isOpen:j,onClose:()=>b(!1),onConfirm:async()=>{e&&y&&(await s(Ve({postId:e,commentId:y})),v(null))},title:"Delete Comment",message:"Are you sure you want to delete this comment? This action cannot be undone."}),C&&(0,lr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:C}),(S||P)&&(0,lr.jsx)(rn,{})]}):(0,lr.jsx)("div",{children:"Loading..."})},xn=()=>{var e,s,t,a,l,n,o,c,d;const u=(0,i.wA)(),{jobPosts:m,loading:p,error:x}=(0,i.d4)((e=>e.adminJobPost)),[h,g]=(0,r.useState)(null),[f,j]=(0,r.useState)(""),[b,y]=(0,r.useState)(null),[v,N]=(0,r.useState)(1),[w,C]=(0,r.useState)([]),[k,S]=(0,r.useState)("reports"),[A,P]=(0,r.useState)(!1);(0,r.useEffect)((()=>{u(Ze())}),[u]),(0,r.useEffect)((()=>{const e=[...m].sort(((e,s)=>{if("reports"===k){var t,r;const a=(null===(t=e.reports)||void 0===t?void 0:t.length)||0,l=(null===(r=s.reports)||void 0===r?void 0:r.length)||0;if(l!==a)return l-a}return new Date(s.updatedAt).getTime()-new Date(e.updatedAt).getTime()}));C(e)}),[m,k]);const I=w.filter((e=>{var s;return e.title.toLowerCase().includes(f.toLowerCase())||!(null===(s=e.company)||void 0===s||!s.name)&&e.company.name.toLowerCase().includes(f.toLowerCase())})),R=Math.ceil(I.length/10),E=I.slice(10*(v-1),10*v),D=e=>{N(e)};return p?(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):x?(0,lr.jsxs)("div",{className:"flex justify-center items-center h-screen text-red-500",children:["Error: ",x]}):(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-100",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,lr.jsx)(Or,{}),(0,lr.jsxs)("div",{className:"p-4 md:p-8 overflow-y-auto h-[calc(100vh-64px)]",children:[(0,lr.jsx)("h1",{className:"text-2xl font-bold mb-4 text-purple-800",children:"Job Posts"}),(0,lr.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center",children:[(0,lr.jsxs)("div",{className:"relative w-full sm:w-64 mb-2 sm:mb-0",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search job posts...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-600",value:f,onChange:e=>j(e.target.value)}),(0,lr.jsx)(Nr.KSO,{className:"absolute left-3 top-3 text-purple-400"})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)("span",{className:"mr-2 text-sm text-purple-600",children:"Sort by:"}),(0,lr.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"border border-purple-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-purple-600",children:[(0,lr.jsx)("option",{value:"reports",children:"Reports"}),(0,lr.jsx)("option",{value:"date",children:"Date"})]})]})]}),(0,lr.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,lr.jsxs)("table",{className:"min-w-full divide-y divide-purple-200",children:[(0,lr.jsx)("thead",{className:"bg-purple-50",children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Job Details"}),(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider hidden md:table-cell",children:"Company"}),(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider hidden lg:table-cell",children:"Location"}),(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider hidden xl:table-cell",children:"Posted Date"}),(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Reports"}),(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Actions"})]})}),(0,lr.jsx)("tbody",{className:"bg-white divide-y divide-purple-200",children:E.map((e=>{var s,t;return(0,lr.jsxs)("tr",{className:"hover:bg-purple-50 transition-colors duration-200",children:[(0,lr.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,lr.jsx)("div",{className:"text-sm font-medium text-purple-900",children:e.title}),(0,lr.jsx)("div",{className:"text-sm text-purple-500",children:(null===(s=e.company)||void 0===s?void 0:s.name)||"N/A"})]}),(0,lr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:(0,lr.jsxs)("div",{className:"flex items-center text-sm text-purple-600",children:[(0,lr.jsx)(Nr.ymh,{className:"mr-2"}),(null===(t=e.company)||void 0===t?void 0:t.name)||"N/A"]})}),(0,lr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:(0,lr.jsxs)("div",{className:"flex items-center text-sm text-purple-600",children:[(0,lr.jsx)(Nr.vq8,{className:"mr-2"}),e.location||"N/A"]})}),(0,lr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap hidden xl:table-cell",children:(0,lr.jsxs)("div",{className:"flex items-center text-sm text-purple-600",children:[(0,lr.jsx)(Nr.bfZ,{className:"mr-2"}),new Date(e.createdAt).toLocaleDateString()]})}),(0,lr.jsx)("td",{className:"px-6 py-4",children:e.reports&&e.reports.length>0?(0,lr.jsxs)("div",{className:"flex items-center text-red-500",children:[(0,lr.jsx)(Nr.BS8,{className:"mr-2"}),(0,lr.jsxs)("span",{children:[e.reports.length," report(s)"]})]}):(0,lr.jsx)("span",{className:"text-green-500",children:"No reports"})}),(0,lr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,lr.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,lr.jsxs)("button",{onClick:()=>(e=>{g(e)})(e),className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full hover:bg-purple-200 transition-colors duration-200",title:"View Details",children:[(0,lr.jsx)(Nr.Ny1,{className:"inline mr-1"})," View"]}),e.isBlock?(0,lr.jsxs)("button",{onClick:()=>{return s=e._id,void y({type:"unblock",postId:s});var s},className:"bg-green-100 text-green-800 px-3 py-1 rounded-full hover:bg-green-200 transition-colors duration-200",title:"Unblock Post",children:[(0,lr.jsx)(Nr.YVu,{className:"inline mr-1"})," Unblock"]}):(0,lr.jsxs)("button",{onClick:()=>{return s=e._id,void y({type:"block",postId:s});var s},className:"bg-red-100 text-red-800 px-3 py-1 rounded-full hover:bg-red-200 transition-colors duration-200",title:"Block Post",children:[(0,lr.jsx)(Nr.Rqy,{className:"inline mr-1"})," Block"]})]})})]},e._id)}))})]})}),(0,lr.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,lr.jsxs)("span",{className:"text-purple-800",children:["Page ",v," of ",R]}),(0,lr.jsxs)("div",{className:"flex space-x-2",children:[(0,lr.jsxs)("button",{onClick:()=>D(v-1),disabled:1===v,className:"bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed",children:[(0,lr.jsx)(Nr._Jj,{className:"inline mr-1"})," Previous"]}),(0,lr.jsxs)("button",{onClick:()=>D(v+1),disabled:v===R,className:"bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 disabled:bg-purple-300 disabled:cursor-not-allowed",children:["Next ",(0,lr.jsx)(Nr.X6T,{className:"inline ml-1"})]})]})]})]})]}),h&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-50",children:(0,lr.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4 text-purple-800",children:h.title}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Company:"})," ",(null===(e=h.company)||void 0===e?void 0:e.name)||"N/A"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Location:"})," ",h.location||"N/A"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Way of Work:"})," ",h.wayOfWork||"N/A"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Salary Range:"})," ",(null===(s=h.salaryRange)||void 0===s?void 0:s.min)||"N/A"," - ",(null===(t=h.salaryRange)||void 0===t?void 0:t.max)||"N/A"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Status:"})," ",h.status||"N/A"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Block Status:"})," ",h.isBlock?"Blocked":"Active"]})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Posted Date:"})," ",new Date(h.createdAt).toLocaleDateString()]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Last Updated:"})," ",new Date(h.updatedAt).toLocaleDateString()]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Job Priority:"})," ",h.jobPriority||"N/A"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Recruiter:"})," ",(null===(a=h.recruiterId)||void 0===a?void 0:a.name)||"N/A","-"," ",null===(l=h.recruiterId)||void 0===l?void 0:l.email]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Applicants:"})," ",(null===(n=h.applicants)||void 0===n?void 0:n.length)||0]}),(0,lr.jsxs)("button",{onClick:()=>P(!0),className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full hover:bg-purple-200 transition-colors duration-200",children:[(0,lr.jsx)(Nr.M5n,{className:"inline mr-1"})," View Applicants"]}),(0,lr.jsxs)("p",{className:"mb-2",children:[(0,lr.jsx)("strong",{children:"Reports:"})," ",(null===(o=h.reports)||void 0===o?void 0:o.length)||0]})]})]}),(0,lr.jsxs)("div",{className:"mt-4",children:[(0,lr.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description:"}),(0,lr.jsx)("p",{className:"mb-4 text-gray-700",children:h.description||"N/A"}),(0,lr.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Skills Required:"}),(0,lr.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:(null===(c=h.skillsRequired)||void 0===c?void 0:c.map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm",children:e},s))))||"N/A"}),(0,lr.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Qualifications:"}),(0,lr.jsx)("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:(null===(d=h.qualifications)||void 0===d?void 0:d.map(((e,s)=>(0,lr.jsx)("li",{children:e},s))))||(0,lr.jsx)("li",{children:"N/A"})}),h.reports&&h.reports.length>0&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{className:"text-lg font-semibold mb-2 text-red-600",children:"Reports:"}),(0,lr.jsx)("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:h.reports.map(((e,s)=>{var t;return(0,lr.jsxs)("li",{children:[(0,lr.jsx)("strong",{children:null===(t=e.user)||void 0===t?void 0:t.name}),": ",e.reason,(0,lr.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",new Date(e.createdAt).toLocaleDateString(),")"]})]},s)}))})]})]}),A&&h&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-50",children:(0,lr.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,lr.jsxs)("h2",{className:"text-2xl font-bold mb-4 text-purple-800",children:["Applicants for ",h.title]}),h.applicants&&h.applicants.length>0?(0,lr.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,lr.jsx)("thead",{className:"bg-gray-50",children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,lr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"})]})}),(0,lr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.applicants.map(((e,s)=>(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),(0,lr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.email})]},s)))})]}):(0,lr.jsx)("p",{className:"text-gray-700",children:"No applicants yet."}),(0,lr.jsx)("div",{className:"mt-6 flex justify-end",children:(0,lr.jsx)("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400 transition-colors duration-200",children:"Close"})})]})}),(0,lr.jsxs)("div",{className:"mt-6 flex justify-end space-x-2",children:[h.isBlock?(0,lr.jsx)("button",{onClick:()=>{y({type:"unblock",postId:h._id}),g(null)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors duration-200",children:"Unblock Post"}):(0,lr.jsx)("button",{onClick:()=>{y({type:"block",postId:h._id}),g(null)},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors duration-200",children:"Block Post"}),(0,lr.jsx)("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400 transition-colors duration-200",children:"Close"})]})]})}),b&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-50",children:(0,lr.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[(0,lr.jsx)("h2",{className:"text-xl font-bold mb-4 text-purple-800",children:"Confirm Action"}),(0,lr.jsxs)("p",{className:"mb-4",children:["Are you sure you want to"," ","block"===b.type?"block":"unblock"," this job post?","block"===b.type?" This will prevent users from viewing or applying to this job.":" This will make the job post visible and allow users to apply again."]}),(0,lr.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,lr.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400 transition-colors duration-200",children:"Cancel"}),(0,lr.jsxs)("button",{onClick:()=>{b&&("block"===b.type?u(Ge(b.postId)):u(He(b.postId)),C((e=>e.map((e=>e._id===b.postId?{...e,isBlock:"block"===b.type}:e)))),y(null))},className:"px-4 py-2 text-white rounded transition-colors duration-200 "+("block"===b.type?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),children:["Confirm ","block"===b.type?"Block":"Unblock"]})]})]})})]})},hn=()=>{const{userId:e}=(0,n.g)(),s=(0,n.Zp)(),t=(0,i.wA)(),{connectionProfile:a,loading:l,error:o}=(0,i.d4)((e=>e.connections));return(0,r.useEffect)((()=>{e&&t(Ke(e))}),[t,e]),l?(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsx)("div",{className:"flex justify-center m-3 items-center h-screen bg-gray-100",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})})}):o?(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:(0,lr.jsx)("div",{className:"text-red-500 text-xl",children:o})})}):a?(0,lr.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,lr.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,lr.jsxs)("button",{onClick:()=>{s(-1)},className:"mb-4 flex items-center text-purple-700 hover:text-purple-900",children:[(0,lr.jsx)(xr.g,{icon:hr.CeG,className:"mr-2"}),"Back"]}),(0,lr.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,lr.jsx)("div",{className:"bg-purple-700 p-4 sm:p-6 md:p-8",children:(0,lr.jsxs)("div",{className:"flex flex-col sm:flex-row items-center",children:[null!=a&&a.profileImage?(0,lr.jsx)("img",{src:`${a.profileImage}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover mb-4 sm:mb-0 sm:mr-6 border-4 border-white"}):(0,lr.jsx)(jr.A,{className:"w-20 h-20 text-gray-400"}),(0,lr.jsx)("div",{className:"text-center sm:text-left text-white",children:(0,lr.jsx)("h1",{className:"text-3xl font-bold",children:a.name})})]})}),(0,lr.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,lr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.y_8,className:"text-purple-500 mr-2"}),(0,lr.jsx)("span",{children:a.email})]}),a.phone&&(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.KKr,className:"text-purple-500 mr-2"}),(0,lr.jsx)("span",{children:a.phone})]}),a.dateOfBirth&&(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.RUt,className:"text-purple-500 mr-2"}),(0,lr.jsx)("span",{children:a.dateOfBirth})]}),a.gender&&(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.YP4,className:"text-purple-500 mr-2"}),(0,lr.jsx)("span",{children:a.gender})]})]}),a.bio&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-purple-700",children:"Bio"}),(0,lr.jsx)("p",{className:"text-gray-700",children:a.bio})]}),a.about&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-purple-700",children:"About"}),(0,lr.jsx)("p",{className:"text-gray-700",children:a.about})]}),a.skills&&a.skills.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-purple-700",children:"Skills"}),(0,lr.jsx)("div",{className:"flex flex-wrap gap-2",children:a.skills.map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:e},s)))})]}),a.experiences&&a.experiences.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-purple-700",children:"Experiences"}),a.experiences.map(((e,s)=>(0,lr.jsxs)("div",{className:"mb-4 bg-gray-50 p-4 rounded-lg",children:[(0,lr.jsx)("h3",{className:"text-lg font-semibold text-purple-700",children:e.title}),(0,lr.jsx)("p",{className:"text-gray-600",children:e.company}),(0,lr.jsxs)("p",{className:"text-sm text-gray-500",children:[e.startDate," - ",e.endDate||"Present"]})]},s)))]}),a.resume&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-purple-700",children:"Resume"}),(0,lr.jsx)("a",{href:a.resume,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition duration-300",children:"View Resume"})]})]})]})]})}):(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:(0,lr.jsx)("div",{className:"text-gray-500 text-xl",children:"No profile found"})})})},gn=()=>{const e=(0,i.wA)(),{user:s,connections:t,connectionRequests:a,loading:l,error:o}=(0,i.d4)((e=>({user:e.auth.user,connections:tr(e),connectionRequests:e.connections.connectionRequests,loading:e.connections.loading,error:e.connections.error}))),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)({}),p=(0,n.Zp)(),x=(0,r.useCallback)((()=>{s&&e(rs(s.id)).unwrap().catch((e=>{ja.oR.error("Failed to fetch connections. Please try again later.")}))}),[e,s]);(0,r.useEffect)((()=>{x()}),[x]);const h=(0,r.useCallback)((()=>{s&&e(as({userId:s.id,query:c})).unwrap().catch((e=>{ja.oR.error("Search failed. Please try again.")}))}),[e,s,c]),g=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!e)return"No bio available";const t=e.split(" ");return t.length>s?t.slice(0,s).join(" ")+"...":e};return(0,r.useEffect)((()=>{o&&ja.oR.error(`An error occurred: ${o}`)}),[o]),(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(fr,{}),(0,lr.jsx)(ja.N9,{position:"top-right",autoClose:5e3,hideProgressBar:!1}),(0,lr.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,lr.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4 text-purple-800",children:"My Network"}),(0,lr.jsx)("div",{className:"mb-4",children:(0,lr.jsxs)("div",{className:"flex items-center max-w-md mx-auto w-full",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search connections...",value:c,onChange:e=>d(e.target.value),className:"flex-grow px-1 py-1 text-xs border border-purple-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-purple-500","aria-label":"Search connections"}),(0,lr.jsx)("button",{onClick:h,className:"bg-purple-600 text-white px-1 py-1 text-xs rounded-r-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:(0,lr.jsx)(xr.g,{icon:hr.MjD,className:"h-3 w-3"})})]})}),l?(0,lr.jsx)("div",{className:"text-center",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500 mx-auto"})}):(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsxs)("div",{className:"bg-white mb-4",children:[(0,lr.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-2 text-purple-800",children:"Connection Requests"}),0===a.length?(0,lr.jsx)("p",{className:"text-xs text-gray-600",children:"No pending connection requests."}):(0,lr.jsx)("ul",{className:"divide-y divide-gray-200",children:a.map((t=>(0,lr.jsxs)("li",{className:"py-2 flex items-center justify-between",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)("img",{src:t.requester.profileImage||"/default-avatar.png",alt:t.requester.name,className:"w-8 h-8 rounded-full object-cover"}),(0,lr.jsxs)("div",{className:"ml-1",children:[(0,lr.jsx)("h3",{className:"text-xs font-semibold text-purple-800",children:t.requester.name}),(0,lr.jsx)("p",{className:"text-xs text-gray-600",children:g(t.requester.bio)})]})]}),(0,lr.jsxs)("div",{className:"flex space-x-1",children:[(0,lr.jsxs)("button",{className:"bg-purple-600 text-white px-1 py-1 rounded hover:bg-purple-700 transition duration-300 flex items-center text-xs",onClick:()=>(async t=>{if(s&&t){m((e=>({...e,[t]:!0})));try{await e(ss({requestId:t,userId:s.id})).unwrap(),ja.oR.success("Connection request accepted successfully."),x()}catch(e){ja.oR.error("Failed to accept connection request. Please try again.")}finally{m((e=>({...e,[t]:!1})))}}})(t._id),disabled:u[t._id],children:[(0,lr.jsx)(xr.g,{icon:hr.pCJ,className:"mr-1 h-3 w-3"}),u[t._id]?"Processing...":"Accept"]}),(0,lr.jsxs)("button",{className:"bg-gray-300 text-gray-700 px-1 py-1 rounded hover:bg-gray-400 transition duration-300 flex items-center text-xs",onClick:()=>(async t=>{if(s){m((e=>({...e,[t]:!0})));try{await e(ts({requestId:t,userId:s.id})).unwrap(),ja.oR.success("Connection request rejected successfully."),x()}catch(e){ja.oR.error("Failed to reject connection request. Please try again.")}finally{m((e=>({...e,[t]:!1})))}}})(t._id),disabled:u[t._id],children:[(0,lr.jsx)(xr.g,{icon:hr.XK8,className:"mr-1 h-3 w-3"}),u[t._id]?"Processing...":"Decline"]})]})]},t._id)))})]}),(0,lr.jsxs)("div",{className:"bg-white",children:[(0,lr.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-2 text-purple-800",children:"Your Connections"}),0===(null==t?void 0:t.length)?(0,lr.jsx)("p",{className:"text-xs text-gray-600",children:"You don't have any connections yet."}):(0,lr.jsx)("ul",{className:"divide-y divide-gray-200",children:null==t?void 0:t.map((t=>(0,lr.jsxs)("li",{className:"py-2 flex items-start",children:[(0,lr.jsx)("img",{src:t.profileImage||"/default-avatar.png",alt:t.name,className:"w-10 h-10 rounded-full object-cover mr-2"}),(0,lr.jsxs)("div",{className:"flex-grow",children:[(0,lr.jsx)("h3",{className:"text-xs font-semibold text-purple-800 cursor-pointer",onClick:()=>p(`/connection/profile/${t._id}`),children:t.name}),(0,lr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:g(t.bio)}),(0,lr.jsxs)("div",{className:"flex flex-wrap gap-1 text-xs text-gray-500",children:[t.email&&(0,lr.jsxs)("span",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.y_8,className:"mr-1 h-3 w-3"}),t.email]}),t.phone&&(0,lr.jsxs)("span",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.KKr,className:"mr-1 h-3 w-3"}),t.phone]}),t.experiences&&t.experiences.length>0&&(0,lr.jsxs)("span",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.u4D,className:"mr-1 h-3 w-3"}),t.experiences[0].company]}),t.dateOfBirth&&(0,lr.jsxs)("span",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.BEE,className:"mr-1 h-3 w-3"}),new Date(t.dateOfBirth).toLocaleDateString()]}),t.gender&&(0,lr.jsxs)("span",{className:"flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.YP4,className:"mr-1 h-3 w-3"}),t.gender]})]}),t.skills&&t.skills.length>0&&(0,lr.jsxs)("div",{className:"mt-1",children:[(0,lr.jsx)("h4",{className:"text-xs font-semibold text-gray-700",children:"Skills:"}),(0,lr.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:t.skills.map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 text-xs px-1 py-0.5 rounded",children:e},`${t._id}-skill-${s}`)))})]})]}),(0,lr.jsxs)("button",{className:"ml-2 bg-purple-100 text-purple-700 px-2 py-1 rounded-full hover:bg-purple-200 transition duration-300 text-xs flex items-center",children:[(0,lr.jsx)(xr.g,{icon:hr.pCJ,className:"mr-1 h-3 w-3"})," ","Connected"]}),(0,lr.jsxs)("button",{className:"ml-2 bg-red-600 text-white px-2 py-1 rounded-full hover:bg-red-700 transition duration-300 text-xs flex items-center",onClick:()=>(async t=>{if(s)try{await e(ns({userId:s.id,connectionId:t})).unwrap(),ja.oR.success("Connection removed successfully."),x()}catch(e){ja.oR.error("Failed to remove connection. Please try again.")}})(t._id),children:[(0,lr.jsx)(xr.g,{icon:hr.XK8,className:"mr-1 h-3 w-3"})," ","Remove"]})]},t._id)))})]})]})]})]})},fn=e=>{let{onSelectConversation:s,currentUserId:t}=e;const r=(0,i.d4)((e=>e.messages.connections)),a=(0,i.d4)((e=>e.messages.conversations)),l=r.filter((e=>e.user.id!==t));return(0,lr.jsx)("div",{className:"overflow-y-auto h-full",children:l.map((e=>{var r;const l=(n=e.user.id,(a[t<n?`${t}-${n}`:`${n}-${t}`]||[]).filter((e=>e.sender.id===n&&!e.isRead&&"read"!==e.status)).length);var n;return(0,lr.jsxs)("div",{className:"p-4 border-b border-gray-200 cursor-pointer hover:bg-purple-50 transition duration-300",onClick:()=>s(e.user.id),children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsxs)("div",{className:"relative",children:[(0,lr.jsx)("img",{src:e.user.profileImage||"/default-avatar.png",alt:e.user.name,className:"w-12 h-12 rounded-full object-cover"}),e.isOnline&&(0,lr.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,lr.jsxs)("div",{className:"ml-4 flex-grow",children:[(0,lr.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:e.user.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 truncate",children:(null===(r=e.lastMessage)||void 0===r?void 0:r.content)||"No messages yet"})]}),(0,lr.jsxs)("div",{className:"flex flex-col items-end",children:[(0,lr.jsx)("div",{className:"text-xs text-gray-500",children:e.lastMessage&&new Date(e.lastMessage.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),l>0&&(0,lr.jsx)("div",{className:"mt-1 bg-purple-600 text-white text-xs font-bold rounded-full px-2 py-1",children:l})]})]}),e.isTyping&&(0,lr.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Typing..."})]},e.user.id)}))})};var jn=t(3950),bn=t.n(jn),yn=t(6382);const vn=new class{constructor(){this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.onRemoteStreamUpdate=null,this.onCallStateChange=null,this.initializePeerConnection()}initializePeerConnection(){this.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),this.peerConnection.ontrack=e=>{this.remoteStream=e.streams[0],this.onRemoteStreamUpdate&&this.onRemoteStreamUpdate(this.remoteStream)},this.peerConnection.onicecandidate=e=>{e.candidate}}resetPeerConnection(){this.peerConnection&&this.peerConnection.close(),this.initializePeerConnection()}async startLocalStream(){return this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.localStream}async makeCall(e){this.resetPeerConnection(),this.localStream||await this.startLocalStream(),this.localStream.getTracks().forEach((e=>{this.peerConnection&&this.peerConnection.addTrack(e,this.localStream)}));const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const t=JSON.stringify(s);return yn.hp.from(t).toString("base64")}async handleIncomingCall(e){const s=yn.hp.from(e,"base64").toString("utf-8"),t=JSON.parse(s);await this.peerConnection.setRemoteDescription(new RTCSessionDescription(t))}async createAnswer(){if(!this.peerConnection)throw new Error("Peer connection not initialized");const e=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(e);const s=JSON.stringify(e);return yn.hp.from(s).toString("base64")}async handleAnswer(e){if(!this.peerConnection)throw new Error("Peer connection not initialized");const s=yn.hp.from(e,"base64").toString("utf-8"),t=JSON.parse(s);await this.peerConnection.setRemoteDescription(new RTCSessionDescription(t))}async handleIceCandidate(e){if(!this.peerConnection)throw new Error("Peer connection not initialized");const s=yn.hp.from(e,"base64").toString("utf-8"),t=JSON.parse(s);await this.peerConnection.addIceCandidate(new RTCIceCandidate(t))}setOnRemoteStreamUpdate(e){this.onRemoteStreamUpdate=e}setOnCallStateChange(e){this.onCallStateChange=e}disconnectCall(){this.localStream&&this.localStream.getTracks().forEach((e=>{e.stop()})),this.remoteStream&&this.remoteStream.getTracks().forEach((e=>{e.stop()})),this.peerConnection&&this.peerConnection.close(),this.localStream=null,this.remoteStream=null,this.peerConnection=null,this.onCallStateChange&&this.onCallStateChange("ended")}muteAudio(e){this.localStream&&this.localStream.getAudioTracks().forEach((s=>{s.enabled=!e}))}hideVideo(e){this.localStream&&this.localStream.getVideoTracks().forEach((s=>{s.enabled=!e}))}},Nn=e=>{let{recipientId:s,onEndCall:t,incomingCallData:a}=e;console.log("UserVideoCall component rendered",{recipientId:s,incomingCallData:a});const{incomingCallData:l}=or(),[n,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),g=(0,r.useRef)(null),f=(0,r.useRef)(null),j=(0,r.useCallback)((()=>{console.log("Ending call"),vn.disconnectCall(),ar.emit("userEndCall",{recipientId:s}),i(null),c(null),t()}),[s,t]);return(0,r.useEffect)((()=>{(async()=>{try{console.log("Starting user-to-user video call");const e=await vn.startLocalStream();console.log("Local stream obtained:",e),i(e),g.current&&(g.current.srcObject=e),vn.setOnRemoteStreamUpdate((e=>{console.log("Received remote stream"),c(e),f.current&&(f.current.srcObject=e)}));const t=a||l;if(t){await vn.handleIncomingCall(t.offer);const e=await vn.createAnswer();ar.emitCallAnswer(t.callerId,e)}else{const e=await vn.makeCall(s);console.log("Created offer:",e),ar.emit("userCallOffer",{recipientId:s,offer:e})}}catch(e){console.error("Error starting video call:",e),h("Failed to start video call. Please try again.")}})();const e=ar.on("userCallAnswer",(async e=>{console.log("Received call answer:",e.answerBase64);try{await vn.handleAnswer(e.answerBase64)}catch(e){console.error("Error handling call answer:",e),h("Failed to establish connection. Please try again.")}})),t=ar.onCallRejected((()=>{console.log("Call rejected"),j()})),r=ar.on("userCallEnded",(()=>{console.log("Call ended by the other user"),j()}));return()=>{console.log("Cleaning up user video call"),vn.disconnectCall(),e(),t(),r()}}),[s,a,l,j]),x?(0,lr.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Error"}),(0,lr.jsx)("p",{className:"mb-6",children:x}),(0,lr.jsx)("button",{onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"})]})}):(0,lr.jsx)("div",{className:"fixed inset-0  bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-4",children:[(0,lr.jsxs)("div",{className:"relative aspect-w-16 aspect-h-9 mb-4",children:[(0,lr.jsx)("div",{className:"w-full h-full bg-black rounded-lg overflow-hidden",children:o?(0,lr.jsx)("video",{ref:f,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):(0,lr.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white",children:n?(0,lr.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}):"Initializing call..."})}),n&&o&&(0,lr.jsx)("div",{className:"absolute bottom-4 right-4 w-1/4 h-1/4",children:(0,lr.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover rounded-lg border-2 border-white"})})]}),(0,lr.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,lr.jsx)("button",{onClick:()=>{u(!d),vn.muteAudio(!d)},className:"p-3 rounded-full "+(d?"bg-red-500":"bg-gray-200"),children:(0,lr.jsx)(xr.g,{icon:d?hr.$zK:hr.A54,className:"text-xl"})}),(0,lr.jsx)("button",{onClick:()=>{p(!m),vn.hideVideo(!m)},className:"p-3 rounded-full "+(m?"bg-red-500":"bg-gray-200"),children:(0,lr.jsx)(xr.g,{icon:m?hr.uOS:hr.n2W,className:"text-xl"})}),(0,lr.jsx)("button",{onClick:j,className:"p-3 rounded-full bg-red-500 text-white",children:(0,lr.jsx)(xr.g,{icon:hr.KKr,className:"text-xl transform rotate-135"})})]})]})})},wn=e=>{let{userId:s}=e;const t=(0,i.wA)(),a=(0,i.d4)((e=>e.auth.user)),l=a&&(a.id<s?`${a.id}-${s}`:`${s}-${a.id}`),n=(0,i.d4)((e=>e.messages.conversations[l||""]||[])),o=(0,i.d4)((e=>e.messages.connections.find((e=>e.user.id===s)))),c=(0,i.d4)((e=>{var t;return(null===(t=e.messages.connections.find((e=>e.user.id===s)))||void 0===t?void 0:t.isTyping)||!1})),[d,u]=(0,r.useState)(""),m=(0,r.useRef)(null),{sendMessage:p,emitTyping:x,isConnected:h}=(e=>{const s=(0,i.wA)(),t=(0,i.d4)((e=>e.auth.user)),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(null!=t&&t.id){console.log("Setting up socket connection for user:",t.id),ar.connect(t.id);const e=e=>{console.log("Socket disconnected:",e),l(!1)},r=e=>{console.log("Received new message:",e),e.isRecruiterMessage?(s(Ys(e)),s(at())):(s(As(e)),s(Rs(e.unreadCount)))},a=e=>{console.log("Received typing event in useSocket:",e),s(Ps(e))},n=gr("connect",(()=>{console.log("Socket connected successfully"),l(!0)})),i=gr("disconnect",e),o=gr("newMessage",r),c=gr("userTyping",a);return()=>{console.log("Cleaning up socket connection"),n(),i(),o(),c(),ar.disconnect()}}}),[null==t?void 0:t.id,s]),{sendMessage:(0,r.useCallback)((e=>{console.log("Attempting to send message:",e),a?ar.sendMessage(e):console.error("Cannot send message: Socket is not connected")}),[a]),emitTyping:(0,r.useCallback)((s=>{t&&a?(console.log("Emitting typing event:",t.id,e,s),ar.emitTyping(e,s)):a||console.error("Cannot emit typing: Socket is not connected")}),[t,e,a]),isConnected:a}})(s),[g,f]=(0,r.useState)(!1),j=(0,r.useRef)(null),{isIncomingCall:b,incomingCallData:y,isCallActive:v,acceptCall:N,rejectCall:w,setupVideoCall:C,endCall:k}=or(),S=(0,r.useRef)(),A=(0,r.useCallback)((()=>{a&&l&&!g&&0===n.length&&(t(vs({userId1:a.id,userId2:s})).unwrap().catch((e=>{})),f(!0))}),[a,l,t,s,g,n.length]);(0,r.useEffect)((()=>{A()}),[A]),(0,r.useEffect)((()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,r.useEffect)((()=>{const e=n.filter((e=>e.sender.id===s&&!e.isRead&&"read"!==e.status));e.length>0&&(t(Ns({messageIds:e.map((e=>e.id))})),t(Rs(n.filter((e=>!e.isRead)).length)),t(at()))}),[t,n,s]);const P=(0,r.useCallback)((e=>{if(e.preventDefault(),d.trim()&&a&&h){const e={senderId:a.id,recipientId:s,content:d};try{p(e),u("")}catch(e){ja.oR.error("Failed to send message. Please try again.")}}else h||ja.oR.error("Not connected to the server. Please try again later.")}),[d,a,s,p,h]);(0,r.useEffect)((()=>{S.current=bn()((e=>{x(e)}),300)}),[x]);const I=(0,r.useCallback)((()=>{var e;a&&(null===(e=S.current)||void 0===e||e.call(S,!0),j.current&&clearTimeout(j.current),j.current=setTimeout((()=>{var e;null===(e=S.current)||void 0===e||e.call(S,!1)}),3e3))}),[a]);(0,r.useEffect)((()=>()=>{j.current&&clearTimeout(j.current)}),[]);const R=(0,r.useCallback)((()=>{N()}),[N]),E=(0,r.useCallback)((()=>{C(s)}),[s,C]),D=(0,r.useCallback)((()=>{k()}),[k]);return a?(0,lr.jsxs)("div",{className:"flex flex-col h-full container mx-auto",children:[(0,lr.jsx)(ja.N9,{position:"top-right",autoClose:5e3,hideProgressBar:!1}),(0,lr.jsxs)("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold text-purple-700",children:(null==o?void 0:o.user.name)||"Chat"}),(0,lr.jsx)("button",{onClick:E,className:"bg-purple-600 text-white p-2 rounded-full hover:bg-purple-700 transition duration-300",children:(0,lr.jsx)(xr.g,{icon:hr.n2W})})]}),(0,lr.jsxs)("div",{className:"flex-grow overflow-y-auto p-4",children:[n.map(((e,s)=>(0,lr.jsxs)("div",{className:"mb-4 "+(e.sender.id===(null==a?void 0:a.id)?"text-right":"text-left"),children:[(0,lr.jsx)("div",{className:`inline-block p-2 rounded-lg ${e.sender.id===(null==a?void 0:a.id)?"bg-purple-600 text-white":"bg-gray-200 text-gray-800"} break-words max-w-[70%]`,children:e.content}),(0,lr.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleTimeString()})]},`${e.id}-${s}`))),(0,lr.jsx)("div",{ref:m})]}),c&&(0,lr.jsxs)("div",{className:"p-2 text-sm text-gray-500 italic",children:[null==o?void 0:o.user.name," is typing..."]}),!h&&(0,lr.jsx)("div",{className:"p-2 text-sm text-red-500",children:"Not connected to the server. Messages may not be sent or received."}),(0,lr.jsx)("form",{onSubmit:P,className:"p-4 border-t border-gray-300",children:(0,lr.jsxs)("div",{className:"flex",children:[(0,lr.jsx)("input",{type:"text",value:d,onChange:e=>{u(e.target.value),I()},placeholder:"Type a message...",className:"flex-grow p-2 border rounded-l focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,lr.jsx)("button",{type:"submit",className:"bg-purple-600 text-white p-2 rounded-r hover:bg-purple-700 transition duration-300",children:"Send"})]})}),b&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Incoming Call"}),(0,lr.jsxs)("p",{className:"mb-6",children:["You have an incoming call from ",null==y?void 0:y.callerId]}),(0,lr.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,lr.jsx)("button",{onClick:R,className:"bg-green-500 text-white px-4 py-2 rounded-lg",children:"Accept"}),(0,lr.jsx)("button",{onClick:w,className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Reject"})]})]})}),v&&(0,lr.jsx)(Nn,{recipientId:s,onEndCall:D,incomingCallData:y})]}):(0,lr.jsx)("div",{children:"Loading..."})},Cn=e=>{let{onSelectUser:s}=e;const[t,a]=(0,r.useState)(""),l=(0,i.wA)(),n=(0,i.d4)((e=>e.auth.user)),o=(0,i.d4)((e=>e.connections.messageSearchResults));return(0,lr.jsxs)("div",{className:"flex flex-col h-full",children:[(0,lr.jsx)("form",{onSubmit:e=>{e.preventDefault(),n&&t.trim()&&l(ls({userId:n.id,query:t.trim()}))},className:"p-4 border-b",children:(0,lr.jsxs)("div",{className:"flex",children:[(0,lr.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"Search connections...",className:"flex-grow p-2 border rounded-l focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,lr.jsx)("button",{type:"submit",className:"bg-purple-500 text-white p-2 rounded-r hover:bg-purple-600 transition duration-300",children:(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,lr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,lr.jsx)("div",{className:"flex-grow overflow-y-auto",children:o.map((e=>(0,lr.jsx)("div",{className:"p-4 border-b cursor-pointer hover:bg-purple-100 transition duration-300",onClick:()=>s(e._id),children:(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)("div",{className:"w-12 h-12 rounded-full bg-purple-300 mr-3 flex-shrink-0",children:e.profileImage&&(0,lr.jsx)("img",{src:e.profileImage,alt:e.name,className:"w-full h-full rounded-full object-cover"})}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("div",{className:"font-semibold text-purple-800",children:e.name}),(0,lr.jsx)("div",{className:"text-sm text-purple-600",children:e.email})]})]})},e._id)))})]})},kn=()=>{const e=(0,i.wA)(),s=(0,i.d4)((e=>e.auth.user)),[t,a]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),c=(0,i.d4)((e=>{const t=e.userRecruiterMessages.conversations,r=e.userRecruiterMessages.messages;return t.reduce(((e,t)=>e+(r[t.id]||[]).filter((e=>!e.isRead&&!e.locallyRead&&e.senderId!==(null==s?void 0:s.id))).length),0)}));(0,r.useEffect)((()=>{null!=s&&s.id&&(e(ys(s.id)),e(Is(s.id)))}),[e,null==s?void 0:s.id]);const d=e=>{a(e),o(!1)};return(0,lr.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,lr.jsx)(fr,{}),(0,lr.jsxs)("div",{className:"flex flex-grow overflow-hidden",children:[(0,lr.jsxs)("div",{className:`w-full ${t?"hidden md:w-1/3":"md:w-1/3"} flex flex-col bg-white border-r border-gray-300`,children:[(0,lr.jsxs)("div",{className:"p-4 border-b border-gray-300",children:[(0,lr.jsx)("h2",{className:"text-2xl font-semibold text-purple-700",children:"Messages"}),(0,lr.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,lr.jsx)("button",{onClick:()=>o(!n),className:"w-full md:w-3/4 bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition duration-300",children:n?"Back to Conversations":"New Message"}),(0,lr.jsxs)(l.N_,{to:"/user/messages",className:"text-purple-600 hover:text-purple-800 relative",children:[(0,lr.jsx)(Nr.p7b,{size:24,title:"Recruiter Messages"}),c>0&&(0,lr.jsx)("span",{className:"absolute -top-2 -right-2 bg-purple-500 text-white rounded-full px-2 py-1 text-xs",children:c})]})]})]}),(0,lr.jsx)("div",{className:"flex-grow overflow-y-auto",children:n?(0,lr.jsx)(Cn,{onSelectUser:d}):(0,lr.jsx)(fn,{onSelectConversation:d,currentUserId:(null==s?void 0:s.id)||""})})]}),(0,lr.jsx)("div",{className:`w-full ${t?"flex":"hidden md:flex"} flex-col`,children:t?(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("button",{onClick:()=>{a(null)},className:"p-2 text-purple-600 hover:text-purple-800 md:hidden",children:"Back to Conversations"}),(0,lr.jsx)(wn,{userId:t})]}):(0,lr.jsx)("div",{className:"flex-grow flex items-center justify-center text-gray-500",children:"Select a conversation or start a new one"})})]})]})};var Sn=t(2073);const An=new class{constructor(){this.socket=null,this.userId=null,this.userType=null,this.connected=!1,this.onIncomingCallCallback=null,this.onCallEndedCallback=null,this.onlineStatusInterval=null}connect(e,s){this.userId=e,this.userType=s,this.socket&&this.socket.connected&&this.socket.disconnect(),this.socket=(0,rr.io)("http://localhost:5000",{transports:["websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,auth:{userId:e,userType:s}}),this.setupEventListeners(),this.startOnlineStatusUpdates()}setupEventListeners(){var e;this.socket&&(this.socket.on("connect",(()=>{this.connected=!0})),this.socket.on("disconnect",(e=>{this.connected=!1})),this.socket.on("newUserRecruiterMessage",(e=>{"user"===this.userType&&"conversationId"in e?(sr.dispatch(Ys(e)),sr.dispatch(st({id:e.conversationId,lastMessage:e.content,lastMessageTimestamp:e.timestamp,lastMessageRead:!1}))):"recruiter"===this.userType&&"conversationId"in e&&(sr.dispatch($s(e)),sr.dispatch(Ls({id:e.conversationId,lastMessage:e.content,lastMessageTimestamp:e.timestamp,lastMessageRead:!1})))})),this.socket.on("userRecruiterTyping",(e=>{let{senderId:s,conversationId:t}=e;"user"===this.userType?sr.dispatch(Ks({userId:s,conversationId:t,isTyping:!0})):sr.dispatch(Fs({userId:s,conversationId:t,isTyping:!0}))})),this.socket.on("userRecruiterStoppedTyping",(e=>{let{senderId:s,conversationId:t}=e;"user"===this.userType?sr.dispatch(Ks({userId:s,conversationId:t,isTyping:!1})):sr.dispatch(Fs({userId:s,conversationId:t,isTyping:!1}))})),this.socket.on("userRecruiterMessageMarkedAsRead",(e=>{let{messageId:s,conversationId:t}=e;"user"===this.userType?(sr.dispatch(Xs({messageId:s,conversationId:t})),sr.dispatch(st({id:t,lastMessageRead:!0}))):(sr.dispatch(Ms({messageId:s,conversationId:t})),sr.dispatch(Ls({id:t,lastMessageRead:!0})))})),this.socket.on("userOnlineStatus",(e=>{let{userId:s,online:t}=e;"user"===this.userType?sr.dispatch(et({userId:s,online:t})):sr.dispatch(qs({userId:s,online:t}))})),this.socket.on("newRecruiterConversation",(e=>{"user"===this.userType?sr.dispatch(tt(e)):sr.dispatch(_s(e))})),this.socket.on("initialOnlineStatus",(e=>{"user"===this.userType?e.forEach((e=>{sr.dispatch(et({userId:e,online:!0}))})):e.forEach((e=>{sr.dispatch(qs({userId:e,online:!0}))}))})),this.socket.on("incomingCall",(e=>{this.onIncomingCallCallback&&this.onIncomingCallCallback(e.callerId,e.offer)})),this.socket.on("callEnded",(()=>{this.onCallEndedCallback&&this.onCallEndedCallback()})),null===(e=this.socket)||void 0===e||e.on("onlineStatusUpdate",(e=>{"user"===this.userType?(sr.dispatch(et({userId:this.userId,online:!0})),e.forEach((e=>{sr.dispatch(et({userId:e,online:!0}))}))):(sr.dispatch(qs({userId:this.userId,online:!0})),e.forEach((e=>{sr.dispatch(qs({userId:e,online:!0}))})))})))}startOnlineStatusUpdates(){this.onlineStatusInterval&&clearInterval(this.onlineStatusInterval),this.onlineStatusInterval=setInterval((()=>{this.socket&&this.connected&&this.socket.emit("requestOnlineStatus")}),3e4)}joinConversation(e){this.socket&&this.connected&&this.socket.emit("joinUserRecruiterConversation",e)}leaveConversation(e){this.socket&&this.connected&&this.socket.emit("leaveUserRecruiterConversation",e)}sendMessage(e,s,t){if(this.socket&&this.connected){const r=(new Date).toISOString(),a={id:(0,Sn.A)(),conversationId:e,content:s,senderId:t,timestamp:r,isRead:!1,senderType:this.userType};this.socket.emit("sendUserRecruiterMessage",a)}}emitTyping(e,s){this.socket&&this.connected&&this.socket.emit("userRecruiterTyping",{conversationId:e,senderId:this.userId,recipientId:s})}emitStoppedTyping(e,s){this.socket&&this.connected&&this.socket.emit("userRecruiterStoppedTyping",{conversationId:e,senderId:this.userId,recipientId:s})}markMessageAsRead(e,s){this.socket&&this.connected&&this.socket.emit("markUserRecruiterMessageAsRead",{messageId:e,conversationId:s})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.connected=!1,this.onlineStatusInterval&&clearInterval(this.onlineStatusInterval)}onIncomingCall(e){this.onIncomingCallCallback=e}offIncomingCall(e){var s;null===(s=this.socket)||void 0===s||s.off("incomingCall",e)}emitCallOffer(e,s){var t;null===(t=this.socket)||void 0===t||t.emit("callOffer",{recipientId:e,offer:s})}emitCallAnswer(e,s){var t;null===(t=this.socket)||void 0===t||t.emit("callAnswer",{callerId:e,answer:s})}emitCallRejected(e){var s;null===(s=this.socket)||void 0===s||s.emit("callRejected",{callerId:e})}onCallAnswer(e){var s;null===(s=this.socket)||void 0===s||s.on("callAnswer",e)}onCallRejected(e){var s;null===(s=this.socket)||void 0===s||s.on("callRejected",e)}emitEndCall(e){var s;null===(s=this.socket)||void 0===s||s.emit("endCall",{recipientId:e})}onCallEnded(e){this.onCallEndedCallback=e}},Pn=e=>{let{onSelectConversation:s,selectedConversationId:t}=e;const a=(0,i.wA)(),l=(0,i.d4)((e=>e.recruiterMessages.RecruiterConversations)),n=(0,i.d4)((e=>e.recruiterMessages.RecruiterMessages)),o=(0,i.d4)((e=>{var s;return null===(s=e.recruiter.recruiter)||void 0===s?void 0:s.id})),c=(0,i.d4)((e=>e.recruiterMessages.onlineStatus)),[d,u]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{o&&(u(!0),await a(Ds(o)),An.connect(o,"recruiter"),u(!1))})()}),[a,o]),d?(0,lr.jsx)("div",{children:"Loading conversations..."}):0===l.length?(0,lr.jsx)("div",{children:"No conversations found."}):(0,lr.jsxs)("div",{className:"w-1/3 border-r",children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold p-4 border-b",children:"Conversations"}),(0,lr.jsx)("ul",{children:l.map((e=>{const r=(a=e.id,(n[a]||[]).filter((e=>!e.isRead&&!e.locallyRead&&e.senderId!==o)).length);var a;return(0,lr.jsxs)("li",{className:"p-4 border-b hover:bg-gray-100 cursor-pointer flex items-center "+(e.id===t?"bg-gray-100":""),onClick:()=>s(e.id),children:[(0,lr.jsxs)("div",{className:"relative mr-4",children:[(0,lr.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gray-200 flex items-center justify-center",children:e.participant.profileImage?(0,lr.jsx)("img",{src:e.participant.profileImage,alt:`${e.participant.name}'s avatar`,className:"w-full h-full object-cover"}):(0,lr.jsx)("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center text-gray-600 font-bold text-xl",children:e.participant.name.charAt(0)})}),c[e.participant.id]&&(0,lr.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white transform translate-x-1 translate-y-1"})]}),(0,lr.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,lr.jsx)("h3",{className:"font-semibold truncate",children:e.participant.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.lastMessage})]}),r>0&&(0,lr.jsx)("div",{className:"bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs ml-2 absolute right-0",children:r})]},e.id)}))})]})};var In=t(7257),Rn=t(6200);const En=e=>{let{participantName:s,isOnline:t,children:r}=e;return(0,lr.jsxs)("div",{className:"bg-white border-b p-4 flex items-center justify-between",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)("div",{className:"font-semibold",children:s}),(0,lr.jsx)("div",{className:"ml-2 w-3 h-3 rounded-full "+(t?"bg-green-500":"bg-gray-400")})]}),r]})},Dn=new class{constructor(){this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.onRemoteStreamUpdate=null,this.onCallStateChange=null,this.initializePeerConnection()}initializePeerConnection(){this.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),this.peerConnection.ontrack=e=>{this.remoteStream=e.streams[0],this.onRemoteStreamUpdate&&this.onRemoteStreamUpdate(this.remoteStream)},this.peerConnection.onicecandidate=e=>{e.candidate}}resetPeerConnection(){this.peerConnection&&this.peerConnection.close(),this.initializePeerConnection()}async startLocalStream(){return this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.localStream}async makeCall(e){this.resetPeerConnection(),this.localStream||await this.startLocalStream(),this.localStream.getTracks().forEach((e=>{this.peerConnection&&this.peerConnection.addTrack(e,this.localStream)}));const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s);const t=JSON.stringify(s);return yn.hp.from(t).toString("base64")}async handleIncomingCall(e){this.resetPeerConnection(),this.localStream||await this.startLocalStream(),this.localStream.getTracks().forEach((e=>{this.peerConnection&&this.peerConnection.addTrack(e,this.localStream)}));const s=yn.hp.from(e,"base64").toString("utf-8"),t=JSON.parse(s);await this.peerConnection.setRemoteDescription(new RTCSessionDescription(t));const r=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(r);const a=JSON.stringify(r);return yn.hp.from(a).toString("base64")}async handleAnswer(e){if(!this.peerConnection)throw new Error("Peer connection not initialized");const s=yn.hp.from(e,"base64").toString("utf-8"),t=JSON.parse(s);await this.peerConnection.setRemoteDescription(new RTCSessionDescription(t))}async handleIceCandidate(e){if(!this.peerConnection)throw new Error("Peer connection not initialized");const s=yn.hp.from(e,"base64").toString("utf-8"),t=JSON.parse(s);await this.peerConnection.addIceCandidate(new RTCIceCandidate(t))}setOnRemoteStreamUpdate(e){this.onRemoteStreamUpdate=e}setOnCallStateChange(e){this.onCallStateChange=e}disconnectCall(){this.localStream&&this.localStream.getTracks().forEach((e=>{e.stop()})),this.peerConnection&&this.peerConnection.close(),this.localStream=null,this.remoteStream=null,this.peerConnection=null,this.onCallStateChange&&this.onCallStateChange("ended")}endCall(){this.disconnectCall()}muteAudio(e){this.localStream&&this.localStream.getAudioTracks().forEach((s=>{s.enabled=!e}))}hideVideo(e){this.localStream&&this.localStream.getVideoTracks().forEach((s=>{s.enabled=!e}))}},zn=e=>{let{isRecruiter:s,recipientId:t,onEndCall:a}=e;const[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),h=(0,r.useRef)(null),g=(0,r.useRef)(null),f=(0,r.useCallback)((()=>{Dn.disconnectCall(),An.emitEndCall(t),n(null),o(null),a()}),[t,a]);return(0,r.useEffect)((()=>((async()=>{try{const e=await Dn.startLocalStream();if(n(e),h.current&&(h.current.srcObject=e),Dn.setOnRemoteStreamUpdate((e=>{o(e),g.current&&(g.current.srcObject=e)})),s){const e=await Dn.makeCall(t);An.emitCallOffer(t,e)}}catch(e){console.error("Error starting video call:",e),x("Failed to start video call. Please try again.")}})(),An.onCallAnswer((async e=>{try{await Dn.handleAnswer(e)}catch(e){console.error("Error handling call answer:",e),x("Failed to establish connection. Please try again.")}})),An.onCallRejected((()=>{f()})),()=>{Dn.disconnectCall()})),[s,t,f]),(0,r.useEffect)((()=>{h.current&&l&&(h.current.srcObject=l)}),[l]),(0,r.useEffect)((()=>{g.current&&i&&(g.current.srcObject=i)}),[i]),p?(0,lr.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Error"}),(0,lr.jsx)("p",{className:"mb-6",children:p}),(0,lr.jsx)("button",{onClick:a,className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"})]})}):(0,lr.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-4",children:[(0,lr.jsxs)("div",{className:"relative aspect-w-16 aspect-h-9 mb-4",children:[(0,lr.jsx)("div",{className:"w-full h-full bg-black rounded-lg overflow-hidden",children:i?(0,lr.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):(0,lr.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white",children:l?(0,lr.jsx)("video",{ref:h,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}):"Initializing call..."})}),l&&i&&(0,lr.jsx)("div",{className:"absolute bottom-4 right-4 w-1/4 h-1/4",children:(0,lr.jsx)("video",{ref:h,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover rounded-lg border-2 border-white"})})]}),(0,lr.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,lr.jsx)("button",{onClick:()=>{d(!c),Dn.muteAudio(!c)},className:"p-3 rounded-full "+(c?"bg-red-500":"bg-gray-200"),children:(0,lr.jsx)(xr.g,{icon:c?hr.$zK:hr.A54,className:"text-xl"})}),(0,lr.jsx)("button",{onClick:()=>{m(!u),Dn.hideVideo(!u)},className:"p-3 rounded-full "+(u?"bg-red-500":"bg-gray-200"),children:(0,lr.jsx)(xr.g,{icon:u?hr.uOS:hr.n2W,className:"text-xl"})}),(0,lr.jsx)("button",{onClick:f,className:"p-3 rounded-full bg-red-500 text-white",children:(0,lr.jsx)(xr.g,{icon:hr.KKr,className:"text-xl transform rotate-135"})})]})]})})},On=e=>{let{conversationId:s}=e;const t=(0,i.wA)(),a=(0,i.d4)((e=>e.recruiterMessages.RecruiterMessages[s]||[])),l=(0,i.d4)((e=>e.recruiter.recruiter)),n=(0,i.d4)((e=>e.recruiterMessages.typingStatus[s]||{})),o=(0,i.d4)((e=>e.recruiterMessages.RecruiterConversations.find((e=>e.id===s)))),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),p=(0,r.useRef)(null),x=(0,r.useRef)(null),h=(0,i.d4)((e=>e.recruiterMessages.onlineStatus)),[g,f]=(0,r.useState)(!1),[j,b]=(0,r.useState)(null),y=(0,r.useCallback)((()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)}),[]);(0,r.useEffect)((()=>((async()=>{try{await t(zs(s)).unwrap(),t(Us(s)),An.joinConversation(s)}catch(e){b("Failed to load messages. Please try again."),ja.oR.error("Failed to load messages. Please try again.")}})(),()=>{An.leaveConversation(s)})),[t,s]),(0,r.useEffect)((()=>{y()}),[a,y]);const v=e=>{const s=new Date(e);return(0,In.f)(s)?(0,Rn.GP)(s,"HH:mm"):"Invalid Date"},N=Object.values(n).some((e=>e));return(0,r.useEffect)((()=>(An.onCallEnded((()=>{f(!1)})),()=>{})),[]),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,lr.jsx)(En,{participantName:(null==o?void 0:o.participant.name)||"Unknown",isOnline:h[(null==o?void 0:o.participant.id)||""]||!1,children:(0,lr.jsx)("button",{onClick:()=>{f(!0)},className:"ml-2 p-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-colors",children:(0,lr.jsx)(xr.g,{icon:hr.n2W})})}),j&&(0,lr.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,lr.jsx)("span",{className:"block sm:inline",children:j})}),(0,lr.jsx)("div",{ref:p,className:"flex-1 overflow-y-auto p-4 space-y-4",children:a.map((e=>(0,lr.jsx)("div",{className:"flex "+(e.senderId===(null==l?void 0:l.id)?"justify-end":"justify-start"),children:(0,lr.jsxs)("div",{className:"max-w-[70%] p-2 rounded-lg "+(e.senderId===(null==l?void 0:l.id)?"bg-purple-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"),onMouseEnter:()=>{var t;e.senderId===(null==l?void 0:l.id)||e.isRead||(t=e.id,l&&An.markMessageAsRead(t,s))},children:[(0,lr.jsx)("div",{className:"break-words",children:e.content}),(0,lr.jsxs)("div",{className:"text-xs mt-1 flex justify-between items-center",children:[(0,lr.jsx)("span",{className:"text-gray-500",children:v(e.timestamp)}),e.senderId===(null==l?void 0:l.id)&&(0,lr.jsx)("span",{className:"ml-2",children:e.isRead?(0,lr.jsx)("span",{className:"text-blue-400",children:""}):(0,lr.jsx)("span",{className:"text-gray-400",children:""})})]})]})},`${e.id}-${e.timestamp}`)))}),(0,lr.jsxs)("div",{className:"border-t p-4",children:[N&&(0,lr.jsxs)("div",{className:"text-sm text-gray-500 italic mb-2",children:[null==o?void 0:o.participant.name," is typing..."]}),(0,lr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim()&&l)try{t(Ws(!0)),await An.sendMessage(s,c,l.id),d("")}catch(e){b("Failed to send message. Please try again."),ja.oR.error("Failed to send message. Please try again.")}finally{t(Ws(!1))}},className:"flex",children:[(0,lr.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),u||(m(!0),An.emitTyping(s,(null==o?void 0:o.participant.id)||"")),x.current&&clearTimeout(x.current),x.current=setTimeout((()=>{m(!1),An.emitStoppedTyping(s,(null==o?void 0:o.participant.id)||"")}),3e3)},className:"flex-1 border rounded-l-lg p-2 w-full",placeholder:"Type a message..."}),(0,lr.jsx)("button",{type:"submit",className:"bg-purple-500 text-white rounded-r-lg px-4 py-2 whitespace-nowrap",children:"Send"})]})]}),g&&(0,lr.jsx)(zn,{isRecruiter:!0,recipientId:(null==o?void 0:o.participant.id)||"",onEndCall:()=>{f(!1),An.emitEndCall((null==o?void 0:o.participant.id)||"")}})]})},Tn=()=>{const[e,s]=(0,r.useState)(null);return(0,lr.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,lr.jsx)(Pn,{onSelectConversation:s,selectedConversationId:e}),e?(0,lr.jsx)(On,{conversationId:e}):(0,lr.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a conversation to start messaging"})]})]})},$n=e=>{let{onSelectConversation:s,selectedConversationId:t}=e;const a=(0,i.wA)(),l=(0,i.d4)((e=>e.userRecruiterMessages.conversations)),n=(0,i.d4)((e=>e.userRecruiterMessages.messages)),o=(0,i.d4)((e=>e.auth.user)),c=(0,i.d4)((e=>e.userRecruiterMessages.onlineStatus)),[d,u]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{null!=o&&o.id&&(u(!0),await a(Js(o.id)),An.connect(o.id,"user"),u(!1))})()}),[a,o]),d?(0,lr.jsx)("div",{children:"Loading conversations..."}):0===l.length?(0,lr.jsx)("div",{children:"No conversations found."}):(0,lr.jsxs)("div",{className:"w-1/3 border-r",children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold p-4 border-b",children:"Conversations"}),(0,lr.jsx)("ul",{children:l.map((e=>{const r=(a=e.id,(n[a]||[]).filter((e=>!e.isRead&&!e.locallyRead&&e.senderId!==(null==o?void 0:o.id))).length);var a;return(0,lr.jsxs)("li",{className:"p-4 border-b hover:bg-gray-100 cursor-pointer flex items-center "+(e.id===t?"bg-gray-100":""),onClick:()=>s(e.id),children:[(0,lr.jsxs)("div",{className:"relative mr-4",children:[(0,lr.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gray-200 flex items-center justify-center",children:e.participant.profileImage?(0,lr.jsx)("img",{src:e.participant.profileImage,alt:e.participant.name,className:"w-full h-full object-cover"}):(0,lr.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:e.participant.name.charAt(0)})}),c[e.participant.id]&&(0,lr.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white transform translate-x-1 translate-y-1"})]}),(0,lr.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,lr.jsx)("h3",{className:"font-semibold truncate",children:e.participant.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.lastMessage})]}),r>0&&(0,lr.jsx)("div",{className:"bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs ml-2",children:r})]},e.id)}))})]})};var Fn=t(4653);const Mn=e=>{let{conversationId:s}=e;const t=(0,i.wA)(),a=(0,i.d4)((e=>e.userRecruiterMessages.messages[s]||[])),l=(0,i.d4)((e=>e.auth.user)),n=(0,i.d4)((e=>e.userRecruiterMessages.typingStatus[s]||{})),o=(0,i.d4)((e=>e.userRecruiterMessages.conversations.find((e=>e.id===s)))),c=(0,i.d4)((e=>e.userRecruiterMessages.onlineStatus)),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),x=(0,r.useRef)(null),h=(0,r.useRef)(null),[g,f]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),N=(0,i.d4)((e=>e.userRecruiterMessages.messageSending)),w=(0,r.useCallback)((()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)}),[]);(0,r.useEffect)((()=>(t(Zs(s)),An.joinConversation(s),()=>{An.leaveConversation(s)})),[t,s]),(0,r.useEffect)((()=>{w()}),[a,w]),console.log("conversation",o);const C=e=>{if(!e)return console.error("Invalid date: undefined"),"Invalid Date";let s=null;return s=(0,Fn.H)(e),(0,In.f)(s)||(s=new Date(e)),(0,In.f)(s)?(0,Rn.GP)(s,"HH:mm"):(console.error(`Invalid date: ${e}`),"Invalid Date")},k=Object.values(n).some((e=>e));return(0,r.useEffect)((()=>{const e=(e,s)=>{console.log("Handling incoming call:",{callerId:e,offerBase64:s}),b(!0),v(s)};return An.onIncomingCall(e),()=>{An.offIncomingCall(e)}}),[]),console.log("UserConversation render state:",{incomingCall:j,isVideoCallActive:g,incomingCallOffer:y}),(0,r.useEffect)((()=>{An.onCallEnded((()=>{f(!1)}))}),[]),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,lr.jsx)(En,{participantName:(null==o?void 0:o.participant.name)||"Unknown",isOnline:c[(null==o?void 0:o.participant.id)||""]||!1}),(0,lr.jsx)("div",{ref:x,className:"flex-grow overflow-y-auto p-4",style:{maxHeight:"calc(100vh - 200px)"},children:a.map((e=>(0,lr.jsx)("div",{className:"mb-4 flex "+(e.senderId===(null==l?void 0:l.id)?"justify-end":"justify-start"),children:(0,lr.jsxs)("div",{className:"max-w-[70%] p-2 rounded-lg "+(e.senderId===(null==l?void 0:l.id)?"bg-purple-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"),onMouseEnter:()=>{var t;e.senderId===(null==l?void 0:l.id)||e.isRead||(t=e.id,An.markMessageAsRead(t,s))},children:[(0,lr.jsx)("div",{children:e.content}),(0,lr.jsxs)("div",{className:"text-xs mt-1 flex justify-between items-center",children:[(0,lr.jsx)("span",{className:"text-gray-500",children:C(e.timestamp)}),e.senderId===(null==l?void 0:l.id)&&(0,lr.jsx)("span",{className:"ml-2",children:e.isRead?(0,lr.jsx)("span",{className:"text-blue-400",children:""}):(0,lr.jsx)("span",{className:"text-gray-400",children:""})})]})]})},`${e.id}-${e.timestamp}`)))}),(0,lr.jsxs)("div",{className:"border-t p-4 bg-white",children:[k&&(0,lr.jsxs)("div",{className:"text-sm text-gray-500 italic mb-2",children:[null==o?void 0:o.participant.name," is typing..."]}),(0,lr.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d.trim()&&l&&(t(lt(!0)),An.sendMessage(s,d,l.id),u(""),setTimeout((()=>t(lt(!1))),2e3))},className:"flex",children:[(0,lr.jsx)("input",{type:"text",value:d,onChange:e=>{u(e.target.value),m||(p(!0),An.emitTyping(s,(null==o?void 0:o.participant.id)||"")),h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{p(!1),An.emitStoppedTyping(s,(null==o?void 0:o.participant.id)||"")}),3e3)},className:"flex-1 border rounded-l-lg p-2",placeholder:"Type a message..."}),(0,lr.jsx)("button",{type:"submit",className:"bg-purple-500 text-white rounded-r-lg px-4 py-2",disabled:N,children:N?"Sending...":"Send"})]})]}),j&&(0,lr.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Incoming Video Call"}),(0,lr.jsxs)("p",{className:"mb-6",children:["from ",null==o?void 0:o.participant.name]}),(0,lr.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,lr.jsx)("button",{onClick:async()=>{if(y){b(!1),f(!0);const e=await Dn.handleIncomingCall(y);An.emitCallAnswer((null==o?void 0:o.participant.id)||"",e),v(null)}},className:"p-3 rounded-full bg-green-500 text-white",children:(0,lr.jsx)(xr.g,{icon:hr.n2W,className:"text-xl"})}),(0,lr.jsx)("button",{onClick:()=>{b(!1),An.emitCallRejected((null==o?void 0:o.participant.id)||"")},className:"p-3 rounded-full bg-red-500 text-white",children:(0,lr.jsx)(xr.g,{icon:hr.KKr,className:"text-xl transform rotate-135"})})]})]})}),g&&(0,lr.jsx)(zn,{isRecruiter:!1,recipientId:(null==o?void 0:o.participant.id)||"",onEndCall:()=>{f(!1),An.emitEndCall((null==o?void 0:o.participant.id)||"")}})]})},Un=()=>{const[e,s]=(0,r.useState)(null),t=(0,i.d4)((e=>e.userRecruiterMessages.conversations)),[a,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const s=t[0];s&&s.id!==e&&s.unreadCount>0&&(l(`New message from ${s.participant.name}`),setTimeout((()=>l(null)),0))}),[t,e]),(0,lr.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,lr.jsx)(fr,{}),(0,lr.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,lr.jsx)($n,{onSelectConversation:e=>{s(e),l(null)},selectedConversationId:e}),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col",children:[a&&(0,lr.jsx)("div",{className:"bg-purple-500 text-white p-2 text-center",children:a}),e?(0,lr.jsx)(Mn,{conversationId:e}):(0,lr.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Select a conversation to start messaging"})]})]})]})},qn=()=>{const e=(0,i.wA)(),{subscriptions:s,loading:t,error:a,totalPages:l,currentPage:n}=(0,i.d4)((e=>e.subscriptions)),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[m,p]=(0,r.useState)("");(0,r.useEffect)((()=>{e(it({page:n,limit:15}))}),[e,n]);const x=s=>{s>=1&&s<=l&&e(it({page:s,limit:15}))},h=s.filter((e=>e.name.toLowerCase().includes(m.toLowerCase())||e.companyName.toLowerCase().includes(m.toLowerCase())));return(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-100",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,lr.jsx)(Or,{}),(0,lr.jsxs)("main",{className:"p-6 flex-grow overflow-auto",children:[a&&(0,lr.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,lr.jsx)("strong",{className:"font-bold",children:"Error:"}),(0,lr.jsxs)("span",{className:"block sm:inline",children:[" ",a]})]}),(0,lr.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,lr.jsx)("h1",{className:"text-2xl font-semibold text-purple-800 mb-6",children:"Subscription Management"}),t?(0,lr.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}):s&&0!==s.length?(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsxs)("div",{className:"mb-4 flex",children:[(0,lr.jsxs)("div",{className:"relative flex-grow",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search subscriptions...",value:m,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border rounded-lg text-gray-700 focus:outline-none focus:border-purple-500"}),m&&(0,lr.jsx)("button",{onClick:()=>{p("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-800",children:(0,lr.jsx)(Nr.QCr,{})})]}),(0,lr.jsx)("button",{className:"ml-2 bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600",children:(0,lr.jsx)(Nr.KSO,{})})]}),(0,lr.jsx)("div",{className:"overflow-x-auto",children:(0,lr.jsxs)("table",{className:"min-w-full bg-white",children:[(0,lr.jsx)("thead",{className:"bg-purple-100",children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Recruiter"}),(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Company"}),(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Plan"}),(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Amount"}),(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Start Date"}),(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"End Date"}),(0,lr.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Action"})]})}),(0,lr.jsx)("tbody",{className:"divide-y divide-purple-200",children:h.map((e=>(0,lr.jsxs)("tr",{className:"hover:bg-purple-50",children:[(0,lr.jsx)("td",{className:"py-4 px-6 text-sm",children:e.name}),(0,lr.jsx)("td",{className:"py-4 px-6 text-sm",children:e.companyName}),(0,lr.jsx)("td",{className:"py-4 px-6 text-sm",children:e.planDuration}),(0,lr.jsxs)("td",{className:"py-4 px-6 text-sm",children:["",e.subscriptionAmount]}),(0,lr.jsx)("td",{className:"py-4 px-6 text-sm",children:new Date(e.subscriptionStartDate).toLocaleDateString()}),(0,lr.jsx)("td",{className:"py-4 px-6 text-sm",children:new Date(e.expiryDate).toLocaleDateString()}),(0,lr.jsx)("td",{className:"py-4 px-6 text-sm",children:(0,lr.jsxs)("button",{onClick:()=>(e=>{u(e),c(!0)})(e),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded inline-flex items-center",children:[(0,lr.jsx)(Nr.Rqy,{className:"mr-2"})," Cancel subscription"]})})]},e.id)))})]})}),(0,lr.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center",children:[(0,lr.jsx)("div",{className:"mb-4 sm:mb-0",children:(0,lr.jsxs)("span",{className:"text-sm text-purple-600",children:["Page ",n," of ",l]})}),(0,lr.jsxs)("div",{className:"flex space-x-2",children:[(0,lr.jsxs)("button",{onClick:()=>x(n-1),disabled:1===n,className:"px-4 py-2 bg-purple-500 text-white rounded disabled:bg-purple-300 hover:bg-purple-600 transition-colors duration-200 flex items-center",children:[(0,lr.jsx)(Nr._Jj,{className:"mr-2"})," Previous"]}),(0,lr.jsxs)("button",{onClick:()=>x(n+1),disabled:n===l,className:"px-4 py-2 bg-purple-500 text-white rounded disabled:bg-purple-300 hover:bg-purple-600 transition-colors duration-200 flex items-center",children:["Next ",(0,lr.jsx)(Nr.X6T,{className:"ml-2"})]})]})]})]}):(0,lr.jsx)("div",{className:"text-center py-4 text-purple-600",children:"No subscriptions found."})]})]})]}),(0,lr.jsx)(dn,{isOpen:o,onClose:()=>c(!1),onConfirm:()=>{d&&(e(ot(d.id)),c(!1),u(null))},title:"Cancel Subscription",message:`Are you sure you want to cancel the subscription for ${null==d?void 0:d.name}?`})]})},Ln=()=>{const e=(0,i.wA)(),{userPosts:s,loading:t,error:a,totalPages:l,currentPage:n}=(0,i.d4)((e=>e.userPosts)),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),[x,h]=(0,r.useState)("");(0,r.useEffect)((()=>{e(dt({page:n,limit:10}))}),[e,n]);const g=s=>{s>=1&&s<=l&&e(dt({page:s,limit:10}))},f=s.filter((e=>e.userName.toLowerCase().includes(x.toLowerCase())||e.userEmail.toLowerCase().includes(x.toLowerCase())||e.content.toLowerCase().includes(x.toLowerCase())));return t?(0,lr.jsx)("div",{children:"Loading..."}):a?(0,lr.jsxs)("div",{children:["Error: ",a]}):s&&0!==s.length?(0,lr.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-100",children:[(0,lr.jsx)(zr,{}),(0,lr.jsxs)("div",{className:"flex-1",children:[(0,lr.jsx)(Or,{}),(0,lr.jsxs)("main",{className:"p-2 sm:p-4 md:p-6",children:[(0,lr.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold text-purple-800 mb-4 sm:mb-6",children:"User Post Management"}),(0,lr.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row",children:[(0,lr.jsxs)("div",{className:"relative flex-grow mb-2 sm:mb-0 sm:mr-2",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Search posts...",value:x,onChange:e=>h(e.target.value),className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border rounded-lg text-gray-700 focus:outline-none focus:border-purple-500"}),x&&(0,lr.jsx)("button",{onClick:()=>{h("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-800",children:(0,lr.jsx)(Nr.QCr,{className:"text-sm sm:text-base"})})]}),(0,lr.jsxs)("button",{className:"bg-purple-500 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-purple-600 text-sm sm:text-base",children:[(0,lr.jsx)(Nr.KSO,{className:"inline mr-1"})," Search"]})]}),(0,lr.jsx)("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:(0,lr.jsxs)("table",{className:"min-w-full leading-normal text-sm sm:text-base",children:[(0,lr.jsx)("thead",{children:(0,lr.jsxs)("tr",{className:"bg-purple-100",children:[(0,lr.jsx)("th",{className:"px-3 sm:px-5 py-2 sm:py-3 border-b-2 border-purple-200 text-left text-xs sm:text-sm font-semibold text-purple-700 uppercase tracking-wider",children:"User"}),(0,lr.jsx)("th",{className:"px-3 sm:px-5 py-2 sm:py-3 border-b-2 border-purple-200 text-left text-xs sm:text-sm font-semibold text-purple-700 uppercase tracking-wider",children:"Content"}),(0,lr.jsx)("th",{className:"px-3 sm:px-5 py-2 sm:py-3 border-b-2 border-purple-200 text-left text-xs sm:text-sm font-semibold text-purple-700 uppercase tracking-wider",children:"Media"}),(0,lr.jsx)("th",{className:"px-3 sm:px-5 py-2 sm:py-3 border-b-2 border-purple-200 text-left text-xs sm:text-sm font-semibold text-purple-700 uppercase tracking-wider",children:"Action"})]})}),(0,lr.jsx)("tbody",{children:f.map((e=>(0,lr.jsxs)("tr",{className:"hover:bg-purple-50",children:[(0,lr.jsx)("td",{className:"px-3 sm:px-5 py-3 sm:py-5 border-b border-purple-200",children:(0,lr.jsx)("div",{className:"flex items-center",children:(0,lr.jsxs)("div",{children:[(0,lr.jsx)("p",{className:"text-purple-900 whitespace-no-wrap font-semibold",children:e.userName}),(0,lr.jsx)("p",{className:"text-purple-600 whitespace-no-wrap text-xs sm:text-sm",children:e.userEmail})]})})}),(0,lr.jsxs)("td",{className:"px-3 sm:px-5 py-3 sm:py-5 border-b border-purple-200",children:[(0,lr.jsxs)("button",{onClick:()=>{return s=e.id,void p(m===s?null:s);var s},className:"text-purple-600 hover:text-purple-900 text-xs sm:text-sm",children:[(0,lr.jsx)(Nr.Ny1,{className:"inline mr-1 sm:mr-2"}),m===e.id?"Hide Content":"Show Content"]}),m===e.id&&(0,lr.jsx)("div",{className:"mt-2 text-purple-800 text-xs sm:text-sm",children:e.content})]}),(0,lr.jsxs)("td",{className:"px-3 sm:px-5 py-3 sm:py-5 border-b border-purple-200",children:[e.imageUrl&&(0,lr.jsxs)("button",{onClick:()=>window.open(e.imageUrl,"_blank"),className:"text-purple-600 hover:text-purple-900 mr-2 text-xs sm:text-sm",children:[(0,lr.jsx)(Nr.dkL,{className:"inline mr-1"})," View Image"]}),e.videoUrl&&(0,lr.jsxs)("button",{onClick:()=>window.open(e.videoUrl,"_blank"),className:"text-purple-600 hover:text-purple-900 text-xs sm:text-sm",children:[(0,lr.jsx)(Nr.HiP,{className:"inline mr-1"})," View Video"]})]}),(0,lr.jsx)("td",{className:"px-3 sm:px-5 py-3 sm:py-5 border-b border-purple-200",children:(0,lr.jsxs)("button",{onClick:()=>(e=>{u(e),c(!0)})(e),className:(e.isBlocked?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600")+" text-white font-bold py-1 sm:py-2 px-2 sm:px-4 rounded focus:outline-none focus:shadow-outline text-xs sm:text-sm",children:[e.isBlocked?(0,lr.jsx)(Nr.YVu,{className:"inline mr-1 sm:mr-2"}):(0,lr.jsx)(Nr.Rqy,{className:"inline mr-1 sm:mr-2"}),e.isBlocked?"Unblock":"Block"]})})]},e.id)))})]})}),(0,lr.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center",children:[(0,lr.jsx)("div",{className:"mb-2 sm:mb-0",children:(0,lr.jsxs)("span",{className:"text-purple-700 text-xs sm:text-sm",children:["Page ",n," of ",l]})}),(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("button",{onClick:()=>g(n-1),disabled:1===n,className:"px-3 sm:px-4 py-1 sm:py-2 mr-2 bg-purple-500 text-white rounded disabled:bg-purple-300 text-xs sm:text-sm",children:[(0,lr.jsx)(Nr._Jj,{className:"inline mr-1"})," Previous"]}),(0,lr.jsxs)("button",{onClick:()=>g(n+1),disabled:n===l,className:"px-3 sm:px-4 py-1 sm:py-2 bg-purple-500 text-white rounded disabled:bg-purple-300 text-xs sm:text-sm",children:["Next ",(0,lr.jsx)(Nr.X6T,{className:"inline ml-1"})]})]})]})]})]}),(0,lr.jsx)(dn,{isOpen:o,onClose:()=>c(!1),onConfirm:()=>{d&&(e(ut(d.id)),c(!1),u(null))},title:(null!=d&&d.isBlocked?"Unblock":"Block")+" User Post",message:`Are you sure you want to ${null!=d&&d.isBlocked?"unblock":"block"} this post by ${null==d?void 0:d.userName}?`})]}):(0,lr.jsx)("div",{children:"No user posts found."})},_n=()=>{const e=(0,i.wA)(),s=(0,n.Zp)(),{users:t,jobPosts:a,loading:l,error:o}=(0,i.d4)((e=>e.userSearch)),c=(0,i.d4)((e=>e.auth.user)),[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)([]);return l?(0,lr.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}):o?(0,lr.jsx)("div",{className:"text-red-500 text-center mt-4",children:o}):(0,lr.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,lr.jsx)(fr,{}),(0,lr.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4 text-purple-700",children:"Search Results"}),0===t.length&&0===a.length&&(0,lr.jsx)("p",{className:"text-gray-500 text-center",children:"No results found"}),t.length>0&&(0,lr.jsxs)("div",{className:"mb-8",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-4 text-purple-600",children:"Users"}),(0,lr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((t=>(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,lr.jsxs)("div",{className:"flex items-center mb-4",children:[t.profileImage?(0,lr.jsx)("img",{src:t.profileImage,alt:t.name,className:"w-12 h-12 rounded-full mr-4"}):(0,lr.jsx)(jr.A,{className:"w-12 h-12 text-gray-400 mr-4"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h4",{className:"font-semibold",children:t.name}),(0,lr.jsx)("p",{className:"text-sm text-gray-500",children:t.email})]})]}),(0,lr.jsxs)("div",{className:"flex space-x-2",children:[!1===t.isConnected&&!m.includes(t.id)&&(0,lr.jsx)("button",{onClick:()=>(async s=>{if(c)try{await e(Qe({senderId:c.id,recipientId:s})).unwrap(),p((e=>[...e,s])),ja.oR.success("Connection request sent successfully!")}catch(e){console.error("Error sending connection request:",e),ja.oR.error("Failed to send connection request. Please try again.")}})(t.id),className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition duration-300",children:"Connect"}),m.includes(t.id)&&(0,lr.jsx)("button",{className:"bg-gray-400 text-white px-3 py-1 rounded text-sm cursor-not-allowed",disabled:!0,children:"Request Sent"}),(0,lr.jsx)("button",{onClick:()=>{return e=t.id,void s(`/connection/profile/${e}`);var e},className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-300 transition duration-300",children:"View Profile"})]})]},t.id)))})]}),a.length>0&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-4 text-purple-600",children:"Job Posts"}),(0,lr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((t=>{var r;return(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,lr.jsxs)("div",{className:"flex items-center mb-4",children:[(0,lr.jsx)(Jr.A,{className:"w-8 h-8 text-purple-600 mr-4"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h4",{className:"font-semibold",children:t.title}),(0,lr.jsx)("p",{className:"text-sm text-gray-500",children:null===(r=t.company)||void 0===r?void 0:r.name})]})]}),(0,lr.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[t.description.substring(0,100),"..."]}),(0,lr.jsxs)("div",{className:"flex space-x-2",children:[t.isApplied||d.includes(t._id)?(0,lr.jsx)("button",{className:"bg-gray-400 text-white px-3 py-1 rounded text-sm cursor-not-allowed",disabled:!0,children:"Applied"}):(0,lr.jsx)("button",{onClick:()=>(async s=>{if(!s)return console.error("Invalid job ID"),void ja.oR.error("Error: Invalid job ID");if(c)try{console.log("Applying for job with ID:",s),await e(E({userId:c.id,jobId:s})).unwrap(),u((e=>[...e,s])),ja.oR.success("Successfully applied for the job!")}catch(e){console.error("Error applying for job:",e),ja.oR.error("Error occurred while applying for the job. Please try again.")}})(t._id),className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition duration-300",children:"Apply"}),(0,lr.jsx)("button",{onClick:()=>(async t=>{if(!t)return console.error("Invalid job ID"),void ja.oR.error("Error: Invalid job ID");try{console.log("Fetching job details for ID:",t),await e(D(t)).unwrap(),s(`/jobs/${t}`)}catch(e){console.error("Error fetching job details:",e),ja.oR.error("Error occurred while fetching job details. Please try again.")}})(t._id),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-300 transition duration-300",children:"View Details"})]})]},t._id)}))})]})]})]})},Vn=e=>e.replace(/[<>&'"]/g,""),Wn=()=>{const e=(0,i.wA)(),{loading:s,generatedResumeLink:t,error:a}=(0,i.d4)((e=>e.resume)),l=(0,i.d4)((e=>{var s;return null===(s=e.auth.user)||void 0===s?void 0:s.id})),[n,o]=(0,r.useState)({userId:l||"",fullName:"",email:"",phone:"",profileSummary:"",skills:[],projects:[],experience:[],education:[]}),[c,d]=(0,r.useState)({}),u=e=>{const{name:s,value:t}=e.target,r=Vn(t);o({...n,[s]:r}),m(s,r)},m=(e,s)=>{let t="";switch(e){case"fullName":s.length<2&&(t="Name must be at least 2 characters long");break;case"email":/\S+@\S+\.\S+/.test(s)||(t="Invalid email address");break;case"phone":/^\+?[\d\s-]{10,14}$/.test(s)||(t="Invalid phone number")}d((s=>({...s,[e]:t})))},p=(e,s,t)=>{const r=[...n.projects];r[e]="technologies"===s?{...r[e],[s]:t.split(",").map((e=>e.trim()))}:{...r[e],[s]:t},o({...n,projects:r})},x=(e,s,t)=>{const r=[...n.experience];r[e]={...r[e],[s]:t},o({...n,experience:r})},f=(e,s,t)=>{const r=[...n.education];r[e]={...r[e],[s]:t},o({...n,education:r})};return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(fr,{}),(0,lr.jsxs)("div",{className:"max-w-4xl m-3 mx-auto p-4 sm:p-6 bg-white rounded-lg shadow-md",children:[(0,lr.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-purple-700 mb-6",children:"Resume Builder"}),(0,lr.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),l)if(Object.values(c).some((e=>""!==e)))e(kt("Please correct the errors in the form."));else{e(Nt(n)),e(wt());try{const s=await(async e=>{try{const s=await h.A.post(`${g}/generate-resume`,e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.data&&s.data.pdfData){const e=atob(s.data.pdfData),t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);const r=new Uint8Array(t),a=new Blob([r],{type:"application/pdf"});return URL.createObjectURL(a)}throw new Error("Invalid response format from server")}catch(e){throw console.error("Error generating resume:",e),h.A.isAxiosError(e)?e.response?(console.error("Error response:",e.response.data),new Error(`Server error: ${JSON.stringify(e.response.data)}`)):e.request?(console.error("No response received:",e.request),new Error("No response from the server")):(console.error("Error setting up request:",e.message),new Error("Error setting up request")):e instanceof Error?e:new Error("An unexpected error occurred")}})({...n,userId:l});e(Ct(s))}catch(s){s instanceof Error?e(kt(s.message)):e(kt("An unknown error occurred"))}}else e(kt("User ID is missing. Please log in again."))},className:"space-y-4 sm:space-y-6",children:[(0,lr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-purple-700",children:"Full Name"}),(0,lr.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:n.fullName,onChange:u,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm\n                  "+(c.fullName?"border-red-500":"border-gray-300"),required:!0}),c.fullName&&(0,lr.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.fullName})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-purple-700",children:"Email"}),(0,lr.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:u,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm\n                  "+(c.email?"border-red-500":"border-gray-300"),required:!0}),c.email&&(0,lr.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.email})]})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-purple-700",children:"Phone"}),(0,lr.jsx)("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:u,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm",required:!0}),c.phone&&(0,lr.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.phone})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"profileSummary",className:"block text-sm font-medium text-purple-700",children:"Profile Summary"}),(0,lr.jsx)("textarea",{id:"profileSummary",name:"profileSummary",value:n.profileSummary,onChange:u,rows:4,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm",required:!0}),c.profileSummary&&(0,lr.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.profileSummary})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"skills",className:"block text-sm font-medium text-purple-700",children:"Skills (comma-separated)"}),(0,lr.jsx)("input",{type:"text",id:"skills",name:"skills",value:n.skills.join(", "),onChange:e=>{const s=e.target.value.split(",").map((e=>Vn(e.trim())));o({...n,skills:s})},className:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm",required:!0}),c.skills&&(0,lr.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.skills})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold text-purple-700 mb-2",children:"Projects"}),n.projects.map(((e,s)=>(0,lr.jsxs)("div",{className:"mb-4 p-4 border border-purple-200 rounded-md relative",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Project Name",value:e.name,onChange:e=>p(s,"name",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("textarea",{placeholder:"Project Description",value:e.description,onChange:e=>p(s,"description",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Technologies (comma-separated)",value:e.technologies.join(", "),onChange:e=>p(s,"technologies",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Project Link (optional)",value:e.link,onChange:e=>p(s,"link",e.target.value),className:"w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("button",{type:"button",onClick:()=>(e=>{const s=n.projects.filter(((s,t)=>t!==e));o({...n,projects:s})})(s),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:"Remove"})]},s))),(0,lr.jsx)("button",{type:"button",onClick:()=>{o({...n,projects:[...n.projects,{name:"",description:"",technologies:[],link:""}]})},className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm sm:text-base md:text-lg lg:text-xl",children:"Add Project"})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold text-purple-700 mb-2",children:"Experience"}),n.experience.map(((e,s)=>(0,lr.jsxs)("div",{className:"mb-4 p-4 border border-purple-200 rounded-md relative",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Company",value:e.company,onChange:e=>x(s,"company",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Position",value:e.position,onChange:e=>x(s,"position",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Start Date",value:e.startDate,onChange:e=>x(s,"startDate",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"End Date",value:e.endDate,onChange:e=>x(s,"endDate",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("textarea",{placeholder:"Description",value:e.description,onChange:e=>x(s,"description",e.target.value),className:"w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("button",{type:"button",onClick:()=>(e=>{const s=n.experience.filter(((s,t)=>t!==e));o({...n,experience:s})})(s),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:"Remove"})]},s))),(0,lr.jsx)("button",{type:"button",onClick:()=>{o({...n,experience:[...n.experience,{company:"",position:"",startDate:"",endDate:"",description:""}]})},className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm sm:text-base md:text-lg lg:text-xl",children:"Add Experience"})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold text-purple-700 mb-2",children:"Education"}),n.education.map(((e,s)=>(0,lr.jsxs)("div",{className:"mb-4 p-4 border border-purple-200 rounded-md relative",children:[(0,lr.jsx)("input",{type:"text",placeholder:"Institution",value:e.institution,onChange:e=>f(s,"institution",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Degree",value:e.degree,onChange:e=>f(s,"degree",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Field of Study",value:e.field,onChange:e=>f(s,"field",e.target.value),className:"mb-2 w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("input",{type:"text",placeholder:"Graduation Date",value:e.graduationDate,onChange:e=>f(s,"graduationDate",e.target.value),className:"w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"}),(0,lr.jsx)("button",{type:"button",onClick:()=>(e=>{const s=n.education.filter(((s,t)=>t!==e));o({...n,education:s})})(s),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:"Remove"})]},s))),(0,lr.jsx)("button",{type:"button",onClick:()=>{o({...n,education:[...n.education,{institution:"",degree:"",field:"",graduationDate:""}]})},className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm sm:text-base md:text-lg lg:text-xl",children:"Add Education"})]}),(0,lr.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-2 px-4 rounded-full hover:bg-purple-700 transition duration-300 disabled:opacity-50 text-sm sm:text-base md:text-lg lg:text-xl",disabled:s||Object.values(c).some((e=>""!==e)),children:s?"Generating...":"Generate Resume"})]}),a&&(0,lr.jsx)("p",{className:"mt-4 text-red-600",children:a}),t&&(0,lr.jsxs)("div",{className:"mt-6",children:[(0,lr.jsx)("h2",{className:"text-xl font-semibold text-purple-700 mb-2",children:"Generated Resume"}),(0,lr.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,lr.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 underline",children:"View Your Resume"}),(0,lr.jsx)("a",{href:t,download:"resume.pdf",className:"text-purple-600 hover:text-purple-800 underline",children:"Download Your Resume"})]}),(0,lr.jsx)("div",{className:"mt-4",children:(0,lr.jsx)("iframe",{src:t,title:"Generated Resume",width:"100%",height:"600px",style:{border:"none"}})})]})]})]})},Bn=()=>{var e,s,t,a,l,o;const{jobId:c}=(0,n.g)(),d=(0,n.Zp)(),{posts:u}=(0,i.d4)((e=>e.jobPosts)),[m,p]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=u.find((e=>e._id===c));e?p(e):d("/recruiter/jobs")}),[c,u,d]),m?(0,lr.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,lr.jsx)(Wr,{}),(0,lr.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,lr.jsxs)("button",{onClick:()=>d("/recruiter/jobs"),className:"mb-4 flex items-center text-purple-600 hover:text-purple-800",children:[(0,lr.jsx)(Ul.A,{size:20,className:"mr-2"}),"Back to Job Posts"]}),(0,lr.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,lr.jsx)("h2",{className:"text-3xl font-bold mb-4 text-purple-800",children:m.title}),(0,lr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Jr.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Company:"}),(0,lr.jsx)("span",{className:"ml-2",children:null===(e=m.company)||void 0===e?void 0:e.name})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Za.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Website:"}),(0,lr.jsx)("a",{href:null===(s=m.company)||void 0===s?void 0:s.website,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:underline",children:null===(t=m.company)||void 0===t?void 0:t.website})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Zr.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Location:"}),(0,lr.jsx)("span",{className:"ml-2",children:m.location})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Kr.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Salary Range:"}),(0,lr.jsxs)("span",{className:"ml-2",children:["",m.salaryRange.min.toLocaleString()," - ",m.salaryRange.max.toLocaleString()]})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Oa.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Way of Work:"}),(0,lr.jsx)("span",{className:"ml-2",children:m.wayOfWork})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Hr.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Posted On:"}),(0,lr.jsx)("span",{className:"ml-2",children:new Date(m.createdAt).toLocaleDateString()})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Xr.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Status:"}),(0,lr.jsx)("span",{className:"ml-2 "+("Open"===m.status?"text-green-600":"text-red-600"),children:m.status})]}),(0,lr.jsxs)("div",{className:"flex items-center",children:[(0,lr.jsx)(Oa.A,{className:"text-purple-600 mr-2"}),(0,lr.jsx)("span",{className:"font-semibold",children:"Applicants:"}),(0,lr.jsx)("span",{className:"ml-2",children:(null===(a=m.applicants)||void 0===a?void 0:a.length)||0})]})]}),(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-2 text-purple-700",children:"Description"}),(0,lr.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:m.description})]}),(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-2 text-purple-700",children:"Qualifications"}),(0,lr.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:null===(l=m.qualifications)||void 0===l?void 0:l.filter((e=>e)).map(((e,s)=>(0,lr.jsx)("li",{children:e},s)))})]}),(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-2 text-purple-700",children:"Skills Required"}),(0,lr.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(o=m.skillsRequired)||void 0===o?void 0:o.filter((e=>e)).map(((e,s)=>(0,lr.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm",children:e},s)))})]}),m.reports&&m.reports.length>0&&(0,lr.jsxs)("div",{className:"mb-6",children:[(0,lr.jsx)("h3",{className:"text-xl font-semibold mb-2 text-red-700",children:"Reports"}),m.reports.map(((e,s)=>(0,lr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-2",children:[(0,lr.jsxs)("p",{children:[(0,lr.jsx)("strong",{children:"Reason:"})," ",e.reason]}),(0,lr.jsxs)("p",{children:[(0,lr.jsx)("strong",{children:"Reported on:"})," ",new Date(e.createdAt).toLocaleString()]})]},s)))]})]})]})]}):(0,lr.jsx)("div",{children:"Loading..."})},Jn=()=>{const[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(1),[p,x]=(0,r.useState)(30),[h,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)({}),b=(0,i.wA)(),y=(0,n.Zp)(),{loading:v,error:N}=(0,i.d4)((e=>e.auth));return(0,r.useEffect)((()=>{let e;return 2===u&&p>0?e=setInterval((()=>{x((e=>e-1))}),1e3):0===p&&g(!0),()=>clearInterval(e)}),[u,p]),(0,r.useEffect)((()=>{b({type:"auth/clearError"})}),[e,t,l,c,b]),(0,lr.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 p-4",children:(0,lr.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-white p-8 shadow-md",children:[(0,lr.jsx)("h2",{className:"mb-6 text-2xl font-bold text-center text-purple-600",children:"Forgot Password"}),1===u&&(0,lr.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),j({}),!(e=>/^[a-zA-Z0-9._-]+@[a-z]+\.[a-z]{2,}$/.test(e))(e))return void j({email:"Please enter a valid email address."});const t=await b(O(e));O.fulfilled.match(t)&&(m(2),x(30),g(!1))},children:[(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-700",children:"Email Address"}),(0,lr.jsx)("input",{type:"email",id:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",value:e,onChange:e=>s(e.target.value),required:!0}),f.email&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500",children:f.email})]}),(0,lr.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",disabled:v,children:v?"Sending...":"Send OTP"})]}),2===u&&(0,lr.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const r=await b(T({email:e,otp:t}));T.fulfilled.match(r)&&m(3)},children:[(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsx)("label",{htmlFor:"otp",className:"block mb-2 text-sm font-medium text-gray-700",children:"Enter OTP"}),(0,lr.jsx)("input",{type:"text",id:"otp",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",value:t,onChange:e=>a(e.target.value),required:!0})]}),(0,lr.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 mb-4",disabled:v,children:v?"Verifying...":"Verify OTP"}),p>0&&(0,lr.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Resend OTP in ",p," seconds"]}),h&&(0,lr.jsx)("button",{type:"button",onClick:()=>{b(O(e)),x(30),g(!1)},className:"w-full mt-2 bg-gray-200 text-gray-700 py-2 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Resend OTP"})]}),3===u&&(0,lr.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),j({}),!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(l))return void j({newPassword:"Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."});if(l!==c)return void j({confirmPassword:"Passwords do not match."});const r=await b($({email:e,newPassword:l,otp:t}));$.fulfilled.match(r)&&y("/login")},children:[(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsx)("label",{htmlFor:"newPassword",className:"block mb-2 text-sm font-medium text-gray-700",children:"New Password"}),(0,lr.jsx)("input",{type:"password",id:"newPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",value:l,onChange:e=>o(e.target.value),required:!0}),f.newPassword&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500",children:f.newPassword})]}),(0,lr.jsxs)("div",{className:"mb-4",children:[(0,lr.jsx)("label",{htmlFor:"confirmPassword",className:"block mb-2 text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,lr.jsx)("input",{type:"password",id:"confirmPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",value:c,onChange:e=>d(e.target.value),required:!0}),f.confirmPassword&&(0,lr.jsx)("p",{className:"mt-2 text-sm text-red-500",children:f.confirmPassword})]}),(0,lr.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",disabled:v,children:v?"Resetting...":"Reset Password"})]}),N&&(0,lr.jsx)("p",{className:"mt-4 text-center text-sm text-red-600",children:N})]})})},Zn=()=>{const{handleIncomingCall:e,isCallActive:s,incomingCallData:t,endCall:a}=or(),l=(0,i.d4)((e=>e.auth.user));(0,r.useEffect)((()=>{if(l){ar.connect(l.id);const s=ar.onIncomingCall(e);return()=>{s(),ar.disconnect()}}}),[l,e]);const o=(0,r.useCallback)((()=>{a()}),[a]);return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsxs)(n.BV,{children:[(0,lr.jsx)(n.qh,{path:"/",element:(0,lr.jsx)(dr,{})}),(0,lr.jsx)(n.qh,{path:"/login",element:(0,lr.jsx)(dr,{})}),(0,lr.jsx)(n.qh,{path:"/signup",element:(0,lr.jsx)(pr,{})}),(0,lr.jsx)(n.qh,{path:"/dashboard/*",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Rr,{})})}),(0,lr.jsx)(n.qh,{path:"/profile/:userId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(fa,{})})}),(0,lr.jsx)(n.qh,{path:"/profile/update/:userId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Ia,{})})}),(0,lr.jsx)(n.qh,{path:"/jobs",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Pl,{})})}),(0,lr.jsx)(n.qh,{path:"/jobs/:jobId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(El,{})})}),(0,lr.jsx)(n.qh,{path:"/posts/:userId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Jl,{})})}),(0,lr.jsx)(n.qh,{path:"/posts/create",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(on,{})})}),(0,lr.jsx)(n.qh,{path:"/posts/user/:userId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Jl,{})})}),(0,lr.jsx)(n.qh,{path:"/edit-post/:postId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(pn,{})})}),(0,lr.jsx)(n.qh,{path:"/connection/profile/:userId",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(hn,{})})}),(0,lr.jsx)(n.qh,{path:"/connections",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(gn,{})})}),(0,lr.jsx)(n.qh,{path:"/messages",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(kn,{})})}),(0,lr.jsx)(n.qh,{path:"/user/messages",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Un,{})})}),(0,lr.jsx)(n.qh,{path:"/search-results",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(_n,{})})}),(0,lr.jsx)(n.qh,{path:"/resume-builder",element:(0,lr.jsx)(Er,{children:(0,lr.jsx)(Wn,{})})}),(0,lr.jsx)(n.qh,{path:"/forgot-password",element:(0,lr.jsx)(Jn,{})}),(0,lr.jsx)(n.qh,{path:"/admin",element:(0,lr.jsx)(Dr,{})}),(0,lr.jsx)(n.qh,{path:"/admin/login",element:(0,lr.jsx)(Dr,{})}),(0,lr.jsx)(n.qh,{path:"/admin/dashboard",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(Mr,{})})}),(0,lr.jsx)(n.qh,{path:"/admin/recruiters",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(aa,{})})}),(0,lr.jsx)(n.qh,{path:"/admin/profile",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(Ra,{})})}),(0,lr.jsx)(n.qh,{path:"/admin/user",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(Ll,{})})}),(0,lr.jsx)(n.qh,{path:"/admin/jobpost",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(xn,{})})}),(0,lr.jsx)(n.qh,{path:"/admin/subscription",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(qn,{})})}),(0,lr.jsx)(n.qh,{path:"/admin/userposts",element:(0,lr.jsx)(Ur,{children:(0,lr.jsx)(Ln,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter",element:(0,lr.jsx)(qr,{})}),(0,lr.jsx)(n.qh,{path:"/recruiter/login",element:(0,lr.jsx)(qr,{})}),(0,lr.jsx)(n.qh,{path:"/recruiter/signup",element:(0,lr.jsx)(Lr,{})}),(0,lr.jsx)(n.qh,{path:"/recruiter/verify-otp",element:(0,lr.jsx)(ra,{})}),(0,lr.jsx)(n.qh,{path:"/recruiter/dashboard/*",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(sa,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/profile",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(Ea,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/update-profile",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(Da,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/jobs",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(Wa,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/jobs/create",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(sl,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/jobs/edit/:id",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(al,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/job-applicants/:jobId",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(Fl,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/contestant/:contestantId",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(ql,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/messages",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(Tn,{})})}),(0,lr.jsx)(n.qh,{path:"/recruiter/jobPost/:jobId",element:(0,lr.jsx)(ta,{children:(0,lr.jsx)(Bn,{})})})]}),(0,lr.jsx)(Gn,{}),s&&t&&(0,lr.jsx)(Nn,{recipientId:t.callerId,onEndCall:o,incomingCallData:t})]})},Gn=()=>{const{isIncomingCall:e,incomingCallData:s,acceptCall:t,rejectCall:r}=or();return e?(0,lr.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,lr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 text-center",children:[(0,lr.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Incoming Call"}),(0,lr.jsxs)("p",{className:"mb-6",children:["You have an incoming call from ",null==s?void 0:s.callerId]}),(0,lr.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,lr.jsx)("button",{onClick:t,className:"bg-green-500 text-white px-4 py-2 rounded-lg",children:"Accept"}),(0,lr.jsx)("button",{onClick:r,className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Reject"})]})]})}):null},Hn=()=>(0,lr.jsx)(ir,{children:(0,lr.jsx)(Zn,{})}),Yn=()=>(0,lr.jsx)(i.Kq,{store:sr,children:(0,lr.jsx)(o.Q,{loading:(0,lr.jsx)(la,{}),persistor:er,children:(0,lr.jsx)(Hn,{})})}),Kn=document.getElementById("root");a.createRoot(Kn).render((0,lr.jsx)(r.StrictMode,{children:(0,lr.jsxs)(l.Kd,{children:[(0,lr.jsx)(Yn,{}),(0,lr.jsx)(ja.N9,{})]})}))},477:()=>{}},a={};function l(e){var s=a[e];if(void 0!==s)return s.exports;var t=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(t.exports,t,t.exports,l),t.loaded=!0,t.exports}l.m=r,e=[],l.O=(s,t,r,a)=>{if(!t){var n=1/0;for(d=0;d<e.length;d++){t=e[d][0],r=e[d][1],a=e[d][2];for(var i=!0,o=0;o<t.length;o++)(!1&a||n>=a)&&Object.keys(l.O).every((e=>l.O[e](t[o])))?t.splice(o--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var c=r();void 0!==c&&(s=c)}}return s}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[t,r,a]},l.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return l.d(s,{a:s}),s},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var n={};s=s||[null,t({}),t([]),t(t)];for(var i=2&r&&e;"object"==typeof i&&!~s.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((s=>n[s]=()=>e[s]));return n.default=()=>e,l.d(a,n),a},l.d=(e,s)=>{for(var t in s)l.o(s,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},l.u=e=>"static/js/"+e+".63f9bd0b.chunk.js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.p="/",(()=>{l.b=document.baseURI||self.location.href;var e={792:0};l.O.j=s=>0===e[s];var s=(s,t)=>{var r,a,n=t[0],i=t[1],o=t[2],c=0;if(n.some((s=>0!==e[s]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(o)var d=o(l)}for(s&&s(t);c<n.length;c++)a=n[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},t=self.webpackChunk_4jobs_frontend=self.webpackChunk_4jobs_frontend||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var n=l.O(void 0,[411],(()=>l(5060)));n=l.O(n)})();
//# sourceMappingURL=main.4db63586.js.map